!function(e){"use strict";var a=function(){var e="http://api2.hockeydata.net/img/icehockey/ebel/team-logos/",a="136",t="731",i=function(){return'<div class="hsc-game-schedule-list-header">  <div class="date">Datum</div>  <div class="time"></div>  <div class="team">Begegnung</div>  <div class="scores">Ergebnis</div></div>'},s=function(){return'<div class="hsc-game-schedule-list-item">  <div class="date">{{ scheduledDate.value }}</div>  <div class="time">{{ scheduledTime }}</div>  <div class="teams">    <div class="team team-home mb-sm">      <div class="teamlogo"><img src="'+e+a+'/{{ homeTeamId }}.png" /></div>      <div class="teamname">{{ homeTeamLongName }}</div>    </div>    <div class="team team-away">      <div class="teamlogo"><img src="'+e+a+'/{{ awayTeamId }}.png" /></div>      <div class="teamname">{{ awayTeamLongName }}</div>    </div>  </div>  <div class="scores">      {{ homeTeamScore === null ? "-": homeTeamScore }}      : {{ awayTeamScore === null ? "-": awayTeamScore }}  </div></div>'},n=function(e,a){var t='<div class="hsc-game-schedule-list">',s=d(a.rows);t+=i(),t+=s,t+="</div>",e.html(t)},d=function(e){var a="",i=_.template(s());return _.each(e,function(e,s){(e.homeTeamId===t||e.awayTeamId===t)&&(a+=i(e))}),a};return{init:function(e){var i=new HockeyDataService;a=e.data("division"),t=e.data("team"),i.getSchedule(a).then(function(a){n(e,a.data)},function(e){console.log("error",e)})}}};e(document).ready(function(){_.templateSettings={interpolate:/\{\{(.+?)\}\}/g},e(".js-widget-schedule").each(function(){var t=new a;t.init(e(this))})})}(jQuery),function(e){"use strict";var a=function(){var e="http://api2.hockeydata.net/img/icehockey/ebel/team-logos/",a="136",t="731",i="last",s=function(){var t="last-game-widget";return"next"===i&&(t="next-game-widget"),'<div class="hsc-game-schedule-widget '+t+'"><div class="schedule-widget-holder">  <div class="image image-home-team">    <img src="'+e+a+'/{{ homeTeamId }}.png" />  </div>  <div class="meta">    <div class="date">{{ scheduledDate.value }}</div>    <div class="time">{{ scheduledTime }}</div>    <div class="scores">      <div class="score score-home-team">{{ homeTeamScore }}</div>      <div class="divider">:</div>      <div class="score score-away-team">{{ awayTeamScore }}</div>    </div>  </div>  <div class="image image-away-team">    <img src="'+e+a+'/{{ awayTeamId }}.png" />  </div></div>  <div class="teams">    <span class="team home-team">{{ homeTeamLongName }}</span>    <span class="divider">Vs</span>    <span class="team away-team">{{ awayTeamLongName }}</span>  </div></div>'},n=function(e,a){var t="<div>",i=d(a.rows);t+=i,t+="</div>",e.html(t)},d=function(e){var a="",n=_.template(s()),d=moment();if("last"===i){e=_.chain(e).reverse()._wrapped;var c=_.find(e,function(e){if((e.homeTeamId===t||e.awayTeamId===t)&&e.scheduledDate&&e.scheduledDate.value&&null!==e.homeTeamScore&&null!==e.awayTeamScore){var a=moment(e.scheduledDate.value,"DD.MM.YYYY");if(a.isBefore(d))return e}});c&&(a+=n(c))}if("next"===i){var o=_.find(e,function(e){if((e.homeTeamId===t||e.awayTeamId===t)&&e.scheduledDate&&e.scheduledDate.value&&null===e.homeTeamScore&&null===e.awayTeamScore){var a=moment(e.scheduledDate.value,"DD.MM.YYYY");if(a.isSameOrAfter(d))return e}});o&&(a+=n(o))}return a};return{init:function(e){var s=new HockeyDataService;a=e.data("division"),t=e.data("team"),i=e.data("type");s.getSchedule(a).then(function(a){n(e,a.data)},function(e){console.log("error",e)})}}};e(document).ready(function(){_.templateSettings={interpolate:/\{\{(.+?)\}\}/g},e(".js-widget-schedule-single").each(function(){var t=new a;t.init(e(this))})})}(jQuery),function(e){"use strict";function a(){var e="http://api2.hockeydata.net/img/icehockey/ebel/team-logos/",a="136",t=function(){return'<tr><th class="rank">#</th><th class="team" colspan="2">Team</th><th class="info">GP</th><th class="info">W</th><th class="info">L</th><th class="info">P</th></tr>'},i=function(){return'<tr class="hsc-standings-row"><td class="rank">{{ tableRank }}</td><td class="image"><img src="'+e+a+'/{{ id }}.png" /></td><td class="team">{{ teamLongname }}</td><td class="info">{{ gamesPlayed }}</td><td class="info">{{ gamesWon }}</td><td class="info">{{ gamesLost }}</td><td class="info">{{ points }}</td></tr>'},s=function(e,a){var i='<table class="table hsc-standings">',s=n(a.rows);i+=t(),i+=s,i+="</table>",e.html(i)},n=function(e){var a="",t=_.template(i());return _.each(e,function(e,i){a+=t(e)}),a};return{init:function(e){var t=new HockeyDataService;a=e.data("division"),t.getStandings(a).then(function(a){s(e,a.data)},function(e){console.log("error",e)})}}}e(document).ready(function(){_.templateSettings={interpolate:/\{\{(.+?)\}\}/g},e(".js-widget-standings").each(function(){var t=new a;t.init(e(this))})})}(jQuery),function(e){window.HockeyDataService=function(){"use strict";var a="http://api.hockeydata.net/data/ebel",t="/Schedule",i="/Standings",s={apiKey:"e52b5722cbc89c3e51ee0cd6e2485a81",divisionId:"136",league:"ebel",sport:"icehockey",referer:"www.h-sc.at"};return{getSchedule:function(i){var n=e.Deferred();s.divisionId=i;var d=e.param(s),c=a+t+"?"+d,o=e.ajax({url:c,dataType:"jsonp",async:!1});return o.success(function(e){return e.data.rows.push({id:"d9e6d977-e3bd-4d81-9788-722cdb9f669b",divisionId:136,divisionName:"VEHL 1",scheduledDate:{sortValue:14451804e5,value:"18.10.2019",shortValue:"18.10.",longValue:"18. Oktober 2015"},scheduledTime:"17:00",awayTeamId:728,awayTeamLongName:"EHC Megafit Ice Tigers Dornbirn",awayTeamShortName:"ITD",awayTeamFlavourname:"EHC Megafit Ice Tigers Dornbirn",homeTeamId:731,homeTeamLongName:"SC Hohenems 2",homeTeamShortName:"HO2",homeTeamFlavourname:"SC Hohenems 2",homeTeamScore:null,awayTeamScore:null}),n.resolve(e)}),o.error(function(e){return n.reject({data:{rows:[]}})}),n.promise()},getStandings:function(t){s.divisionId=t;var n=e.param(s),d=a+i+"?"+n;return e.ajax({url:d,dataType:"jsonp"})}}}}(jQuery);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbXBvbmVudHMvc2NoZWR1bGUtbGlzdC5qcyIsImNvbXBvbmVudHMvc2NoZWR1bGUtd2lkZ2V0LmpzIiwiY29tcG9uZW50cy9zdGFuZGluZ3MuanMiLCJzZXJ2aWNlcy9ob2NrZXlkYXRhLXNlcnZpY2UuanMiXSwibmFtZXMiOlsiJCIsIkhvY2tleURhdGFXaWRnZXRzU2NoZWR1bGUiLCJsb2dvQmFzZVVybCIsImRpdmlzaW9uSWQiLCJ0ZWFtSWQiLCJidWlsZFdpZGdldEhlYWRlciIsInJldHJpZXZlUm93VGVtcGxhdGUiLCJidWlsZFdpZGdldCIsIiRlbGVtIiwiZGF0YSIsIm91dHB1dCIsInJvd3MiLCJidWlsZFJvd3MiLCJodG1sIiwidGVtcGxhdGUiLCJfIiwiZWFjaCIsInZhbHVlIiwia2V5IiwiaG9tZVRlYW1JZCIsImF3YXlUZWFtSWQiLCJpbml0Iiwic2VydmljZSIsIkhvY2tleURhdGFTZXJ2aWNlIiwiZ2V0U2NoZWR1bGUiLCJ0aGVuIiwicmVzcG9uc2UiLCJjb25zb2xlIiwibG9nIiwiZG9jdW1lbnQiLCJyZWFkeSIsInRlbXBsYXRlU2V0dGluZ3MiLCJpbnRlcnBvbGF0ZSIsInNjaGVkdWxlcyIsInRoaXMiLCJqUXVlcnkiLCJIb2NrZXlEYXRhV2lkZ2V0c1NjaGVkdWxlU2luZ2xlIiwidHlwZSIsImNsYXNzTmFtZSIsInRvZGF5IiwibW9tZW50IiwiY2hhaW4iLCJyZXZlcnNlIiwiX3dyYXBwZWQiLCJsYXN0R2FtZSIsImZpbmQiLCJyb3ciLCJzY2hlZHVsZWREYXRlIiwiaG9tZVRlYW1TY29yZSIsImF3YXlUZWFtU2NvcmUiLCJnYW1lRGF0ZSIsImlzQmVmb3JlIiwibmV4dEdhbWUiLCJpc1NhbWVPckFmdGVyIiwic2NoZWR1bGVzU2luZ2xlIiwiSG9ja2V5RGF0YVdpZGdldHNTdGFuZGluZ3MiLCJyZXRyaWV2ZUhlYWRlclRlbXBsYXRlIiwiZ2V0U3RhbmRpbmdzIiwic3RhbmRpbmdzIiwid2luZG93IiwiYmFzZVVybCIsInNjaGVkdWxlVXJsIiwic3RhbmRpbmdzVXJsIiwidXJsUGFyYW1zIiwiYXBpS2V5IiwibGVhZ3VlIiwic3BvcnQiLCJyZWZlcmVyIiwiZGVmZXIiLCJEZWZlcnJlZCIsInBhcmFtcyIsInBhcmFtIiwidXJsIiwicmVxdWVzdCIsImFqYXgiLCJkYXRhVHlwZSIsImFzeW5jIiwic3VjY2VzcyIsInB1c2giLCJpZCIsImRpdmlzaW9uTmFtZSIsInNvcnRWYWx1ZSIsInNob3J0VmFsdWUiLCJsb25nVmFsdWUiLCJzY2hlZHVsZWRUaW1lIiwiYXdheVRlYW1Mb25nTmFtZSIsImF3YXlUZWFtU2hvcnROYW1lIiwiYXdheVRlYW1GbGF2b3VybmFtZSIsImhvbWVUZWFtTG9uZ05hbWUiLCJob21lVGVhbVNob3J0TmFtZSIsImhvbWVUZWFtRmxhdm91cm5hbWUiLCJyZXNvbHZlIiwiZXJyb3IiLCJyZWplY3QiLCJwcm9taXNlIl0sIm1hcHBpbmdzIjoiQ0FBQSxTQUFBQSxHQUNBLFlBRUEsSUFBQUMsR0FBQSxXQUNBLEdBQUFDLEdBQUEsNERBQ0FDLEVBQUEsTUFDQUMsRUFBQSxNQUVBQyxFQUFBLFdBQ0EsTUFBQSxxTEFRQUMsRUFBQSxXQUNBLE1BQUEsNk9BS0FKLEVBQUFDLEVBQUEsMEtBSUFELEVBQUFDLEVBQUEsaVFBV0FJLEVBQUEsU0FBQUMsRUFBQUMsR0FDQSxHQUFBQyxHQUFBLHVDQUNBQyxFQUFBQyxFQUFBSCxFQUFBRSxLQUNBRCxJQUFBTCxJQUNBSyxHQUFBQyxFQUNBRCxHQUFBLFNBRUFGLEVBQUFLLEtBQUFILElBR0FFLEVBQUEsU0FBQUQsR0FDQSxHQUFBRCxHQUFBLEdBQ0FJLEVBQUFDLEVBQUFELFNBQUFSLElBUUEsT0FOQVMsR0FBQUMsS0FBQUwsRUFBQSxTQUFBTSxFQUFBQyxJQUNBRCxFQUFBRSxhQUFBZixHQUFBYSxFQUFBRyxhQUFBaEIsS0FDQU0sR0FBQUksRUFBQUcsTUFJQVAsRUFHQSxRQUNBVyxLQUFBLFNBQUFiLEdBQ0EsR0FBQWMsR0FBQSxHQUFBQyxrQkFDQXBCLEdBQUFLLEVBQUFD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QyxlQUNBa0MsVUFBQSxXQUNBaEUsTUFBQSxhQUNBaUUsV0FBQSxTQUNBQyxVQUFBLG9CQUVBQyxjQUFBLFFBQ0FoRSxXQUFBLElBQ0FpRSxpQkFBQSxrQ0FDQUMsa0JBQUEsTUFDQUMsb0JBQUEsa0NBQ0FwRSxXQUFBLElBQ0FxRSxpQkFBQSxnQkFDQUMsa0JBQUEsTUFDQUMsb0JBQUEsZ0JBQ0ExQyxjQUFBLEtBQ0FDLGNBQUEsT0FHQW1CLEVBQUF1QixRQUFBakUsS0FFQStDLEVBQUFtQixNQUFBLFNBQUFsRSxHQUNBLE1BQUEwQyxHQUFBeUIsUUFDQXBGLE1BQ0FFLGFBS0F5RCxFQUFBMEIsV0FHQXJDLGFBQUEsU0FBQXRELEdBQ0E0RCxFQUFBNUQsV0FBQUEsQ0FDQSxJQUFBbUUsR0FBQXRFLEVBQUF1RSxNQUFBUixHQUNBUyxFQUFBWixFQUFBRSxFQUFBLElBQUFRLENBRUEsT0FBQXRFLEdBQUEwRSxNQUNBRixJQUFBQSxFQUNBRyxTQUFBLGNBS0F4QyIsImZpbGUiOiJoc2MubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uKCQpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcblxuICAgIHZhciBIb2NrZXlEYXRhV2lkZ2V0c1NjaGVkdWxlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBsb2dvQmFzZVVybCA9ICdodHRwOi8vYXBpMi5ob2NrZXlkYXRhLm5ldC9pbWcvaWNlaG9ja2V5L2ViZWwvdGVhbS1sb2dvcy8nO1xuICAgICAgICB2YXIgZGl2aXNpb25JZCA9ICcxMzYnO1xuICAgICAgICB2YXIgdGVhbUlkID0gJzczMSc7XG5cbiAgICAgICAgdmFyIGJ1aWxkV2lkZ2V0SGVhZGVyID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gJzxkaXYgY2xhc3M9XCJoc2MtZ2FtZS1zY2hlZHVsZS1saXN0LWhlYWRlclwiPidcbiAgICAgICAgICAgICAgICArICcgIDxkaXYgY2xhc3M9XCJkYXRlXCI+RGF0dW08L2Rpdj4nXG4gICAgICAgICAgICAgICAgKyAnICA8ZGl2IGNsYXNzPVwidGltZVwiPjwvZGl2PidcbiAgICAgICAgICAgICAgICArICcgIDxkaXYgY2xhc3M9XCJ0ZWFtXCI+QmVnZWdudW5nPC9kaXY+J1xuICAgICAgICAgICAgICAgICsgJyAgPGRpdiBjbGFzcz1cInNjb3Jlc1wiPkVyZ2VibmlzPC9kaXY+J1xuICAgICAgICAgICAgICAgICsgJzwvZGl2Pic7XG4gICAgICAgIH07XG5cbiAgICAgICAgdmFyIHJldHJpZXZlUm93VGVtcGxhdGUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiAnPGRpdiBjbGFzcz1cImhzYy1nYW1lLXNjaGVkdWxlLWxpc3QtaXRlbVwiPidcbiAgICAgICAgICAgICAgICArICcgIDxkaXYgY2xhc3M9XCJkYXRlXCI+e3sgc2NoZWR1bGVkRGF0ZS52YWx1ZSB9fTwvZGl2PidcbiAgICAgICAgICAgICAgICArICcgIDxkaXYgY2xhc3M9XCJ0aW1lXCI+e3sgc2NoZWR1bGVkVGltZSB9fTwvZGl2PidcbiAgICAgICAgICAgICAgICArICcgIDxkaXYgY2xhc3M9XCJ0ZWFtc1wiPidcbiAgICAgICAgICAgICAgICArICcgICAgPGRpdiBjbGFzcz1cInRlYW0gdGVhbS1ob21lIG1iLXNtXCI+J1xuICAgICAgICAgICAgICAgICsgJyAgICAgIDxkaXYgY2xhc3M9XCJ0ZWFtbG9nb1wiPjxpbWcgc3JjPVwiJyArIGxvZ29CYXNlVXJsICsgZGl2aXNpb25JZCArICcve3sgaG9tZVRlYW1JZCB9fS5wbmdcIiAvPjwvZGl2PidcbiAgICAgICAgICAgICAgICArICcgICAgICA8ZGl2IGNsYXNzPVwidGVhbW5hbWVcIj57eyBob21lVGVhbUxvbmdOYW1lIH19PC9kaXY+J1xuICAgICAgICAgICAgICAgICsgJyAgICA8L2Rpdj4nXG4gICAgICAgICAgICAgICAgKyAnICAgIDxkaXYgY2xhc3M9XCJ0ZWFtIHRlYW0tYXdheVwiPidcbiAgICAgICAgICAgICAgICArICcgICAgICA8ZGl2IGNsYXNzPVwidGVhbWxvZ29cIj48aW1nIHNyYz1cIicgKyBsb2dvQmFzZVVybCArIGRpdmlzaW9uSWQgKyAnL3t7IGF3YXlUZWFtSWQgfX0ucG5nXCIgLz48L2Rpdj4nXG4gICAgICAgICAgICAgICAgKyAnICAgICAgPGRpdiBjbGFzcz1cInRlYW1uYW1lXCI+e3sgYXdheVRlYW1Mb25nTmFtZSB9fTwvZGl2PidcbiAgICAgICAgICAgICAgICArICcgICAgPC9kaXY+J1xuICAgICAgICAgICAgICAgICsgJyAgPC9kaXY+J1xuICAgICAgICAgICAgICAgICsgJyAgPGRpdiBjbGFzcz1cInNjb3Jlc1wiPidcbiAgICAgICAgICAgICAgICArICcgICAgICB7eyBob21lVGVhbVNjb3JlID09PSBudWxsID8gXCItXCI6IGhvbWVUZWFtU2NvcmUgfX0nXG4gICAgICAgICAgICAgICAgKyAnICAgICAgOiB7eyBhd2F5VGVhbVNjb3JlID09PSBudWxsID8gXCItXCI6IGF3YXlUZWFtU2NvcmUgfX0nXG4gICAgICAgICAgICAgICAgKyAnICA8L2Rpdj4nXG4gICAgICAgICAgICAgICAgKyAnPC9kaXY+JztcbiAgICAgICAgfTtcblxuICAgICAgICB2YXIgYnVpbGRXaWRnZXQgPSBmdW5jdGlvbigkZWxlbSwgZGF0YSkge1xuICAgICAgICAgICAgdmFyIG91dHB1dCA9ICc8ZGl2IGNsYXNzPVwiaHNjLWdhbWUtc2NoZWR1bGUtbGlzdFwiPic7XG4gICAgICAgICAgICB2YXIgcm93cyA9IGJ1aWxkUm93cyhkYXRhLnJvd3MpO1xuICAgICAgICAgICAgb3V0cHV0ICs9IGJ1aWxkV2lkZ2V0SGVhZGVyKCk7XG4gICAgICAgICAgICBvdXRwdXQgKz0gcm93cztcbiAgICAgICAgICAgIG91dHB1dCArPSAnPC9kaXY+JztcblxuICAgICAgICAgICAgJGVsZW0uaHRtbChvdXRwdXQpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHZhciBidWlsZFJvd3MgPSBmdW5jdGlvbihyb3dzKSB7XG4gICAgICAgICAgICB2YXIgb3V0cHV0ID0gJyc7XG4gICAgICAgICAgICB2YXIgdGVtcGxhdGUgPSBfLnRlbXBsYXRlKHJldHJpZXZlUm93VGVtcGxhdGUoKSk7XG5cbiAgICAgICAgICAgIF8uZWFjaChyb3dzLCBmdW5jdGlvbih2YWx1ZSwga2V5KSB7XG4gICAgICAgICAgICAgICAgaWYgKHZhbHVlLmhvbWVUZWFtSWQgPT09IHRlYW1JZCB8fCB2YWx1ZS5hd2F5VGVhbUlkID09PSB0ZWFtSWQpIHtcbiAgICAgICAgICAgICAgICAgICAgb3V0cHV0ICs9IHRlbXBsYXRlKHZhbHVlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgcmV0dXJuIG91dHB1dDtcbiAgICAgICAgfTtcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgaW5pdDogZnVuY3Rpb24oJGVsZW0pIHtcbiAgICAgICAgICAgICAgICB2YXIgc2VydmljZSA9IG5ldyBIb2NrZXlEYXRhU2VydmljZTtcbiAgICAgICAgICAgICAgICBkaXZpc2lvbklkID0gJGVsZW0uZGF0YSgnZGl2aXNpb24nKTtcbiAgICAgICAgICAgICAgICB0ZWFtSWQgPSAkZWxlbS5kYXRhKCd0ZWFtJyk7XG5cbiAgICAgICAgICAgICAgICBzZXJ2aWNlLmdldFNjaGVkdWxlKGRpdmlzaW9uSWQpLnRoZW4oXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBidWlsZFdpZGdldCgkZWxlbSwgcmVzcG9uc2UuZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnZXJyb3InLCByZXNwb25zZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcblxuICAgICQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCkge1xuICAgICAgICBfLnRlbXBsYXRlU2V0dGluZ3MgPSB7XG4gICAgICAgICAgICBpbnRlcnBvbGF0ZTogL1xce1xceyguKz8pXFx9XFx9L2dcbiAgICAgICAgfTtcblxuICAgICAgICAkKCcuanMtd2lkZ2V0LXNjaGVkdWxlJykuZWFjaChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciBzY2hlZHVsZXMgPSBuZXcgSG9ja2V5RGF0YVdpZGdldHNTY2hlZHVsZTtcbiAgICAgICAgICAgIHNjaGVkdWxlcy5pbml0KCQodGhpcykpO1xuICAgICAgICB9KTtcbiAgICB9KTtcbn0pKGpRdWVyeSk7XG4iLCIoZnVuY3Rpb24oJCkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIHZhciBIb2NrZXlEYXRhV2lkZ2V0c1NjaGVkdWxlU2luZ2xlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBsb2dvQmFzZVVybCA9ICdodHRwOi8vYXBpMi5ob2NrZXlkYXRhLm5ldC9pbWcvaWNlaG9ja2V5L2ViZWwvdGVhbS1sb2dvcy8nO1xuICAgICAgICB2YXIgZGl2aXNpb25JZCA9ICcxMzYnO1xuICAgICAgICB2YXIgdGVhbUlkID0gJzczMSc7XG4gICAgICAgIHZhciB0eXBlID0gJ2xhc3QnO1xuXG4gICAgICAgIHZhciByZXRyaWV2ZVJvd1RlbXBsYXRlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgY2xhc3NOYW1lID0gJ2xhc3QtZ2FtZS13aWRnZXQnO1xuXG4gICAgICAgICAgICBpZiAodHlwZSA9PT0gJ25leHQnKSB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lID0gJ25leHQtZ2FtZS13aWRnZXQnO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gJzxkaXYgY2xhc3M9XCJoc2MtZ2FtZS1zY2hlZHVsZS13aWRnZXQgJyArIGNsYXNzTmFtZSArICdcIj4nXG4gICAgICAgICAgICAgICAgKyAnPGRpdiBjbGFzcz1cInNjaGVkdWxlLXdpZGdldC1ob2xkZXJcIj4nXG4gICAgICAgICAgICAgICAgKyAnICA8ZGl2IGNsYXNzPVwiaW1hZ2UgaW1hZ2UtaG9tZS10ZWFtXCI+J1xuICAgICAgICAgICAgICAgICsgJyAgICA8aW1nIHNyYz1cIicgKyBsb2dvQmFzZVVybCArIGRpdmlzaW9uSWQgKyAnL3t7IGhvbWVUZWFtSWQgfX0ucG5nXCIgLz4nXG4gICAgICAgICAgICAgICAgKyAnICA8L2Rpdj4nXG4gICAgICAgICAgICAgICAgKyAnICA8ZGl2IGNsYXNzPVwibWV0YVwiPidcbiAgICAgICAgICAgICAgICArICcgICAgPGRpdiBjbGFzcz1cImRhdGVcIj57eyBzY2hlZHVsZWREYXRlLnZhbHVlIH19PC9kaXY+J1xuICAgICAgICAgICAgICAgICsgJyAgICA8ZGl2IGNsYXNzPVwidGltZVwiPnt7IHNjaGVkdWxlZFRpbWUgfX08L2Rpdj4nXG4gICAgICAgICAgICAgICAgKyAnICAgIDxkaXYgY2xhc3M9XCJzY29yZXNcIj4nXG4gICAgICAgICAgICAgICAgKyAnICAgICAgPGRpdiBjbGFzcz1cInNjb3JlIHNjb3JlLWhvbWUtdGVhbVwiPnt7IGhvbWVUZWFtU2NvcmUgfX08L2Rpdj4nXG4gICAgICAgICAgICAgICAgKyAnICAgICAgPGRpdiBjbGFzcz1cImRpdmlkZXJcIj46PC9kaXY+J1xuICAgICAgICAgICAgICAgICsgJyAgICAgIDxkaXYgY2xhc3M9XCJzY29yZSBzY29yZS1hd2F5LXRlYW1cIj57eyBhd2F5VGVhbVNjb3JlIH19PC9kaXY+J1xuICAgICAgICAgICAgICAgICsgJyAgICA8L2Rpdj4nXG4gICAgICAgICAgICAgICAgKyAnICA8L2Rpdj4nXG4gICAgICAgICAgICAgICAgKyAnICA8ZGl2IGNsYXNzPVwiaW1hZ2UgaW1hZ2UtYXdheS10ZWFtXCI+J1xuICAgICAgICAgICAgICAgICsgJyAgICA8aW1nIHNyYz1cIicgKyBsb2dvQmFzZVVybCArIGRpdmlzaW9uSWQgKyAnL3t7IGF3YXlUZWFtSWQgfX0ucG5nXCIgLz4nXG4gICAgICAgICAgICAgICAgKyAnICA8L2Rpdj4nXG4gICAgICAgICAgICAgICAgKyAnPC9kaXY+J1xuICAgICAgICAgICAgICAgICsgJyAgPGRpdiBjbGFzcz1cInRlYW1zXCI+J1xuICAgICAgICAgICAgICAgICsgJyAgICA8c3BhbiBjbGFzcz1cInRlYW0gaG9tZS10ZWFtXCI+e3sgaG9tZVRlYW1Mb25nTmFtZSB9fTwvc3Bhbj4nXG4gICAgICAgICAgICAgICAgKyAnICAgIDxzcGFuIGNsYXNzPVwiZGl2aWRlclwiPlZzPC9zcGFuPidcbiAgICAgICAgICAgICAgICArICcgICAgPHNwYW4gY2xhc3M9XCJ0ZWFtIGF3YXktdGVhbVwiPnt7IGF3YXlUZWFtTG9uZ05hbWUgfX08L3NwYW4+J1xuICAgICAgICAgICAgICAgICsgJyAgPC9kaXY+J1xuICAgICAgICAgICAgICAgICsgJzwvZGl2Pic7XG4gICAgICAgIH07XG5cbiAgICAgICAgdmFyIGJ1aWxkV2lkZ2V0ID0gZnVuY3Rpb24oJGVsZW0sIGRhdGEpIHtcbiAgICAgICAgICAgIHZhciBvdXRwdXQgPSAnPGRpdj4nO1xuICAgICAgICAgICAgdmFyIHJvd3MgPSBidWlsZFJvd3MoZGF0YS5yb3dzKTtcbiAgICAgICAgICAgIG91dHB1dCArPSByb3dzO1xuICAgICAgICAgICAgb3V0cHV0ICs9ICc8L2Rpdj4nO1xuXG4gICAgICAgICAgICAkZWxlbS5odG1sKG91dHB1dCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgdmFyIGJ1aWxkUm93cyA9IGZ1bmN0aW9uKHJvd3MpIHtcbiAgICAgICAgICAgIHZhciBvdXRwdXQgPSAnJztcbiAgICAgICAgICAgIHZhciB0ZW1wbGF0ZSA9IF8udGVtcGxhdGUocmV0cmlldmVSb3dUZW1wbGF0ZSgpKTtcbiAgICAgICAgICAgIHZhciB0b2RheSA9IG1vbWVudCgpO1xuICAgICAgICAgICAgdmFyIGxpbWl0ID0gMTtcbiAgICAgICAgICAgIHZhciBmb3VuZCA9IDA7XG5cbiAgICAgICAgICAgIGlmICh0eXBlID09PSAnbGFzdCcpIHtcbiAgICAgICAgICAgICAgICByb3dzID0gXy5jaGFpbihyb3dzKS5yZXZlcnNlKCkuX3dyYXBwZWQ7XG4gICAgICAgICAgICAgICAgdmFyIGxhc3RHYW1lID0gXy5maW5kKHJvd3MsIGZ1bmN0aW9uKHJvdykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoKHJvdy5ob21lVGVhbUlkID09PSB0ZWFtSWQgfHwgcm93LmF3YXlUZWFtSWQgPT09IHRlYW1JZClcbiAgICAgICAgICAgICAgICAgICAgICAgICYmIChyb3cuc2NoZWR1bGVkRGF0ZSAmJiByb3cuc2NoZWR1bGVkRGF0ZS52YWx1ZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICYmIHJvdy5ob21lVGVhbVNjb3JlICE9PSBudWxsXG4gICAgICAgICAgICAgICAgICAgICAgICAmJiByb3cuYXdheVRlYW1TY29yZSAhPT0gbnVsbFxuICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBnYW1lRGF0ZSA9IG1vbWVudChyb3cuc2NoZWR1bGVkRGF0ZS52YWx1ZSwgJ0RELk1NLllZWVknKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChnYW1lRGF0ZS5pc0JlZm9yZSh0b2RheSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcm93O1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBpZiAobGFzdEdhbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgb3V0cHV0ICs9IHRlbXBsYXRlKGxhc3RHYW1lKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICh0eXBlID09PSAnbmV4dCcpIHtcbiAgICAgICAgICAgICAgICB2YXIgbmV4dEdhbWUgPSBfLmZpbmQocm93cywgZnVuY3Rpb24ocm93KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICgocm93LmhvbWVUZWFtSWQgPT09IHRlYW1JZCB8fCByb3cuYXdheVRlYW1JZCA9PT0gdGVhbUlkKVxuICAgICAgICAgICAgICAgICAgICAgICAgJiYgKHJvdy5zY2hlZHVsZWREYXRlICYmIHJvdy5zY2hlZHVsZWREYXRlLnZhbHVlKVxuICAgICAgICAgICAgICAgICAgICAgICAgJiYgcm93LmhvbWVUZWFtU2NvcmUgPT09IG51bGxcbiAgICAgICAgICAgICAgICAgICAgICAgICYmIHJvdy5hd2F5VGVhbVNjb3JlID09PSBudWxsXG4gICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGdhbWVEYXRlID0gbW9tZW50KHJvdy5zY2hlZHVsZWREYXRlLnZhbHVlLCAnREQuTU0uWVlZWScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGdhbWVEYXRlLmlzU2FtZU9yQWZ0ZXIodG9kYXkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJvdztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgaWYgKG5leHRHYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgIG91dHB1dCArPSB0ZW1wbGF0ZShuZXh0R2FtZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gb3V0cHV0O1xuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBpbml0OiBmdW5jdGlvbigkZWxlbSkge1xuICAgICAgICAgICAgICAgIHZhciBzZXJ2aWNlID0gbmV3IEhvY2tleURhdGFTZXJ2aWNlO1xuICAgICAgICAgICAgICAgIGRpdmlzaW9uSWQgPSAkZWxlbS5kYXRhKCdkaXZpc2lvbicpO1xuICAgICAgICAgICAgICAgIHRlYW1JZCA9ICRlbGVtLmRhdGEoJ3RlYW0nKTtcbiAgICAgICAgICAgICAgICB0eXBlID0gJGVsZW0uZGF0YSgndHlwZScpO1xuXG4gICAgICAgICAgICAgICAgdmFyIGRhdGEgPSBzZXJ2aWNlLmdldFNjaGVkdWxlKGRpdmlzaW9uSWQpLnRoZW4oXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBidWlsZFdpZGdldCgkZWxlbSwgcmVzcG9uc2UuZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnZXJyb3InLCByZXNwb25zZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBidWlsZFdpZGdldCgkZWxlbSwgSlNPTi5wYXJzZShyZXNwb25zZS5kYXRhKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcblxuICAgICQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCkge1xuICAgICAgICBfLnRlbXBsYXRlU2V0dGluZ3MgPSB7XG4gICAgICAgICAgICBpbnRlcnBvbGF0ZTogL1xce1xceyguKz8pXFx9XFx9L2dcbiAgICAgICAgfTtcblxuICAgICAgICAkKCcuanMtd2lkZ2V0LXNjaGVkdWxlLXNpbmdsZScpLmVhY2goZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgc2NoZWR1bGVzU2luZ2xlID0gbmV3IEhvY2tleURhdGFXaWRnZXRzU2NoZWR1bGVTaW5nbGU7XG4gICAgICAgICAgICBzY2hlZHVsZXNTaW5nbGUuaW5pdCgkKHRoaXMpKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG59KShqUXVlcnkpO1xuIiwiKGZ1bmN0aW9uKCQpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcblxuICAgIGZ1bmN0aW9uIEhvY2tleURhdGFXaWRnZXRzU3RhbmRpbmdzKCkge1xuICAgICAgICB2YXIgbG9nb0Jhc2VVcmwgPSAnaHR0cDovL2FwaTIuaG9ja2V5ZGF0YS5uZXQvaW1nL2ljZWhvY2tleS9lYmVsL3RlYW0tbG9nb3MvJztcbiAgICAgICAgdmFyIGRpdmlzaW9uSWQgPSAnMTM2JztcbiAgICAgICAgdmFyIHRlYW1JZCA9ICc3MzEnO1xuXG4gICAgICAgIHZhciByZXRyaWV2ZUhlYWRlclRlbXBsYXRlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gJzx0cj4nXG4gICAgICAgICAgICAgICAgKyAnPHRoIGNsYXNzPVwicmFua1wiPiM8L3RoPidcbiAgICAgICAgICAgICAgICArICc8dGggY2xhc3M9XCJ0ZWFtXCIgY29sc3Bhbj1cIjJcIj5UZWFtPC90aD4nXG4gICAgICAgICAgICAgICAgKyAnPHRoIGNsYXNzPVwiaW5mb1wiPkdQPC90aD4nXG4gICAgICAgICAgICAgICAgKyAnPHRoIGNsYXNzPVwiaW5mb1wiPlc8L3RoPidcbiAgICAgICAgICAgICAgICArICc8dGggY2xhc3M9XCJpbmZvXCI+TDwvdGg+J1xuICAgICAgICAgICAgICAgICsgJzx0aCBjbGFzcz1cImluZm9cIj5QPC90aD4nXG4gICAgICAgICAgICAgICAgKyAnPC90cj4nO1xuICAgICAgICB9O1xuXG4gICAgICAgIHZhciByZXRyaWV2ZVJvd1RlbXBsYXRlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gJzx0ciBjbGFzcz1cImhzYy1zdGFuZGluZ3Mtcm93XCI+J1xuICAgICAgICAgICAgICAgICsgJzx0ZCBjbGFzcz1cInJhbmtcIj57eyB0YWJsZVJhbmsgfX08L3RkPidcbiAgICAgICAgICAgICAgICArICc8dGQgY2xhc3M9XCJpbWFnZVwiPjxpbWcgc3JjPVwiJyArIGxvZ29CYXNlVXJsICsgZGl2aXNpb25JZCArICcve3sgaWQgfX0ucG5nXCIgLz48L3RkPidcbiAgICAgICAgICAgICAgICArICc8dGQgY2xhc3M9XCJ0ZWFtXCI+e3sgdGVhbUxvbmduYW1lIH19PC90ZD4nXG4gICAgICAgICAgICAgICAgKyAnPHRkIGNsYXNzPVwiaW5mb1wiPnt7IGdhbWVzUGxheWVkIH19PC90ZD4nXG4gICAgICAgICAgICAgICAgKyAnPHRkIGNsYXNzPVwiaW5mb1wiPnt7IGdhbWVzV29uIH19PC90ZD4nXG4gICAgICAgICAgICAgICAgKyAnPHRkIGNsYXNzPVwiaW5mb1wiPnt7IGdhbWVzTG9zdCB9fTwvdGQ+J1xuICAgICAgICAgICAgICAgICsgJzx0ZCBjbGFzcz1cImluZm9cIj57eyBwb2ludHMgfX08L3RkPidcbiAgICAgICAgICAgICAgICArICc8L3RyPic7XG4gICAgICAgIH07XG5cbiAgICAgICAgdmFyIGJ1aWxkV2lkZ2V0ID0gZnVuY3Rpb24oJGVsZW0sIGRhdGEpIHtcbiAgICAgICAgICAgIHZhciBvdXRwdXQgPSAnPHRhYmxlIGNsYXNzPVwidGFibGUgaHNjLXN0YW5kaW5nc1wiPic7XG4gICAgICAgICAgICB2YXIgcm93cyA9IGJ1aWxkUm93cyhkYXRhLnJvd3MpO1xuICAgICAgICAgICAgb3V0cHV0ICs9IHJldHJpZXZlSGVhZGVyVGVtcGxhdGUoKTtcbiAgICAgICAgICAgIG91dHB1dCArPSByb3dzO1xuICAgICAgICAgICAgb3V0cHV0ICs9ICc8L3RhYmxlPic7XG5cbiAgICAgICAgICAgICRlbGVtLmh0bWwob3V0cHV0KTtcbiAgICAgICAgfTtcblxuICAgICAgICB2YXIgYnVpbGRSb3dzID0gZnVuY3Rpb24ocm93cykge1xuICAgICAgICAgICAgdmFyIG91dHB1dCA9ICcnO1xuICAgICAgICAgICAgdmFyIHRlbXBsYXRlID0gXy50ZW1wbGF0ZShyZXRyaWV2ZVJvd1RlbXBsYXRlKCkpO1xuXG4gICAgICAgICAgICBfLmVhY2gocm93cywgZnVuY3Rpb24odmFsdWUsIGtleSkge1xuICAgICAgICAgICAgICAgIG91dHB1dCArPSB0ZW1wbGF0ZSh2YWx1ZSk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgcmV0dXJuIG91dHB1dDtcbiAgICAgICAgfTtcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgaW5pdDogZnVuY3Rpb24oJGVsZW0pIHtcbiAgICAgICAgICAgICAgICB2YXIgc2VydmljZSA9IG5ldyBIb2NrZXlEYXRhU2VydmljZTtcbiAgICAgICAgICAgICAgICBkaXZpc2lvbklkID0gJGVsZW0uZGF0YSgnZGl2aXNpb24nKTtcblxuICAgICAgICAgICAgICAgIHNlcnZpY2UuZ2V0U3RhbmRpbmdzKGRpdmlzaW9uSWQpLnRoZW4oXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBidWlsZFdpZGdldCgkZWxlbSwgcmVzcG9uc2UuZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnZXJyb3InLCByZXNwb25zZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcblxuICAgICQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCkge1xuICAgICAgICBfLnRlbXBsYXRlU2V0dGluZ3MgPSB7XG4gICAgICAgICAgICBpbnRlcnBvbGF0ZTogL1xce1xceyguKz8pXFx9XFx9L2dcbiAgICAgICAgfTtcblxuICAgICAgICAkKCcuanMtd2lkZ2V0LXN0YW5kaW5ncycpLmVhY2goZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgc3RhbmRpbmdzID0gbmV3IEhvY2tleURhdGFXaWRnZXRzU3RhbmRpbmdzO1xuICAgICAgICAgICAgc3RhbmRpbmdzLmluaXQoJCh0aGlzKSk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xufSkoalF1ZXJ5KTtcbiIsIihmdW5jdGlvbigkKSB7XG53aW5kb3cuSG9ja2V5RGF0YVNlcnZpY2UgPSBmdW5jdGlvbigpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcblxuICAgIHZhciBiYXNlVXJsID0gJ2h0dHA6Ly9hcGkuaG9ja2V5ZGF0YS5uZXQvZGF0YS9lYmVsJztcbiAgICB2YXIgc2NoZWR1bGVVcmwgPSAnL1NjaGVkdWxlJztcbiAgICB2YXIgc3RhbmRpbmdzVXJsID0gJy9TdGFuZGluZ3MnO1xuXG4gICAgdmFyIHVybFBhcmFtcyA9IHtcbiAgICAgICAgYXBpS2V5OiAnZTUyYjU3MjJjYmM4OWMzZTUxZWUwY2Q2ZTI0ODVhODEnLFxuICAgICAgICBkaXZpc2lvbklkOiAnMTM2JyxcbiAgICAgICAgbGVhZ3VlOiAnZWJlbCcsXG4gICAgICAgIHNwb3J0OiAnaWNlaG9ja2V5JyxcbiAgICAgICAgcmVmZXJlcjogJ3d3dy5oLXNjLmF0J1xuICAgIH07XG5cbiAgICByZXR1cm4ge1xuICAgICAgICBnZXRTY2hlZHVsZTogZnVuY3Rpb24oZGl2aXNpb25JZCkge1xuICAgICAgICAgICAgdmFyIGRlZmVyID0gJC5EZWZlcnJlZCgpO1xuXG4gICAgICAgICAgICB1cmxQYXJhbXMuZGl2aXNpb25JZCA9IGRpdmlzaW9uSWQ7XG4gICAgICAgICAgICB2YXIgcGFyYW1zID0gJC5wYXJhbSh1cmxQYXJhbXMpO1xuICAgICAgICAgICAgdmFyIHVybCA9IGJhc2VVcmwgKyBzY2hlZHVsZVVybCArICc/JyArIHBhcmFtcztcblxuICAgICAgICAgICAgdmFyIHJlcXVlc3QgPSAkLmFqYXgoe1xuICAgICAgICAgICAgICAgIHVybDogdXJsLFxuICAgICAgICAgICAgICAgIGRhdGFUeXBlOiBcImpzb25wXCIsXG4gICAgICAgICAgICAgICAgYXN5bmM6IGZhbHNlXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJlcXVlc3Quc3VjY2VzcyhmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEucm93cy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgXCJpZFwiOiBcImQ5ZTZkOTc3LWUzYmQtNGQ4MS05Nzg4LTcyMmNkYjlmNjY5YlwiLFxuICAgICAgICAgICAgICAgICAgICBcImRpdmlzaW9uSWRcIjogMTM2LFxuICAgICAgICAgICAgICAgICAgICBcImRpdmlzaW9uTmFtZVwiOiBcIlZFSEwgMVwiLFxuICAgICAgICAgICAgICAgICAgICBcInNjaGVkdWxlZERhdGVcIjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgXCJzb3J0VmFsdWVcIjogMTQ0NTE4MDQwMDAwMCxcbiAgICAgICAgICAgICAgICAgICAgICAgIFwidmFsdWVcIjogXCIxOC4xMC4yMDE5XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBcInNob3J0VmFsdWVcIjogXCIxOC4xMC5cIixcbiAgICAgICAgICAgICAgICAgICAgICAgIFwibG9uZ1ZhbHVlXCI6IFwiMTguIE9rdG9iZXIgMjAxNVwiXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIFwic2NoZWR1bGVkVGltZVwiOiBcIjE3OjAwXCIsXG4gICAgICAgICAgICAgICAgICAgIFwiYXdheVRlYW1JZFwiOiA3MjgsXG4gICAgICAgICAgICAgICAgICAgIFwiYXdheVRlYW1Mb25nTmFtZVwiOiBcIkVIQyBNZWdhZml0IEljZSBUaWdlcnMgRG9ybmJpcm5cIixcbiAgICAgICAgICAgICAgICAgICAgXCJhd2F5VGVhbVNob3J0TmFtZVwiOiBcIklURFwiLFxuICAgICAgICAgICAgICAgICAgICBcImF3YXlUZWFtRmxhdm91cm5hbWVcIjogXCJFSEMgTWVnYWZpdCBJY2UgVGlnZXJzIERvcm5iaXJuXCIsXG4gICAgICAgICAgICAgICAgICAgIFwiaG9tZVRlYW1JZFwiOiA3MzEsXG4gICAgICAgICAgICAgICAgICAgIFwiaG9tZVRlYW1Mb25nTmFtZVwiOiBcIlNDIEhvaGVuZW1zIDJcIixcbiAgICAgICAgICAgICAgICAgICAgXCJob21lVGVhbVNob3J0TmFtZVwiOiBcIkhPMlwiLFxuICAgICAgICAgICAgICAgICAgICBcImhvbWVUZWFtRmxhdm91cm5hbWVcIjogXCJTQyBIb2hlbmVtcyAyXCIsXG4gICAgICAgICAgICAgICAgICAgIFwiaG9tZVRlYW1TY29yZVwiOiBudWxsLFxuICAgICAgICAgICAgICAgICAgICBcImF3YXlUZWFtU2NvcmVcIjogbnVsbFxuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIGRlZmVyLnJlc29sdmUocmVzcG9uc2UpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXF1ZXN0LmVycm9yKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGRlZmVyLnJlamVjdCh7XG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJvd3M6IFtdXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICByZXR1cm4gZGVmZXIucHJvbWlzZSgpO1xuXG4gICAgICAgIH0sXG4gICAgICAgIGdldFN0YW5kaW5nczogZnVuY3Rpb24oZGl2aXNpb25JZCkge1xuICAgICAgICAgICAgdXJsUGFyYW1zLmRpdmlzaW9uSWQgPSBkaXZpc2lvbklkO1xuICAgICAgICAgICAgdmFyIHBhcmFtcyA9ICQucGFyYW0odXJsUGFyYW1zKTtcbiAgICAgICAgICAgIHZhciB1cmwgPSBiYXNlVXJsICsgc3RhbmRpbmdzVXJsICsgJz8nICsgcGFyYW1zO1xuXG4gICAgICAgICAgICByZXR1cm4gJC5hamF4KHtcbiAgICAgICAgICAgICAgICB1cmw6IHVybCxcbiAgICAgICAgICAgICAgICBkYXRhVHlwZTogXCJqc29ucFwiXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbn07XG59KShqUXVlcnkpO1xuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
