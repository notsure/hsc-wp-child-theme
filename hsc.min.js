!function(e){"use strict";var a=jQuery.fn.addClass;jQuery.fn.addClass=function(){var e=a.apply(this,arguments);return jQuery("#main-header").removeClass("et-fixed-header"),e},e("#main-header").removeClass("et-fixed-header")}(jQuery),function(e){"use strict";function a(){var a="/wp-content/themes/hsc-theme/images/teams",t="136",n="halbfinale",s=function(e){var t='<table class="hsc-knockout-overview"><tr>  <td class="image">    <img src="'+a+'/{{ teams[0].id }}.png" />  </td>  <td class="meta">    <span class="score">{{ teams[0].gamesWon }} : {{ teams[1].gamesWon }}</span><br/>    <span class="bestof">Best of: {{ bestOf }}</span>  </td>  <td class="image">    <img src="'+a+'/{{ teams[1].id }}.png" />  </td></tr></table>';return(t=_.template(t))(e)},i=function(e){var a='<tr>  <td class="date" colspan="2">    {{ scheduledDate.value }} - {{ scheduledTime }}  </td></tr><tr>  <td class="team">{{ homeTeamLongName }} <br/> {{ awayTeamLongName }}</td>  <td class="score">{{ homeTeamScore }} : {{ awayTeamScore }}</td></tr>';return(a=_.template(a))(e)},d=function(a,t){var n='<div class="hsc-knockout">',s=c(t);n+=s,n+="</div>",n=e(n),a.append(n),n.fadeIn()},c=function(e){return o("halbfinale"===n.toLowerCase()?e.phases[0]:e.phases[1])},o=function(e){var a="";return _.each(e.encounters,function(e,t){a+=r(e)}),a},r=function(e){var a="",t={teams:e.teams,bestOf:e.bestOf};return a+='<div class="hsc-knockout-game">',a+=s(t),a+='<table class="hsc-knockout-list">',a+=l(e.games),a+="</table>",a+="</div>"},l=function(e){var a="";return _.each(e,function(e,t){a+=i(e)}),a};return{init:function(e){var a=new HockeyDataService;t=e.data("division"),n=e.data("type"),a.getKnockout(t).then(function(a){d(e,a.data)},function(e){console.log("error",e)})}}}e(document).ready(function(){_.templateSettings={interpolate:/\{\{(.+?)\}\}/g},e(".js-hsc-knockout").each(function(){var t=new a;t.init(e(this))})})}(jQuery),function(e){function a(){var a=e("#et-main-area"),t=e(".mobile_menu_bar_toggle");t.on("click",function(t){e(t.currentTarget).hasClass("opened")?(a.show(),e(t.currentTarget).removeClass("opened")):(a.hide(),e(t.currentTarget).addClass("opened"))})}e(window).load(function(){a()})}(jQuery),function(e){"use strict";var a=function(){var a="/wp-content/themes/hsc-theme/images/teams",t="136",n="731",s=function(){return'<div class="no-games">Keine Spiele zur Zeit.</div>'},i=function(){return'<div class="hsc-game-schedule-list-item">  <div class="schedule">    <div class="date">{{ scheduledDate.value }}</div>    <div class="time">- {{ scheduledTime }}</div>  </div>  <div class="game">  <div class="teams">    <div class="team team-home">      <div class="teamlogo"><img src="'+a+'/{{ homeTeamId }}.png" /></div>      <div class="teamname">{{ homeTeamLongName }}</div>    </div>    <div class="divider"></div>    <div class="team team-away">      <div class="teamlogo"><img src="'+a+'/{{ awayTeamId }}.png" /></div>      <div class="teamname">{{ awayTeamLongName }}</div>    </div>  </div>  <div class="scores">      {{ homeTeamScore === null ? "-": homeTeamScore }}      : {{ awayTeamScore === null ? "-": awayTeamScore }}  </div>  </div></div>'},d=function(a,t){var n=e('<div class="hsc-game-schedule-list"></div>');a.append(n),c(t.rows,n)},c=function(a,t){var d=_.template(i()),c="",o=1;return 0===a.length?(d=e(s()),t.append(d),d.hide().delay(o*key).fadeIn(),!0):(_.each(a,function(a,s){(a.homeTeamId===n||a.awayTeamId===n)&&(c=e(d(a)),t.append(c),c.hide().delay(o*s).fadeIn())}),!0)};return{init:function(e){var a=new HockeyDataService;t=e.data("division"),n=e.data("team"),a.getSchedule(t).then(function(a){d(e,a.data)},function(e){console.log("error",e)})}}};e(document).ready(function(){_.templateSettings={interpolate:/\{\{(.+?)\}\}/g},e(".js-widget-schedule").each(function(){var t=new a;t.init(e(this))})})}(jQuery),function(e){"use strict";var a=function(){var a="/wp-content/themes/hsc-theme/images/teams",t="136",n="731",s="last",i=function(){return'<div class="no-games">Keine Spiele zur Zeit.</div>'},d=function(){var e="last-game-widget";return"next"===s&&(e="next-game-widget"),'<div class="hsc-game-schedule-widget '+e+'"><div class="schedule-widget-holder">  <div class="image image-home-team">    <img src="'+a+'/{{ homeTeamId }}.png" />  </div>  <div class="meta">    <div class="date">{{ scheduledDate.value }}</div>    <div class="time">{{ scheduledTime }}</div>    <div class="scores">{{ homeTeamScore }}:{{ awayTeamScore }}</div>  </div>  <div class="image image-away-team">    <img src="'+a+'/{{ awayTeamId }}.png" />  </div></div>  <div class="teams">    <span class="team home-team">{{ homeTeamLongName }}</span>    <span class="divider">-</span>    <span class="team away-team">{{ awayTeamLongName }}</span>  </div></div>'},c=function(a,t){var n=e('<div class="js-schedule-widget"></div>');a.append(n),o(t.rows,n)},o=function(a,t){var c="",o=_.template(d()),r=moment(),l=!1;if("last"===s){a=_.chain(a).reverse()._wrapped;var m=_.find(a,function(e){if((e.homeTeamId===n||e.awayTeamId===n)&&e.scheduledDate&&e.scheduledDate.value&&null!==e.homeTeamScore&&null!==e.awayTeamScore){var a=moment(e.scheduledDate.value,"DD.MM.YYYY");if(a.isBefore(r))return e}});m&&(l=!0,c+=o(m))}if("next"===s){var u=_.find(a,function(e){if((e.homeTeamId===n||e.awayTeamId===n)&&e.scheduledDate&&e.scheduledDate.value&&null===e.homeTeamScore&&null===e.awayTeamScore){var a=moment(e.scheduledDate.value,"DD.MM.YYYY");if(a.isSameOrAfter(r))return e}});u&&(l=!0,c+=o(u))}return l?(c=e(c),t.append(c),c.hide().delay("slow").fadeIn(),!0):(o=e(i()),t.append(o),o.hide().delay("slow").fadeIn(),!0)};return{init:function(e){var a=new HockeyDataService;t=e.data("division"),n=e.data("team"),s=e.data("type");a.getSchedule(t).then(function(a){c(e,a.data)},function(e){console.log("error",e)})}}};e(document).ready(function(){_.templateSettings={interpolate:/\{\{(.+?)\}\}/g},e(".js-widget-schedule-single").each(function(){var t=new a;t.init(e(this))})})}(jQuery),function(e){"use strict";function a(){var a="/wp-content/themes/hsc-theme/images/teams",t="136",n=function(){return'<tr class="hsc-standings-header"><td class="rank">#</td><td class="image"></td><td class="team">Team</td><td class="info td-gp">Sp</td><td class="info td-w">S</td><td class="info td-l">N</td><td class="info td-otw">OTS</td><td class="info td-otl">OTN</td><td class="info td-goals">Tore</td><td class="info td-gd">TD</td><td class="info td-pts">PKT</td></tr>'},s=function(){return'<tr class="hsc-standings-row"><td class="rank">{{ tableRank }}</td><td class="image"><img src="'+a+'/{{ id }}.png" /></td><td class="team">{{ teamLongname }}</td><td class="info td-gp">{{ gamesPlayed }}</td><td class="info td-w">{{ gamesWon }}</td><td class="info td-l">{{ gamesLost }}</td><td class="info td-otw">{{ gamesWonInOt }}</td><td class="info td-otl">{{ gamesLostInOt }}</td><td class="info td-goals">{{ goalsFor }}:{{ goalsAgainst }}</td><td class="info td-gd">{{ goalDifference }}</td><td class="info td-pts">{{ points }}</td></tr>'},i=function(a,t){var s='<table class="hsc-table hsc-standings">',i=d(t.rows);s+=n(),s+=i,s+="</table>",s=e(s),a.append(s),s.fadeIn()},d=function(e){var a="",t=_.template(s());return _.each(e,function(e,n){a+=t(e)}),a};return{init:function(e){var a=new HockeyDataService;t=e.data("division"),a.getStandings(t).then(function(a){i(e,a.data)},function(e){console.log("error",e)})}}}e(document).ready(function(){_.templateSettings={interpolate:/\{\{(.+?)\}\}/g},e(".js-widget-standings").each(function(){var t=new a;t.init(e(this))})})}(jQuery),function(e){window.HockeyDataService=function(){"use strict";var a="http://api.hockeydata.net/data/ebel",t="/Schedule",n="/Standings",s="/KnockoutStage",i={apiKey:"e52b5722cbc89c3e51ee0cd6e2485a81",divisionId:"136",league:"ebel",sport:"icehockey",referer:"www.h-sc.at"};return{getSchedule:function(n){var s=e.Deferred();i.divisionId=n;var d=e.param(i),c=a+t+"?"+d,o=e.ajax({url:c,dataType:"jsonp",async:!1});return o.success(function(e){return s.resolve(e)}),o.error(function(e){return s.reject({data:{rows:[]}})}),s.promise()},getStandings:function(t){i.divisionId=t;var s=e.param(i),d=a+n+"?"+s;return e.ajax({url:d,dataType:"jsonp"})},getKnockout:function(t){i.divisionId=t;var n=e.param(i),d=a+s+"?"+n;return e.ajax({url:d,dataType:"jsonp"})}}}}(jQuery);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbXBvbmVudHMvZml4ZXMuanMiLCJjb21wb25lbnRzL2tub2Nrb3V0LmpzIiwiY29tcG9uZW50cy9tb2JpbGUtbWVudS5qcyIsImNvbXBvbmVudHMvc2NoZWR1bGUtbGlzdC5qcyIsImNvbXBvbmVudHMvc2NoZWR1bGUtd2lkZ2V0LmpzIiwiY29tcG9uZW50cy9zdGFuZGluZ3MuanMiLCJzZXJ2aWNlcy9ob2NrZXlkYXRhLXNlcnZpY2UuanMiXSwibmFtZXMiOlsiJCIsImFkZGNsYXNzIiwialF1ZXJ5IiwiZm4iLCJhZGRDbGFzcyIsInJlc3VsdCIsImFwcGx5IiwidGhpcyIsImFyZ3VtZW50cyIsInJlbW92ZUNsYXNzIiwiSHNjS25vY2tvdXQiLCJsb2dvQmFzZVVybCIsImRpdmlzaW9uSWQiLCJ0eXBlIiwicmV0cmlldmVFbmNvdW50ZXJPdmVydmlld1RlbXBsYXRlIiwiZGF0YSIsInRlbXBsYXRlIiwiXyIsInJldHJpZXZlRW5jb3VudGVyR2FtZVRlbXBsYXRlIiwiZ2FtZSIsImJ1aWxkV2lkZ2V0IiwiJGVsZW0iLCJvdXRwdXQiLCJwaGFzZXMiLCJidWlsZEtub2Nrb3V0UGhhc2VzIiwiYXBwZW5kIiwiZmFkZUluIiwicmV0cmlldmVLbm9ja291dFBoYXNlIiwidG9Mb3dlckNhc2UiLCJwaGFzZSIsImVhY2giLCJlbmNvdW50ZXJzIiwiZW5jb3VudGVyIiwia2V5IiwicmV0cmlldmVFbmNvdW50ZXIiLCJvdmVydmlld0RhdGEiLCJ0ZWFtcyIsImJlc3RPZiIsInJldHJpZXZlRW5jb3VudGVyR2FtZXMiLCJnYW1lcyIsImluaXQiLCJzZXJ2aWNlIiwiSG9ja2V5RGF0YVNlcnZpY2UiLCJnZXRLbm9ja291dCIsInRoZW4iLCJyZXNwb25zZSIsImNvbnNvbGUiLCJsb2ciLCJkb2N1bWVudCIsInJlYWR5IiwidGVtcGxhdGVTZXR0aW5ncyIsImludGVycG9sYXRlIiwid2lkZ2V0IiwiaW5pdE1vYmlsZU1lbnUiLCIkbWFpbkFyZWEiLCIkbWVudUJ1dHRvbiIsIm9uIiwiZXZlbnQiLCJjdXJyZW50VGFyZ2V0IiwiaGFzQ2xhc3MiLCJzaG93IiwiaGlkZSIsIndpbmRvdyIsImxvYWQiLCJIb2NrZXlEYXRhV2lkZ2V0c1NjaGVkdWxlIiwidGVhbUlkIiwicmV0cmlldmVFbXB0eVRlbXBsYXRlIiwicmV0cmlldmVSb3dUZW1wbGF0ZSIsImxpc3RIb2xkZXIiLCJidWlsZFJvd3MiLCJyb3dzIiwiZWxlbWVudCIsInJvdyIsImRlbGF5IiwibGVuZ3RoIiwidmFsdWUiLCJob21lVGVhbUlkIiwiYXdheVRlYW1JZCIsImdldFNjaGVkdWxlIiwic2NoZWR1bGVzIiwiSG9ja2V5RGF0YVdpZGdldHNTY2hlZHVsZVNpbmdsZSIsImNsYXNzTmFtZSIsImhvbGRlciIsInRvZGF5IiwibW9tZW50IiwiZm91bmQiLCJjaGFpbiIsInJldmVyc2UiLCJfd3JhcHBlZCIsImxhc3RHYW1lIiwiZmluZCIsInNjaGVkdWxlZERhdGUiLCJob21lVGVhbVNjb3JlIiwiYXdheVRlYW1TY29yZSIsImdhbWVEYXRlIiwiaXNCZWZvcmUiLCJuZXh0R2FtZSIsImlzU2FtZU9yQWZ0ZXIiLCJzY2hlZHVsZXNTaW5nbGUiLCJIb2NrZXlEYXRhV2lkZ2V0c1N0YW5kaW5ncyIsInJldHJpZXZlSGVhZGVyVGVtcGxhdGUiLCJnZXRTdGFuZGluZ3MiLCJzdGFuZGluZ3MiLCJiYXNlVXJsIiwic2NoZWR1bGVVcmwiLCJzdGFuZGluZ3NVcmwiLCJrbm9ja291dFVybCIsInVybFBhcmFtcyIsImFwaUtleSIsImxlYWd1ZSIsInNwb3J0IiwicmVmZXJlciIsImRlZmVyIiwiRGVmZXJyZWQiLCJwYXJhbXMiLCJwYXJhbSIsInVybCIsInJlcXVlc3QiLCJhamF4IiwiZGF0YVR5cGUiLCJhc3luYyIsInN1Y2Nlc3MiLCJyZXNvbHZlIiwiZXJyb3IiLCJyZWplY3QiLCJwcm9taXNlIl0sIm1hcHBpbmdzIjoiQ0FBQSxTQUFBQSxHQUNBLFlBS0EsSUFBQUMsR0FBQUMsT0FBQUMsR0FBQUMsUUFDQUYsUUFBQUMs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SUFBQUEsRUFDQUcsU0FBQSxjQUtBckgiLCJmaWxlIjoiaHNjLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbigkKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgICAvLyBTdG9wIGRpdmkgaGVhZGVyIGZyb20gc2hyaW5raW5nLlxuICAgIC8vIGh0dHBzOi8vZGl2aWJvb3N0ZXIuY29tL3N0b3AtdGhlLWRpdmktaGVhZGVyLWZyb20tc2hyaW5raW5nLW9uLXNjcm9sbC9cbiAgICAvLyBPdmVycmlkZSB0aGUgYWRkQ2xhc3MgdG8gcHJldmVudCBmaXhlZCBoZWFkZXIgY2xhc3MgZnJvbSBiZWluZyBhZGRlZFxuICAgIHZhciBhZGRjbGFzcyA9IGpRdWVyeS5mbi5hZGRDbGFzcztcbiAgICBqUXVlcnkuZm4uYWRkQ2xhc3MgPSBmdW5jdGlvbigpe1xuICAgICAgICB2YXIgcmVzdWx0ID0gYWRkY2xhc3MuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgICAgalF1ZXJ5KCcjbWFpbi1oZWFkZXInKS5yZW1vdmVDbGFzcygnZXQtZml4ZWQtaGVhZGVyJyk7XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgJCgnI21haW4taGVhZGVyJykucmVtb3ZlQ2xhc3MoJ2V0LWZpeGVkLWhlYWRlcicpO1xuXG59KShqUXVlcnkpO1xuIiwiKGZ1bmN0aW9uKCQpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcblxuICAgIGZ1bmN0aW9uIEhzY0tub2Nrb3V0KCkge1xuICAgICAgICB2YXIgbG9nb0Jhc2VVcmwgPSAnL3dwLWNvbnRlbnQvdGhlbWVzL2hzYy10aGVtZS9pbWFnZXMvdGVhbXMnO1xuICAgICAgICB2YXIgZGl2aXNpb25JZCA9ICcxMzYnO1xuICAgICAgICB2YXIgdGVhbUlkID0gJzczMSc7XG4gICAgICAgIHZhciB0eXBlID0gJ2hhbGJmaW5hbGUnO1xuXG4gICAgICAgIHZhciByZXRyaWV2ZUVuY291bnRlck92ZXJ2aWV3VGVtcGxhdGUgPSBmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICB2YXIgdGVtcGxhdGUgPSAnPHRhYmxlIGNsYXNzPVwiaHNjLWtub2Nrb3V0LW92ZXJ2aWV3XCI+J1xuICAgICAgICAgICAgICAgICsgJzx0cj4nXG4gICAgICAgICAgICAgICAgKyAnICA8dGQgY2xhc3M9XCJpbWFnZVwiPidcbiAgICAgICAgICAgICAgICArICcgICAgPGltZyBzcmM9XCInICsgbG9nb0Jhc2VVcmwgKyAnL3t7IHRlYW1zWzBdLmlkIH19LnBuZ1wiIC8+J1xuICAgICAgICAgICAgICAgICsgJyAgPC90ZD4nXG4gICAgICAgICAgICAgICAgKyAnICA8dGQgY2xhc3M9XCJtZXRhXCI+J1xuICAgICAgICAgICAgICAgICsgJyAgICA8c3BhbiBjbGFzcz1cInNjb3JlXCI+e3sgdGVhbXNbMF0uZ2FtZXNXb24gfX0gOiB7eyB0ZWFtc1sxXS5nYW1lc1dvbiB9fTwvc3Bhbj48YnIvPidcbiAgICAgICAgICAgICAgICArICcgICAgPHNwYW4gY2xhc3M9XCJiZXN0b2ZcIj5CZXN0IG9mOiB7eyBiZXN0T2YgfX08L3NwYW4+J1xuICAgICAgICAgICAgICAgICsgJyAgPC90ZD4nXG4gICAgICAgICAgICAgICAgKyAnICA8dGQgY2xhc3M9XCJpbWFnZVwiPidcbiAgICAgICAgICAgICAgICArICcgICAgPGltZyBzcmM9XCInICsgbG9nb0Jhc2VVcmwgKyAnL3t7IHRlYW1zWzFdLmlkIH19LnBuZ1wiIC8+J1xuICAgICAgICAgICAgICAgICsgJyAgPC90ZD4nXG4gICAgICAgICAgICAgICAgKyAnPC90cj4nXG4gICAgICAgICAgICAgICAgKyAnPC90YWJsZT4nO1xuICAgICAgICAgICAgdGVtcGxhdGUgPSBfLnRlbXBsYXRlKHRlbXBsYXRlKTtcblxuICAgICAgICAgICAgcmV0dXJuIHRlbXBsYXRlKGRhdGEpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHZhciByZXRyaWV2ZUVuY291bnRlckdhbWVUZW1wbGF0ZSA9IGZ1bmN0aW9uKGdhbWUpIHtcbiAgICAgICAgICAgIHZhciB0ZW1wbGF0ZSA9ICc8dHI+J1xuICAgICAgICAgICAgICAgICsgJyAgPHRkIGNsYXNzPVwiZGF0ZVwiIGNvbHNwYW49XCIyXCI+J1xuICAgICAgICAgICAgICAgICsgJyAgICB7eyBzY2hlZHVsZWREYXRlLnZhbHVlIH19IC0ge3sgc2NoZWR1bGVkVGltZSB9fSdcbiAgICAgICAgICAgICAgICArICcgIDwvdGQ+J1xuICAgICAgICAgICAgICAgICsgJzwvdHI+PHRyPidcbiAgICAgICAgICAgICAgICArICcgIDx0ZCBjbGFzcz1cInRlYW1cIj57eyBob21lVGVhbUxvbmdOYW1lIH19IDxici8+IHt7IGF3YXlUZWFtTG9uZ05hbWUgfX08L3RkPidcbiAgICAgICAgICAgICAgICArICcgIDx0ZCBjbGFzcz1cInNjb3JlXCI+e3sgaG9tZVRlYW1TY29yZSB9fSA6IHt7IGF3YXlUZWFtU2NvcmUgfX08L3RkPidcbiAgICAgICAgICAgICAgICArICc8L3RyPic7XG4gICAgICAgICAgICB0ZW1wbGF0ZSA9IF8udGVtcGxhdGUodGVtcGxhdGUpO1xuXG4gICAgICAgICAgICByZXR1cm4gdGVtcGxhdGUoZ2FtZSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgdmFyIGJ1aWxkV2lkZ2V0ID0gZnVuY3Rpb24oJGVsZW0sIGRhdGEpIHtcbiAgICAgICAgICAgIHZhciBvdXRwdXQgPSAnPGRpdiBjbGFzcz1cImhzYy1rbm9ja291dFwiPic7XG4gICAgICAgICAgICB2YXIgcGhhc2VzID0gYnVpbGRLbm9ja291dFBoYXNlcyhkYXRhKTtcbiAgICAgICAgICAgIG91dHB1dCArPSBwaGFzZXM7XG4gICAgICAgICAgICBvdXRwdXQgKz0gJzwvZGl2Pic7XG5cbiAgICAgICAgICAgIG91dHB1dCA9ICQob3V0cHV0KTtcbiAgICAgICAgICAgICRlbGVtLmFwcGVuZChvdXRwdXQpO1xuICAgICAgICAgICAgb3V0cHV0LmZhZGVJbigpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHZhciBidWlsZEtub2Nrb3V0UGhhc2VzID0gZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgaWYgKHR5cGUudG9Mb3dlckNhc2UoKSA9PT0gJ2hhbGJmaW5hbGUnKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJldHJpZXZlS25vY2tvdXRQaGFzZShkYXRhLnBoYXNlc1swXSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiByZXRyaWV2ZUtub2Nrb3V0UGhhc2UoZGF0YS5waGFzZXNbMV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIHZhciByZXRyaWV2ZUtub2Nrb3V0UGhhc2UgPSBmdW5jdGlvbihwaGFzZSkge1xuICAgICAgICAgICAgdmFyIG91dHB1dCA9ICcnO1xuICAgICAgICAgICAgXy5lYWNoKHBoYXNlLmVuY291bnRlcnMsIGZ1bmN0aW9uKGVuY291bnRlciwga2V5KSB7XG4gICAgICAgICAgICAgICAgb3V0cHV0ICs9IHJldHJpZXZlRW5jb3VudGVyKGVuY291bnRlcik7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgcmV0dXJuIG91dHB1dDtcbiAgICAgICAgfTtcblxuICAgICAgICB2YXIgcmV0cmlldmVFbmNvdW50ZXIgPSBmdW5jdGlvbihlbmNvdW50ZXIpIHtcbiAgICAgICAgICAgIHZhciBvdXRwdXQgPSAnJztcbiAgICAgICAgICAgIHZhciBvdmVydmlld0RhdGEgPSB7XG4gICAgICAgICAgICAgICAgdGVhbXM6IGVuY291bnRlci50ZWFtcyxcbiAgICAgICAgICAgICAgICBiZXN0T2Y6IGVuY291bnRlci5iZXN0T2ZcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIG91dHB1dCArPSAnPGRpdiBjbGFzcz1cImhzYy1rbm9ja291dC1nYW1lXCI+JztcbiAgICAgICAgICAgIG91dHB1dCArPSByZXRyaWV2ZUVuY291bnRlck92ZXJ2aWV3VGVtcGxhdGUob3ZlcnZpZXdEYXRhKTtcblxuICAgICAgICAgICAgb3V0cHV0ICs9ICc8dGFibGUgY2xhc3M9XCJoc2Mta25vY2tvdXQtbGlzdFwiPic7XG4gICAgICAgICAgICBvdXRwdXQgKz0gcmV0cmlldmVFbmNvdW50ZXJHYW1lcyhlbmNvdW50ZXIuZ2FtZXMpO1xuICAgICAgICAgICAgb3V0cHV0ICs9ICc8L3RhYmxlPic7XG4gICAgICAgICAgICBvdXRwdXQgKz0gJzwvZGl2Pic7XG5cbiAgICAgICAgICAgIHJldHVybiBvdXRwdXQ7XG4gICAgICAgIH07XG5cbiAgICAgICAgdmFyIHJldHJpZXZlRW5jb3VudGVyR2FtZXMgPSBmdW5jdGlvbihnYW1lcykge1xuICAgICAgICAgICAgdmFyIG91dHB1dCA9ICcnO1xuXG4gICAgICAgICAgICBfLmVhY2goZ2FtZXMsIGZ1bmN0aW9uKGdhbWUsIGtleSkge1xuICAgICAgICAgICAgICAgIG91dHB1dCArPSByZXRyaWV2ZUVuY291bnRlckdhbWVUZW1wbGF0ZShnYW1lKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICByZXR1cm4gb3V0cHV0O1xuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBpbml0OiBmdW5jdGlvbigkZWxlbSkge1xuICAgICAgICAgICAgICAgIHZhciBzZXJ2aWNlID0gbmV3IEhvY2tleURhdGFTZXJ2aWNlO1xuICAgICAgICAgICAgICAgIGRpdmlzaW9uSWQgPSAkZWxlbS5kYXRhKCdkaXZpc2lvbicpO1xuICAgICAgICAgICAgICAgIHR5cGUgPSAkZWxlbS5kYXRhKCd0eXBlJyk7XG5cbiAgICAgICAgICAgICAgICBzZXJ2aWNlLmdldEtub2Nrb3V0KGRpdmlzaW9uSWQpLnRoZW4oXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBidWlsZFdpZGdldCgkZWxlbSwgcmVzcG9uc2UuZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnZXJyb3InLCByZXNwb25zZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcblxuICAgICQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCkge1xuICAgICAgICBfLnRlbXBsYXRlU2V0dGluZ3MgPSB7XG4gICAgICAgICAgICBpbnRlcnBvbGF0ZTogL1xce1xceyguKz8pXFx9XFx9L2dcbiAgICAgICAgfTtcblxuICAgICAgICAkKCcuanMtaHNjLWtub2Nrb3V0JykuZWFjaChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciB3aWRnZXQgPSBuZXcgSHNjS25vY2tvdXQ7XG4gICAgICAgICAgICB3aWRnZXQuaW5pdCgkKHRoaXMpKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG59KShqUXVlcnkpO1xuIiwiKGZ1bmN0aW9uKCQpIHtcbiAgICAvLyBmdW5jdGlvbiBzZXR1cF9jb2xsYXBzaWJsZV9zdWJtZW51cygpIHtcbiAgICAvLyAgICAgdmFyICRtZW51ID0gJCgnI21vYmlsZV9tZW51Jyk7XG4gICAgLy8gICAgIHZhciB0b3BfbGV2ZWxfbGluayA9ICcjbW9iaWxlX21lbnUgLm1lbnUtaXRlbS1oYXMtY2hpbGRyZW4gPiBhJztcblxuICAgIC8vICAgICAkbWVudS5maW5kKCdhJykuZWFjaChmdW5jdGlvbigpIHtcbiAgICAvLyAgICAgICAgICQodGhpcykub2ZmKCdjbGljaycpO1xuXG4gICAgLy8gICAgICAgICBpZiAoJCh0aGlzKS5pcyh0b3BfbGV2ZWxfbGluaykpIHtcbiAgICAvLyAgICAgICAgICAgICAkKHRoaXMpLmF0dHIoJ2hyZWYnLCAnIycpO1xuICAgIC8vICAgICAgICAgfVxuXG4gICAgLy8gICAgICAgICBpZiAoISQodGhpcykuc2libGluZ3MoJy5zdWItbWVudScpLmxlbmd0aCkge1xuICAgIC8vICAgICAgICAgICAgICQodGhpcykub24oJ2NsaWNrJywgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAvLyAgICAgICAgICAgICAgICAgJCh0aGlzKS5wYXJlbnRzKCcubW9iaWxlX25hdicpLnRyaWdnZXIoJ2NsaWNrJyk7XG4gICAgLy8gICAgICAgICAgICAgfSk7XG4gICAgLy8gICAgICAgICB9IGVsc2Uge1xuICAgIC8vICAgICAgICAgICAgICQodGhpcykub24oJ2NsaWNrJywgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAvLyAgICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAvLyAgICAgICAgICAgICAgICAgJCh0aGlzKS5wYXJlbnQoKS50b2dnbGVDbGFzcygndmlzaWJsZScpO1xuICAgIC8vICAgICAgICAgICAgIH0pO1xuICAgIC8vICAgICAgICAgfVxuICAgIC8vICAgICB9KTtcbiAgICAvLyB9XG5cbiAgICBmdW5jdGlvbiBpbml0TW9iaWxlTWVudSgpIHtcbiAgICAgICAgdmFyICRtYWluQXJlYSA9ICQoJyNldC1tYWluLWFyZWEnKTtcbiAgICAgICAgdmFyICRtZW51QnV0dG9uID0gJCgnLm1vYmlsZV9tZW51X2Jhcl90b2dnbGUnKTtcblxuICAgICAgICAkbWVudUJ1dHRvbi5vbignY2xpY2snLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgICAgICAgaWYgKCQoZXZlbnQuY3VycmVudFRhcmdldCkuaGFzQ2xhc3MoJ29wZW5lZCcpKSB7XG4gICAgICAgICAgICAgICAgJG1haW5BcmVhLnNob3coKTtcbiAgICAgICAgICAgICAgICAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpLnJlbW92ZUNsYXNzKCdvcGVuZWQnKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgJG1haW5BcmVhLmhpZGUoKTtcbiAgICAgICAgICAgICAgICAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpLmFkZENsYXNzKCdvcGVuZWQnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgJCh3aW5kb3cpLmxvYWQoZnVuY3Rpb24oKSB7XG4gICAgICAgIC8vIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgIC8vICAgICBzZXR1cF9jb2xsYXBzaWJsZV9zdWJtZW51cygpO1xuICAgICAgICAvLyB9LCA3MDApO1xuXG4gICAgICAgIGluaXRNb2JpbGVNZW51KCk7XG4gICAgfSk7XG59KShqUXVlcnkpO1xuXG4iLCIoZnVuY3Rpb24oJCkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuXG4gICAgdmFyIEhvY2tleURhdGFXaWRnZXRzU2NoZWR1bGUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGxvZ29CYXNlVXJsID0gJy93cC1jb250ZW50L3RoZW1lcy9oc2MtdGhlbWUvaW1hZ2VzL3RlYW1zJztcbiAgICAgICAgdmFyIGRpdmlzaW9uSWQgPSAnMTM2JztcbiAgICAgICAgdmFyIHRlYW1JZCA9ICc3MzEnO1xuXG4gICAgICAgIHZhciByZXRyaWV2ZUVtcHR5VGVtcGxhdGUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiAnPGRpdiBjbGFzcz1cIm5vLWdhbWVzXCI+J1xuICAgICAgICAgICAgICAgICsgJ0tlaW5lIFNwaWVsZSB6dXIgWmVpdC4nXG4gICAgICAgICAgICAgICAgKyAnPC9kaXY+JztcbiAgICAgICAgfTtcblxuICAgICAgICB2YXIgcmV0cmlldmVSb3dUZW1wbGF0ZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuICc8ZGl2IGNsYXNzPVwiaHNjLWdhbWUtc2NoZWR1bGUtbGlzdC1pdGVtXCI+J1xuICAgICAgICAgICAgICAgICsgJyAgPGRpdiBjbGFzcz1cInNjaGVkdWxlXCI+J1xuICAgICAgICAgICAgICAgICsgJyAgICA8ZGl2IGNsYXNzPVwiZGF0ZVwiPnt7IHNjaGVkdWxlZERhdGUudmFsdWUgfX08L2Rpdj4nXG4gICAgICAgICAgICAgICAgKyAnICAgIDxkaXYgY2xhc3M9XCJ0aW1lXCI+LSB7eyBzY2hlZHVsZWRUaW1lIH19PC9kaXY+J1xuICAgICAgICAgICAgICAgICsgJyAgPC9kaXY+J1xuICAgICAgICAgICAgICAgICsgJyAgPGRpdiBjbGFzcz1cImdhbWVcIj4nXG4gICAgICAgICAgICAgICAgKyAnICA8ZGl2IGNsYXNzPVwidGVhbXNcIj4nXG4gICAgICAgICAgICAgICAgKyAnICAgIDxkaXYgY2xhc3M9XCJ0ZWFtIHRlYW0taG9tZVwiPidcbiAgICAgICAgICAgICAgICArICcgICAgICA8ZGl2IGNsYXNzPVwidGVhbWxvZ29cIj48aW1nIHNyYz1cIicgKyBsb2dvQmFzZVVybCArICcve3sgaG9tZVRlYW1JZCB9fS5wbmdcIiAvPjwvZGl2PidcbiAgICAgICAgICAgICAgICArICcgICAgICA8ZGl2IGNsYXNzPVwidGVhbW5hbWVcIj57eyBob21lVGVhbUxvbmdOYW1lIH19PC9kaXY+J1xuICAgICAgICAgICAgICAgICsgJyAgICA8L2Rpdj4nXG4gICAgICAgICAgICAgICAgKyAnICAgIDxkaXYgY2xhc3M9XCJkaXZpZGVyXCI+PC9kaXY+J1xuICAgICAgICAgICAgICAgICsgJyAgICA8ZGl2IGNsYXNzPVwidGVhbSB0ZWFtLWF3YXlcIj4nXG4gICAgICAgICAgICAgICAgKyAnICAgICAgPGRpdiBjbGFzcz1cInRlYW1sb2dvXCI+PGltZyBzcmM9XCInICsgbG9nb0Jhc2VVcmwgKyAnL3t7IGF3YXlUZWFtSWQgfX0ucG5nXCIgLz48L2Rpdj4nXG4gICAgICAgICAgICAgICAgKyAnICAgICAgPGRpdiBjbGFzcz1cInRlYW1uYW1lXCI+e3sgYXdheVRlYW1Mb25nTmFtZSB9fTwvZGl2PidcbiAgICAgICAgICAgICAgICArICcgICAgPC9kaXY+J1xuICAgICAgICAgICAgICAgICsgJyAgPC9kaXY+J1xuICAgICAgICAgICAgICAgICsgJyAgPGRpdiBjbGFzcz1cInNjb3Jlc1wiPidcbiAgICAgICAgICAgICAgICArICcgICAgICB7eyBob21lVGVhbVNjb3JlID09PSBudWxsID8gXCItXCI6IGhvbWVUZWFtU2NvcmUgfX0nXG4gICAgICAgICAgICAgICAgKyAnICAgICAgOiB7eyBhd2F5VGVhbVNjb3JlID09PSBudWxsID8gXCItXCI6IGF3YXlUZWFtU2NvcmUgfX0nXG4gICAgICAgICAgICAgICAgKyAnICA8L2Rpdj4nXG4gICAgICAgICAgICAgICAgKyAnICA8L2Rpdj4nXG4gICAgICAgICAgICAgICAgKyAnPC9kaXY+JztcbiAgICAgICAgfTtcblxuICAgICAgICB2YXIgYnVpbGRXaWRnZXQgPSBmdW5jdGlvbigkZWxlbSwgZGF0YSkge1xuICAgICAgICAgICAgdmFyIGxpc3RIb2xkZXIgPSAkKCc8ZGl2IGNsYXNzPVwiaHNjLWdhbWUtc2NoZWR1bGUtbGlzdFwiPjwvZGl2PicpO1xuICAgICAgICAgICAgJGVsZW0uYXBwZW5kKGxpc3RIb2xkZXIpO1xuICAgICAgICAgICAgYnVpbGRSb3dzKGRhdGEucm93cywgbGlzdEhvbGRlcik7XG4gICAgICAgIH07XG5cbiAgICAgICAgdmFyIGJ1aWxkUm93cyA9IGZ1bmN0aW9uKHJvd3MsIGVsZW1lbnQpIHtcbiAgICAgICAgICAgIHZhciB0ZW1wbGF0ZSA9IF8udGVtcGxhdGUocmV0cmlldmVSb3dUZW1wbGF0ZSgpKTtcbiAgICAgICAgICAgIHZhciBvdXRwdXQgPSAnJztcbiAgICAgICAgICAgIHZhciByb3cgPSAnJztcbiAgICAgICAgICAgIHZhciBkZWxheSA9IDE7XG5cbiAgICAgICAgICAgIGlmIChyb3dzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHRlbXBsYXRlID0gJChyZXRyaWV2ZUVtcHR5VGVtcGxhdGUoKSk7XG4gICAgICAgICAgICAgICAgZWxlbWVudC5hcHBlbmQodGVtcGxhdGUpO1xuICAgICAgICAgICAgICAgIHRlbXBsYXRlLmhpZGUoKS5kZWxheShkZWxheSAqIGtleSkuZmFkZUluKCk7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgXy5lYWNoKHJvd3MsIGZ1bmN0aW9uKHZhbHVlLCBrZXkpIHtcbiAgICAgICAgICAgICAgICBpZiAodmFsdWUuaG9tZVRlYW1JZCA9PT0gdGVhbUlkIHx8IHZhbHVlLmF3YXlUZWFtSWQgPT09IHRlYW1JZCkge1xuICAgICAgICAgICAgICAgICAgICByb3cgPSAkKHRlbXBsYXRlKHZhbHVlKSk7XG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuYXBwZW5kKHJvdyk7XG4gICAgICAgICAgICAgICAgICAgIHJvdy5oaWRlKCkuZGVsYXkoZGVsYXkgKiBrZXkpLmZhZGVJbigpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfTtcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgaW5pdDogZnVuY3Rpb24oJGVsZW0pIHtcbiAgICAgICAgICAgICAgICB2YXIgc2VydmljZSA9IG5ldyBIb2NrZXlEYXRhU2VydmljZTtcbiAgICAgICAgICAgICAgICBkaXZpc2lvbklkID0gJGVsZW0uZGF0YSgnZGl2aXNpb24nKTtcbiAgICAgICAgICAgICAgICB0ZWFtSWQgPSAkZWxlbS5kYXRhKCd0ZWFtJyk7XG5cbiAgICAgICAgICAgICAgICBzZXJ2aWNlLmdldFNjaGVkdWxlKGRpdmlzaW9uSWQpLnRoZW4oXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBidWlsZFdpZGdldCgkZWxlbSwgcmVzcG9uc2UuZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnZXJyb3InLCByZXNwb25zZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcblxuICAgICQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCkge1xuICAgICAgICBfLnRlbXBsYXRlU2V0dGluZ3MgPSB7XG4gICAgICAgICAgICBpbnRlcnBvbGF0ZTogL1xce1xceyguKz8pXFx9XFx9L2dcbiAgICAgICAgfTtcblxuICAgICAgICAkKCcuanMtd2lkZ2V0LXNjaGVkdWxlJykuZWFjaChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciBzY2hlZHVsZXMgPSBuZXcgSG9ja2V5RGF0YVdpZGdldHNTY2hlZHVsZTtcbiAgICAgICAgICAgIHNjaGVkdWxlcy5pbml0KCQodGhpcykpO1xuICAgICAgICB9KTtcbiAgICB9KTtcbn0pKGpRdWVyeSk7XG4iLCIoZnVuY3Rpb24oJCkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIHZhciBIb2NrZXlEYXRhV2lkZ2V0c1NjaGVkdWxlU2luZ2xlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBsb2dvQmFzZVVybCA9ICcvd3AtY29udGVudC90aGVtZXMvaHNjLXRoZW1lL2ltYWdlcy90ZWFtcyc7XG4gICAgICAgIHZhciBkaXZpc2lvbklkID0gJzEzNic7XG4gICAgICAgIHZhciB0ZWFtSWQgPSAnNzMxJztcbiAgICAgICAgdmFyIHR5cGUgPSAnbGFzdCc7XG5cbiAgICAgICAgdmFyIHJldHJpZXZlRW1wdHlUZW1wbGF0ZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuICc8ZGl2IGNsYXNzPVwibm8tZ2FtZXNcIj4nXG4gICAgICAgICAgICAgICAgKyAnS2VpbmUgU3BpZWxlIHp1ciBaZWl0LidcbiAgICAgICAgICAgICAgICArICc8L2Rpdj4nO1xuICAgICAgICB9O1xuXG4gICAgICAgIHZhciByZXRyaWV2ZVJvd1RlbXBsYXRlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgY2xhc3NOYW1lID0gJ2xhc3QtZ2FtZS13aWRnZXQnO1xuXG4gICAgICAgICAgICBpZiAodHlwZSA9PT0gJ25leHQnKSB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lID0gJ25leHQtZ2FtZS13aWRnZXQnO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gJzxkaXYgY2xhc3M9XCJoc2MtZ2FtZS1zY2hlZHVsZS13aWRnZXQgJyArIGNsYXNzTmFtZSArICdcIj4nXG4gICAgICAgICAgICAgICAgKyAnPGRpdiBjbGFzcz1cInNjaGVkdWxlLXdpZGdldC1ob2xkZXJcIj4nXG4gICAgICAgICAgICAgICAgKyAnICA8ZGl2IGNsYXNzPVwiaW1hZ2UgaW1hZ2UtaG9tZS10ZWFtXCI+J1xuICAgICAgICAgICAgICAgICsgJyAgICA8aW1nIHNyYz1cIicgKyBsb2dvQmFzZVVybCArICcve3sgaG9tZVRlYW1JZCB9fS5wbmdcIiAvPidcbiAgICAgICAgICAgICAgICArICcgIDwvZGl2PidcbiAgICAgICAgICAgICAgICArICcgIDxkaXYgY2xhc3M9XCJtZXRhXCI+J1xuICAgICAgICAgICAgICAgICsgJyAgICA8ZGl2IGNsYXNzPVwiZGF0ZVwiPnt7IHNjaGVkdWxlZERhdGUudmFsdWUgfX08L2Rpdj4nXG4gICAgICAgICAgICAgICAgKyAnICAgIDxkaXYgY2xhc3M9XCJ0aW1lXCI+e3sgc2NoZWR1bGVkVGltZSB9fTwvZGl2PidcbiAgICAgICAgICAgICAgICArICcgICAgPGRpdiBjbGFzcz1cInNjb3Jlc1wiPnt7IGhvbWVUZWFtU2NvcmUgfX06e3sgYXdheVRlYW1TY29yZSB9fTwvZGl2PidcbiAgICAgICAgICAgICAgICArICcgIDwvZGl2PidcbiAgICAgICAgICAgICAgICArICcgIDxkaXYgY2xhc3M9XCJpbWFnZSBpbWFnZS1hd2F5LXRlYW1cIj4nXG4gICAgICAgICAgICAgICAgKyAnICAgIDxpbWcgc3JjPVwiJyArIGxvZ29CYXNlVXJsICsgJy97eyBhd2F5VGVhbUlkIH19LnBuZ1wiIC8+J1xuICAgICAgICAgICAgICAgICsgJyAgPC9kaXY+J1xuICAgICAgICAgICAgICAgICsgJzwvZGl2PidcbiAgICAgICAgICAgICAgICArICcgIDxkaXYgY2xhc3M9XCJ0ZWFtc1wiPidcbiAgICAgICAgICAgICAgICArICcgICAgPHNwYW4gY2xhc3M9XCJ0ZWFtIGhvbWUtdGVhbVwiPnt7IGhvbWVUZWFtTG9uZ05hbWUgfX08L3NwYW4+J1xuICAgICAgICAgICAgICAgICsgJyAgICA8c3BhbiBjbGFzcz1cImRpdmlkZXJcIj4tPC9zcGFuPidcbiAgICAgICAgICAgICAgICArICcgICAgPHNwYW4gY2xhc3M9XCJ0ZWFtIGF3YXktdGVhbVwiPnt7IGF3YXlUZWFtTG9uZ05hbWUgfX08L3NwYW4+J1xuICAgICAgICAgICAgICAgICsgJyAgPC9kaXY+J1xuICAgICAgICAgICAgICAgICsgJzwvZGl2Pic7XG4gICAgICAgIH07XG5cbiAgICAgICAgdmFyIGJ1aWxkV2lkZ2V0ID0gZnVuY3Rpb24oJGVsZW0sIGRhdGEpIHtcbiAgICAgICAgICAgIHZhciBob2xkZXIgPSAkKCc8ZGl2IGNsYXNzPVwianMtc2NoZWR1bGUtd2lkZ2V0XCI+PC9kaXY+Jyk7XG4gICAgICAgICAgICAkZWxlbS5hcHBlbmQoaG9sZGVyKTtcbiAgICAgICAgICAgIGJ1aWxkUm93cyhkYXRhLnJvd3MsIGhvbGRlcik7XG4gICAgICAgIH07XG5cbiAgICAgICAgdmFyIGJ1aWxkUm93cyA9IGZ1bmN0aW9uKHJvd3MsIGVsZW1lbnQpIHtcbiAgICAgICAgICAgIHZhciBvdXRwdXQgPSAnJztcbiAgICAgICAgICAgIHZhciB0ZW1wbGF0ZSA9IF8udGVtcGxhdGUocmV0cmlldmVSb3dUZW1wbGF0ZSgpKTtcbiAgICAgICAgICAgIHZhciB0b2RheSA9IG1vbWVudCgpO1xuICAgICAgICAgICAgdmFyIGxpbWl0ID0gMTtcbiAgICAgICAgICAgIHZhciBmb3VuZCA9IGZhbHNlO1xuXG4gICAgICAgICAgICBpZiAodHlwZSA9PT0gJ2xhc3QnKSB7XG4gICAgICAgICAgICAgICAgcm93cyA9IF8uY2hhaW4ocm93cykucmV2ZXJzZSgpLl93cmFwcGVkO1xuICAgICAgICAgICAgICAgIHZhciBsYXN0R2FtZSA9IF8uZmluZChyb3dzLCBmdW5jdGlvbihyb3cpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKChyb3cuaG9tZVRlYW1JZCA9PT0gdGVhbUlkIHx8IHJvdy5hd2F5VGVhbUlkID09PSB0ZWFtSWQpXG4gICAgICAgICAgICAgICAgICAgICAgICAmJiAocm93LnNjaGVkdWxlZERhdGUgJiYgcm93LnNjaGVkdWxlZERhdGUudmFsdWUpXG4gICAgICAgICAgICAgICAgICAgICAgICAmJiByb3cuaG9tZVRlYW1TY29yZSAhPT0gbnVsbFxuICAgICAgICAgICAgICAgICAgICAgICAgJiYgcm93LmF3YXlUZWFtU2NvcmUgIT09IG51bGxcbiAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZ2FtZURhdGUgPSBtb21lbnQocm93LnNjaGVkdWxlZERhdGUudmFsdWUsICdERC5NTS5ZWVlZJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChnYW1lRGF0ZS5pc0JlZm9yZSh0b2RheSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcm93O1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBpZiAobGFzdEdhbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgZm91bmQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBvdXRwdXQgKz0gdGVtcGxhdGUobGFzdEdhbWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHR5cGUgPT09ICduZXh0Jykge1xuICAgICAgICAgICAgICAgIHZhciBuZXh0R2FtZSA9IF8uZmluZChyb3dzLCBmdW5jdGlvbihyb3cpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKChyb3cuaG9tZVRlYW1JZCA9PT0gdGVhbUlkIHx8IHJvdy5hd2F5VGVhbUlkID09PSB0ZWFtSWQpXG4gICAgICAgICAgICAgICAgICAgICAgICAmJiAocm93LnNjaGVkdWxlZERhdGUgJiYgcm93LnNjaGVkdWxlZERhdGUudmFsdWUpXG4gICAgICAgICAgICAgICAgICAgICAgICAmJiByb3cuaG9tZVRlYW1TY29yZSA9PT0gbnVsbFxuICAgICAgICAgICAgICAgICAgICAgICAgJiYgcm93LmF3YXlUZWFtU2NvcmUgPT09IG51bGxcbiAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZ2FtZURhdGUgPSBtb21lbnQocm93LnNjaGVkdWxlZERhdGUudmFsdWUsICdERC5NTS5ZWVlZJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChnYW1lRGF0ZS5pc1NhbWVPckFmdGVyKHRvZGF5KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByb3c7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIGlmIChuZXh0R2FtZSkge1xuICAgICAgICAgICAgICAgICAgICBmb3VuZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIG91dHB1dCArPSB0ZW1wbGF0ZShuZXh0R2FtZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoZm91bmQpIHtcbiAgICAgICAgICAgICAgICBvdXRwdXQgPSAkKG91dHB1dCk7XG4gICAgICAgICAgICAgICAgZWxlbWVudC5hcHBlbmQob3V0cHV0KTtcbiAgICAgICAgICAgICAgICBvdXRwdXQuaGlkZSgpLmRlbGF5KCdzbG93JykuZmFkZUluKCk7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGVtcGxhdGUgPSAkKHJldHJpZXZlRW1wdHlUZW1wbGF0ZSgpKTtcbiAgICAgICAgICAgIGVsZW1lbnQuYXBwZW5kKHRlbXBsYXRlKTtcbiAgICAgICAgICAgIHRlbXBsYXRlLmhpZGUoKS5kZWxheSgnc2xvdycpLmZhZGVJbigpO1xuXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfTtcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgaW5pdDogZnVuY3Rpb24oJGVsZW0pIHtcbiAgICAgICAgICAgICAgICB2YXIgc2VydmljZSA9IG5ldyBIb2NrZXlEYXRhU2VydmljZTtcbiAgICAgICAgICAgICAgICBkaXZpc2lvbklkID0gJGVsZW0uZGF0YSgnZGl2aXNpb24nKTtcbiAgICAgICAgICAgICAgICB0ZWFtSWQgPSAkZWxlbS5kYXRhKCd0ZWFtJyk7XG4gICAgICAgICAgICAgICAgdHlwZSA9ICRlbGVtLmRhdGEoJ3R5cGUnKTtcblxuICAgICAgICAgICAgICAgIHZhciBkYXRhID0gc2VydmljZS5nZXRTY2hlZHVsZShkaXZpc2lvbklkKS50aGVuKFxuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYnVpbGRXaWRnZXQoJGVsZW0sIHJlc3BvbnNlLmRhdGEpO1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2Vycm9yJywgcmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gYnVpbGRXaWRnZXQoJGVsZW0sIEpTT04ucGFyc2UocmVzcG9uc2UuZGF0YSkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG5cbiAgICAkKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpIHtcbiAgICAgICAgXy50ZW1wbGF0ZVNldHRpbmdzID0ge1xuICAgICAgICAgICAgaW50ZXJwb2xhdGU6IC9cXHtcXHsoLis/KVxcfVxcfS9nXG4gICAgICAgIH07XG5cbiAgICAgICAgJCgnLmpzLXdpZGdldC1zY2hlZHVsZS1zaW5nbGUnKS5lYWNoKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIHNjaGVkdWxlc1NpbmdsZSA9IG5ldyBIb2NrZXlEYXRhV2lkZ2V0c1NjaGVkdWxlU2luZ2xlO1xuICAgICAgICAgICAgc2NoZWR1bGVzU2luZ2xlLmluaXQoJCh0aGlzKSk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xufSkoalF1ZXJ5KTtcbiIsIihmdW5jdGlvbigkKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgICBmdW5jdGlvbiBIb2NrZXlEYXRhV2lkZ2V0c1N0YW5kaW5ncygpIHtcbiAgICAgICAgdmFyIGxvZ29CYXNlVXJsID0gJy93cC1jb250ZW50L3RoZW1lcy9oc2MtdGhlbWUvaW1hZ2VzL3RlYW1zJztcbiAgICAgICAgdmFyIGRpdmlzaW9uSWQgPSAnMTM2JztcbiAgICAgICAgdmFyIHRlYW1JZCA9ICc3MzEnO1xuXG4gICAgICAgIHZhciByZXRyaWV2ZUhlYWRlclRlbXBsYXRlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gJzx0ciBjbGFzcz1cImhzYy1zdGFuZGluZ3MtaGVhZGVyXCI+J1xuICAgICAgICAgICAgICAgICsgJzx0ZCBjbGFzcz1cInJhbmtcIj4jPC90ZD4nXG4gICAgICAgICAgICAgICAgKyAnPHRkIGNsYXNzPVwiaW1hZ2VcIj48L3RkPidcbiAgICAgICAgICAgICAgICArICc8dGQgY2xhc3M9XCJ0ZWFtXCI+VGVhbTwvdGQ+J1xuICAgICAgICAgICAgICAgICsgJzx0ZCBjbGFzcz1cImluZm8gdGQtZ3BcIj5TcDwvdGQ+J1xuICAgICAgICAgICAgICAgICsgJzx0ZCBjbGFzcz1cImluZm8gdGQtd1wiPlM8L3RkPidcbiAgICAgICAgICAgICAgICArICc8dGQgY2xhc3M9XCJpbmZvIHRkLWxcIj5OPC90ZD4nXG4gICAgICAgICAgICAgICAgKyAnPHRkIGNsYXNzPVwiaW5mbyB0ZC1vdHdcIj5PVFM8L3RkPidcbiAgICAgICAgICAgICAgICArICc8dGQgY2xhc3M9XCJpbmZvIHRkLW90bFwiPk9UTjwvdGQ+J1xuICAgICAgICAgICAgICAgICsgJzx0ZCBjbGFzcz1cImluZm8gdGQtZ29hbHNcIj5Ub3JlPC90ZD4nXG4gICAgICAgICAgICAgICAgKyAnPHRkIGNsYXNzPVwiaW5mbyB0ZC1nZFwiPlREPC90ZD4nXG4gICAgICAgICAgICAgICAgKyAnPHRkIGNsYXNzPVwiaW5mbyB0ZC1wdHNcIj5QS1Q8L3RkPidcbiAgICAgICAgICAgICAgICArICc8L3RyPic7XG4gICAgICAgIH07XG5cbiAgICAgICAgdmFyIHJldHJpZXZlUm93VGVtcGxhdGUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiAnPHRyIGNsYXNzPVwiaHNjLXN0YW5kaW5ncy1yb3dcIj4nXG4gICAgICAgICAgICAgICAgKyAnPHRkIGNsYXNzPVwicmFua1wiPnt7IHRhYmxlUmFuayB9fTwvdGQ+J1xuICAgICAgICAgICAgICAgICsgJzx0ZCBjbGFzcz1cImltYWdlXCI+PGltZyBzcmM9XCInICsgbG9nb0Jhc2VVcmwgKyAnL3t7IGlkIH19LnBuZ1wiIC8+PC90ZD4nXG4gICAgICAgICAgICAgICAgKyAnPHRkIGNsYXNzPVwidGVhbVwiPnt7IHRlYW1Mb25nbmFtZSB9fTwvdGQ+J1xuICAgICAgICAgICAgICAgICsgJzx0ZCBjbGFzcz1cImluZm8gdGQtZ3BcIj57eyBnYW1lc1BsYXllZCB9fTwvdGQ+J1xuICAgICAgICAgICAgICAgICsgJzx0ZCBjbGFzcz1cImluZm8gdGQtd1wiPnt7IGdhbWVzV29uIH19PC90ZD4nXG4gICAgICAgICAgICAgICAgKyAnPHRkIGNsYXNzPVwiaW5mbyB0ZC1sXCI+e3sgZ2FtZXNMb3N0IH19PC90ZD4nXG4gICAgICAgICAgICAgICAgKyAnPHRkIGNsYXNzPVwiaW5mbyB0ZC1vdHdcIj57eyBnYW1lc1dvbkluT3QgfX08L3RkPidcbiAgICAgICAgICAgICAgICArICc8dGQgY2xhc3M9XCJpbmZvIHRkLW90bFwiPnt7IGdhbWVzTG9zdEluT3QgfX08L3RkPidcbiAgICAgICAgICAgICAgICArICc8dGQgY2xhc3M9XCJpbmZvIHRkLWdvYWxzXCI+e3sgZ29hbHNGb3IgfX06e3sgZ29hbHNBZ2FpbnN0IH19PC90ZD4nXG4gICAgICAgICAgICAgICAgKyAnPHRkIGNsYXNzPVwiaW5mbyB0ZC1nZFwiPnt7IGdvYWxEaWZmZXJlbmNlIH19PC90ZD4nXG4gICAgICAgICAgICAgICAgKyAnPHRkIGNsYXNzPVwiaW5mbyB0ZC1wdHNcIj57eyBwb2ludHMgfX08L3RkPidcbiAgICAgICAgICAgICAgICArICc8L3RyPic7XG4gICAgICAgIH07XG5cbiAgICAgICAgdmFyIGJ1aWxkV2lkZ2V0ID0gZnVuY3Rpb24oJGVsZW0sIGRhdGEpIHtcbiAgICAgICAgICAgIHZhciBvdXRwdXQgPSAnPHRhYmxlIGNsYXNzPVwiaHNjLXRhYmxlIGhzYy1zdGFuZGluZ3NcIj4nO1xuICAgICAgICAgICAgdmFyIHJvd3MgPSBidWlsZFJvd3MoZGF0YS5yb3dzKTtcbiAgICAgICAgICAgIG91dHB1dCArPSByZXRyaWV2ZUhlYWRlclRlbXBsYXRlKCk7XG4gICAgICAgICAgICBvdXRwdXQgKz0gcm93cztcbiAgICAgICAgICAgIG91dHB1dCArPSAnPC90YWJsZT4nO1xuXG4gICAgICAgICAgICBvdXRwdXQgPSAkKG91dHB1dCk7XG4gICAgICAgICAgICAkZWxlbS5hcHBlbmQob3V0cHV0KTtcbiAgICAgICAgICAgIG91dHB1dC5mYWRlSW4oKTtcbiAgICAgICAgfTtcblxuICAgICAgICB2YXIgYnVpbGRSb3dzID0gZnVuY3Rpb24ocm93cykge1xuICAgICAgICAgICAgdmFyIG91dHB1dCA9ICcnO1xuICAgICAgICAgICAgdmFyIHRlbXBsYXRlID0gXy50ZW1wbGF0ZShyZXRyaWV2ZVJvd1RlbXBsYXRlKCkpO1xuXG4gICAgICAgICAgICBfLmVhY2gocm93cywgZnVuY3Rpb24odmFsdWUsIGtleSkge1xuICAgICAgICAgICAgICAgIG91dHB1dCArPSB0ZW1wbGF0ZSh2YWx1ZSk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgcmV0dXJuIG91dHB1dDtcbiAgICAgICAgfTtcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgaW5pdDogZnVuY3Rpb24oJGVsZW0pIHtcbiAgICAgICAgICAgICAgICB2YXIgc2VydmljZSA9IG5ldyBIb2NrZXlEYXRhU2VydmljZTtcbiAgICAgICAgICAgICAgICBkaXZpc2lvbklkID0gJGVsZW0uZGF0YSgnZGl2aXNpb24nKTtcblxuICAgICAgICAgICAgICAgIHNlcnZpY2UuZ2V0U3RhbmRpbmdzKGRpdmlzaW9uSWQpLnRoZW4oXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBidWlsZFdpZGdldCgkZWxlbSwgcmVzcG9uc2UuZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnZXJyb3InLCByZXNwb25zZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcblxuICAgICQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCkge1xuICAgICAgICBfLnRlbXBsYXRlU2V0dGluZ3MgPSB7XG4gICAgICAgICAgICBpbnRlcnBvbGF0ZTogL1xce1xceyguKz8pXFx9XFx9L2dcbiAgICAgICAgfTtcblxuICAgICAgICAkKCcuanMtd2lkZ2V0LXN0YW5kaW5ncycpLmVhY2goZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgc3RhbmRpbmdzID0gbmV3IEhvY2tleURhdGFXaWRnZXRzU3RhbmRpbmdzO1xuICAgICAgICAgICAgc3RhbmRpbmdzLmluaXQoJCh0aGlzKSk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xufSkoalF1ZXJ5KTtcbiIsIihmdW5jdGlvbigkKSB7XG4gICAgd2luZG93LkhvY2tleURhdGFTZXJ2aWNlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIFwidXNlIHN0cmljdFwiO1xuXG4gICAgICAgIHZhciBiYXNlVXJsID0gJ2h0dHA6Ly9hcGkuaG9ja2V5ZGF0YS5uZXQvZGF0YS9lYmVsJztcbiAgICAgICAgdmFyIHNjaGVkdWxlVXJsID0gJy9TY2hlZHVsZSc7XG4gICAgICAgIHZhciBzdGFuZGluZ3NVcmwgPSAnL1N0YW5kaW5ncyc7XG4gICAgICAgIHZhciBrbm9ja291dFVybCA9ICcvS25vY2tvdXRTdGFnZSc7XG5cbiAgICAgICAgdmFyIHVybFBhcmFtcyA9IHtcbiAgICAgICAgICAgIGFwaUtleTogJ2U1MmI1NzIyY2JjODljM2U1MWVlMGNkNmUyNDg1YTgxJyxcbiAgICAgICAgICAgIGRpdmlzaW9uSWQ6ICcxMzYnLFxuICAgICAgICAgICAgbGVhZ3VlOiAnZWJlbCcsXG4gICAgICAgICAgICBzcG9ydDogJ2ljZWhvY2tleScsXG4gICAgICAgICAgICByZWZlcmVyOiAnd3d3Lmgtc2MuYXQnXG4gICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGdldFNjaGVkdWxlOiBmdW5jdGlvbihkaXZpc2lvbklkKSB7XG4gICAgICAgICAgICAgICAgdmFyIGRlZmVyID0gJC5EZWZlcnJlZCgpO1xuXG4gICAgICAgICAgICAgICAgdXJsUGFyYW1zLmRpdmlzaW9uSWQgPSBkaXZpc2lvbklkO1xuICAgICAgICAgICAgICAgIHZhciBwYXJhbXMgPSAkLnBhcmFtKHVybFBhcmFtcyk7XG4gICAgICAgICAgICAgICAgdmFyIHVybCA9IGJhc2VVcmwgKyBzY2hlZHVsZVVybCArICc/JyArIHBhcmFtcztcbiAgICAgICAgICAgICAgICB2YXIgcmVxdWVzdCA9ICQuYWpheCh7XG4gICAgICAgICAgICAgICAgICAgIHVybDogdXJsLFxuICAgICAgICAgICAgICAgICAgICBkYXRhVHlwZTogXCJqc29ucFwiLFxuICAgICAgICAgICAgICAgICAgICBhc3luYzogZmFsc2VcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIHJlcXVlc3Quc3VjY2VzcyhmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZGVmZXIucmVzb2x2ZShyZXNwb25zZSk7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICByZXF1ZXN0LmVycm9yKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBkZWZlci5yZWplY3Qoe1xuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvd3M6IFtdXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIGRlZmVyLnByb21pc2UoKTtcblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGdldFN0YW5kaW5nczogZnVuY3Rpb24oZGl2aXNpb25JZCkge1xuICAgICAgICAgICAgICAgIHVybFBhcmFtcy5kaXZpc2lvbklkID0gZGl2aXNpb25JZDtcbiAgICAgICAgICAgICAgICB2YXIgcGFyYW1zID0gJC5wYXJhbSh1cmxQYXJhbXMpO1xuICAgICAgICAgICAgICAgIHZhciB1cmwgPSBiYXNlVXJsICsgc3RhbmRpbmdzVXJsICsgJz8nICsgcGFyYW1zO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuICQuYWpheCh7XG4gICAgICAgICAgICAgICAgICAgIHVybDogdXJsLFxuICAgICAgICAgICAgICAgICAgICBkYXRhVHlwZTogXCJqc29ucFwiXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZ2V0S25vY2tvdXQ6IGZ1bmN0aW9uKGRpdmlzaW9uSWQpIHtcbiAgICAgICAgICAgICAgICB1cmxQYXJhbXMuZGl2aXNpb25JZCA9IGRpdmlzaW9uSWQ7XG4gICAgICAgICAgICAgICAgdmFyIHBhcmFtcyA9ICQucGFyYW0odXJsUGFyYW1zKTtcbiAgICAgICAgICAgICAgICB2YXIgdXJsID0gYmFzZVVybCArIGtub2Nrb3V0VXJsICsgJz8nICsgcGFyYW1zO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuICQuYWpheCh7XG4gICAgICAgICAgICAgICAgICAgIHVybDogdXJsLFxuICAgICAgICAgICAgICAgICAgICBkYXRhVHlwZTogXCJqc29ucFwiXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xufSkoalF1ZXJ5KTtcbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
