!function(e){window.HockeyDataConfig=function(){return{logoBaseUrl:"/wp-content/themes/hsc-theme/images/teams",hockeyDataApiUrl:"https://api.hockeydata.net/data/ebel",league:"ebel",sport:"icehockey",referer:"www.h-sc.at",hockeyDataApiKey:"e52b5722cbc89c3e51ee0cd6e2485a81"}}}(jQuery),function(e){"use strict";var a=jQuery.fn.addClass;jQuery.fn.addClass=function(){var e=a.apply(this,arguments);return jQuery("#main-header").removeClass("et-fixed-header"),e},e("#main-header").removeClass("et-fixed-header")}(jQuery),function(e){"use strict";function a(){var a=new HockeyDataConfig,t="136",n=[3740,3741,4951,4952],s="halbfinale",i=function(e){var t='<table class="hsc-knockout-overview"><tr>  <td class="image">';return t+=_.contains(n,e.teams[0].id)?"<strong>{{ teams[0].longname }}</strong>":'<img src="'+a.logoBaseUrl+'/{{ teams[0].id }}.png"/>',t+='  </td>  <td class="meta">    <span class="score">{{ teams[0].gamesWon }} : {{ teams[1].gamesWon }}</span><br/>    <span class="bestof">Best of: {{ bestOf }}</span>  </td>  <td class="image">',t+=_.contains(n,e.teams[1].id)?"<strong>{{ teams[1].longname }}</strong>":'<img src="'+a.logoBaseUrl+'/{{ teams[1].id }}.png"/>',t+="  </td></tr></table>",(t=_.template(t))(e)},d=function(e){var a="<tr>";return a+=e.dateIsToBeDetermined?'  <td class="date" colspan="2">    TBD  </td>':'  <td class="date" colspan="2">    {{ scheduledDate.value }} - {{ scheduledTime }}  </td>',a+='</tr><tr>  <td class="team">{{ homeTeamLongName }} <br/> {{ awayTeamLongName }}</td>  <td class="score">      {{ gameStatus > 0 ? homeTeamScore : "-" }}      : {{ gameStatus > 0 ? awayTeamScore : "-" }}  </td></tr>',(a=_.template(a))(e)},o=function(a,t){var n='<div class="hsc-knockout">',s=c(t);n+=s,n+="</div>",n=e(n),a.append(n),n.fadeIn()},c=function(e){return r("halbfinale"===s.toLowerCase()?e.phases[0]:e.phases[1])},r=function(e){var a="";return _.each(e.encounters,function(e,t){a+=l(e)}),a},l=function(e){var a="",t={teams:e.teams,bestOf:e.bestOf};return a+='<div class="hsc-knockout-game">',a+=i(t),a+='<table class="hsc-knockout-list">',a+=u(e.games),a+="</table>",a+="</div>"},u=function(e){var a="";return _.each(e,function(e,t){a+=d(e)}),a};return{init:function(e){var a=new HockeyDataService;t=e.data("division"),s=e.data("type"),a.getKnockout(t).then(function(a){o(e,a.data)},function(e){console.log("error",e)})}}}e(document).ready(function(){_.templateSettings={interpolate:/\{\{(.+?)\}\}/g},e(".js-hsc-knockout").each(function(){var t=new a;t.init(e(this))})})}(jQuery),function(e){function a(){var a=e("#et-main-area"),n=e(".mobile_menu_bar_toggle");n.on("click",function(n){n.preventDefault(),e(n.currentTarget).hasClass("opened")?(t(),a.show(),e(n.currentTarget).removeClass("opened")):(t(),a.hide(),e(n.currentTarget).addClass("opened"))})}function t(){var a=e(".logo_container");a.animate({top:"-50px"},"fast",function(){window.setTimeout(function(){a.animate({top:"0px"},"fast")},500)})}e(window).load(function(){a()})}(jQuery),function(e){"use strict";var a=function(){var a=new HockeyDataConfig,t="136",n="731",s=function(){return'<div class="no-games">Keine Spiele zur Zeit.</div>'},i=function(){return'<div class="hsc-game-schedule-list-item">  <div class="schedule">    <div class="date">{{ scheduledDate.value }}</div>    <div class="time">- {{ scheduledTime }}</div>  </div>  <div class="game">  <div class="teams">    <div class="team team-home">      <div class="teamlogo"><img src="'+a.logoBaseUrl+'/{{ homeTeamId }}.png" /></div>      <div class="teamname">{{ homeTeamLongName }}</div>    </div>    <div class="divider"></div>    <div class="team team-away">      <div class="teamlogo"><img src="'+a.logoBaseUrl+'/{{ awayTeamId }}.png" /></div>      <div class="teamname">{{ awayTeamLongName }}</div>    </div>  </div>  <div class="scores">      {{ gameStatus > 0 ? homeTeamScore : "-" }}      : {{ gameStatus > 0 ? awayTeamScore : "-" }}  </div>  </div></div>'},d=function(a,t){var n=e('<div class="hsc-game-schedule-list"></div>');a.append(n),o(t.rows,n)},o=function(a,t){var d=_.template(i()),o="",c=1;return 0===a.length?(d=e(s()),t.append(d),d.hide().delay(c*key).fadeIn(),!0):(_.each(a,function(a,s){(a.homeTeamId===n||a.awayTeamId===n)&&("00:00"===a.scheduledTime&&(a.scheduledTime="k.A."),o=e(d(a)),t.append(o),o.hide().delay(c*s).fadeIn())}),!0)};return{init:function(e){var a=new HockeyDataService;t=e.data("division"),n=e.data("team"),a.getSchedule(t).then(function(a){d(e,a.data)},function(e){console.log("error",e)})}}};e(document).ready(function(){_.templateSettings={interpolate:/\{\{(.+?)\}\}/g},e(".js-widget-schedule").each(function(){var t=new a;t.init(e(this))})})}(jQuery),function(e){"use strict";var a=function(){var a=new HockeyDataConfig,t="136",n="731",s="last",i=function(){return'<div class="no-games">Keine Spiele zur Zeit.</div>'},d=function(){var e="last-game-widget";return"next"===s&&(e="next-game-widget"),'<div class="hsc-game-schedule-widget '+e+'"><div class="schedule-widget-holder">  <div class="image image-home-team">    <img src="'+a.logoBaseUrl+'/{{ homeTeamId }}.png" />  </div>  <div class="meta">    <div class="date">{{ scheduledDate.value }}</div>    <div class="time">{{ scheduledTime }}</div>    <div class="scores">{{ homeTeamScore }}:{{ awayTeamScore }}</div>  </div>  <div class="image image-away-team">    <img src="'+a.logoBaseUrl+'/{{ awayTeamId }}.png" />  </div></div>  <div class="teams">    <span class="team home-team">{{ homeTeamLongName }}</span>    <span class="divider">-</span>    <span class="team away-team">{{ awayTeamLongName }}</span>  </div></div>'},o=function(a,t){var n=e('<div class="js-schedule-widget"></div>');a.append(n),c(t.rows,n)},c=function(a,t){var o="",c=_.template(d()),r=moment(),l=!1;if("last"===s){a=_.chain(a).reverse()._wrapped;var u=_.find(a,function(e){if((e.homeTeamId===n||e.awayTeamId===n)&&e.scheduledDate&&e.scheduledDate.value&&e.gameStatus>0){var a=moment(e.scheduledDate.value,"DD.MM.YYYY");if(a.isBefore(r))return e}});u&&(l=!0,"00:00"===u.scheduledTime&&(u.scheduledTime="k.A."),o+=c(u))}if("next"===s){var m=_.find(a,function(e){if((e.homeTeamId===n||e.awayTeamId===n)&&e.scheduledDate&&e.scheduledDate.value&&0===e.gameStatus){var a=moment(e.scheduledDate.value,"DD.MM.YYYY");if(a.isSameOrAfter(r,"day"))return e}});m&&(l=!0,"00:00"===m.scheduledTime&&(m.scheduledTime="k.A."),o+=c(m))}return l?(o=e(o),t.append(o),o.hide().delay("slow").fadeIn(),!0):(c=e(i()),t.append(c),c.hide().delay("slow").fadeIn(),!0)};return{init:function(e){var a=new HockeyDataService;t=e.data("division"),n=e.data("team"),s=e.data("type");a.getSchedule(t).then(function(a){o(e,a.data)},function(e){console.log("error",e)})}}};e(document).ready(function(){_.templateSettings={interpolate:/\{\{(.+?)\}\}/g},e(".js-widget-schedule-single").each(function(){var t=new a;t.init(e(this))})})}(jQuery),function(e){"use strict";function a(){var a=new HockeyDataConfig,t="136",n=function(){return'<tr class="hsc-standings-header"><td class="rank">#</td><td class="image"></td><td class="team">Team</td><td class="info td-gp">Sp</td><td class="info td-w">S</td><td class="info td-l">N</td><td class="info td-otw">OTS</td><td class="info td-otl">OTN</td><td class="info td-goals">Tore</td><td class="info td-gd">TD</td><td class="info td-pts">PKT</td></tr>'},s=function(){return'<tr class="hsc-standings-row"><td class="rank">{{ tableRank }}</td><td class="image"><img src="'+a.logoBaseUrl+'/{{ id }}.png" /></td><td class="team">{{ teamLongname }}</td><td class="info td-gp">{{ gamesPlayed }}</td><td class="info td-w">{{ gamesWon }}</td><td class="info td-l">{{ gamesLost }}</td><td class="info td-otw">{{ gamesWonInOt }}</td><td class="info td-otl">{{ gamesLostInOt }}</td><td class="info td-goals">{{ goalsFor }}:{{ goalsAgainst }}</td><td class="info td-gd">{{ goalDifference }}</td><td class="info td-pts">{{ points }}</td></tr>'},i=function(a,t){var s='<table class="hsc-table hsc-standings">',i=d(t.rows);s+=n(),s+=i,s+="</table>",s=e(s),a.append(s),s.fadeIn()},d=function(e){var a="",t=_.template(s());return _.each(e,function(e,n){a+=t(e)}),a};return{init:function(e){var a=new HockeyDataService;t=e.data("division"),a.getStandings(t).then(function(a){i(e,a.data)},function(e){console.log("error",e)})}}}e(document).ready(function(){_.templateSettings={interpolate:/\{\{(.+?)\}\}/g},e(".js-widget-standings").each(function(){var t=new a;t.init(e(this))})})}(jQuery),function(e){window.HockeyDataService=function(){"use strict";var a=new HockeyDataConfig,t=a.hockeyDataApiUrl,n="/Schedule",s="/Standings",i="/KnockoutStage",d={apiKey:a.hockeyDataApiKey,divisionId:"136",league:a.league,sport:a.sport,referer:a.referer};return{getSchedule:function(a){var s=e.Deferred();d.divisionId=a;var i=e.param(d),o=t+n+"?"+i,c=e.ajax({url:o,dataType:"jsonp",async:!1});return c.success(function(e){return s.resolve(e)}),c.error(function(e){return s.reject({data:{rows:[]}})}),s.promise()},getStandings:function(a){d.divisionId=a;var n=e.param(d),i=t+s+"?"+n;return e.ajax({url:i,dataType:"jsonp"})},getKnockout:function(a){d.divisionId=a;var n=e.param(d),s=t+i+"?"+n;return e.ajax({url:s,dataType:"jsonp"})}}}}(jQuery);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImhvY2tleWRhdGEtY29uZmlnLmpzIiwiY29tcG9uZW50cy9maXhlcy5qcyIsImNvbXBvbmVudHMva25vY2tvdXQuanMiLCJjb21wb25lbnRzL21vYmlsZS1tZW51LmpzIiwiY29tcG9uZW50cy9zY2hlZHVsZS1saXN0LmpzIiwiY29tcG9uZW50cy9zY2hlZHVsZS13aWRnZXQuanMiLCJjb21wb25lbnRzL3N0YW5kaW5ncy5qcyIsInNlcnZpY2VzL2hvY2tleWRhdGEtc2VydmljZS5qcyJdLCJuYW1lcyI6WyIkIiwid2luZG93IiwiSG9ja2V5RGF0YUNvbmZpZyIsImxvZ29CYXNlVXJsIiwiaG9ja2V5RGF0YUFwaVVybCIsImxlYWd1ZSIsInNwb3J0IiwicmVmZXJlciIsImhvY2tleURhdGFBcGlLZXkiLCJqUXVlcnkiLCJhZGRjbGFzcyIsImZuIiwiYWRkQ2xhc3MiLCJyZXN1bHQiLCJhcHBseSIsInRoaXMiLCJhcmd1bWVudHMiLCJyZW1vdmVDbGFzcyIsIkhzY0tub2Nrb3V0IiwiY29uZmlnIiwiZGl2aXNpb25JZCIsImRlZmF1bHRUZWFtcyIsInR5cGUiLCJyZXRyaWV2ZUVuY291bnRlck92ZXJ2aWV3VGVtcGxhdGUiLCJkYXRhIiwidGVtcGxhdGUiLCJfIiwiY29udGFpbnMiLCJ0ZWFtcyIsImlkIiwicmV0cmlldmVFbmNvdW50ZXJHYW1lVGVtcGxhdGUiLCJnYW1lIiwiZGF0ZUlzVG9CZURldGVybWluZWQiLCJidWlsZFdpZGdldCIsIiRlbGVtIiwib3V0cHV0IiwicGhhc2VzIiwiYnVpbGRLbm9ja291dFBoYXNlcyIsImFwcGVuZCIsImZhZGVJbiIsInJldHJpZXZlS25vY2tvdXRQaGFzZSIsInRvTG93ZXJDYXNlIiwicGhhc2UiLCJlYWNoIiwiZW5jb3VudGVycyIsImVuY291bnRlciIsImtleSIsInJldHJpZXZlRW5jb3VudGVyIiwib3ZlcnZpZXdEYXRhIiwiYmVzdE9mIiwicmV0cmlldmVFbmNvdW50ZXJHYW1lcyIsImdhbWVzIiwiaW5pdCIsInNlcnZpY2UiLCJIb2NrZXlEYXRhU2VydmljZSIsImdldEtub2Nrb3V0IiwidGhlbiIsInJlc3BvbnNlIiwiY29uc29sZSIsImxvZyIsImRvY3VtZW50IiwicmVhZHkiLCJ0ZW1wbGF0ZVNldHRpbmdzIiwiaW50ZXJwb2xhdGUiLCJ3aWRnZXQiLCJpbml0TW9iaWxlTWVudSIsIiRtYWluQXJlYSIsIiRtZW51QnV0dG9uIiwib24iLCJldmVudCIsInByZXZlbnREZWZhdWx0IiwiY3VycmVudFRhcmdldCIsImhhc0NsYXNzIiwiYW5pbWF0ZUxvZ28iLCJzaG93IiwiaGlkZSIsIiRsb2dvIiwiYW5pbWF0ZSIsInRvcCIsInNldFRpbWVvdXQiLCJsb2FkIiwiSG9ja2V5RGF0YVdpZGdldHNTY2hlZHVsZSIsInRlYW1JZCIsInJldHJpZXZlRW1wdHlUZW1wbGF0ZSIsInJldHJpZXZlUm93VGVtcGxhdGUiLCJsaXN0SG9sZGVyIiwiYnVpbGRSb3dzIiwicm93cyIsImVsZW1lbnQiLCJyb3ciLCJkZWxheSIsImxlbmd0aCIsInZhbHVlIiwiaG9tZVRlYW1JZCIsImF3YXlUZWFtSWQiLCJzY2hlZHVsZWRUaW1lIiwiZ2V0U2NoZWR1bGUiLCJzY2hlZHVsZXMiLCJIb2NrZXlEYXRhV2lkZ2V0c1NjaGVkdWxlU2luZ2xlIiwiY2xhc3NOYW1lIiwiaG9sZGVyIiwidG9kYXkiLCJtb21lbnQiLCJmb3VuZCIsImNoYWluIiwicmV2ZXJzZSIsIl93cmFwcGVkIiwibGFzdEdhbWUiLCJmaW5kIiwic2NoZWR1bGVkRGF0ZSIsImdhbWVTdGF0dXMiLCJnYW1lRGF0ZSIsImlzQmVmb3JlIiwibmV4dEdhbWUiLCJpc1NhbWVPckFmdGVyIiwic2NoZWR1bGVzU2luZ2xlIiwiSG9ja2V5RGF0YVdpZGdldHNTdGFuZGluZ3MiLCJyZXRyaWV2ZUhlYWRlclRlbXBsYXRlIiwiZ2V0U3RhbmRpbmdzIiwic3RhbmRpbmdzIiwiYmFzZVVybCIsInNjaGVkdWxlVXJsIiwic3RhbmRpbmdzVXJsIiwia25vY2tvdXRVcmwiLCJ1cmxQYXJhbXMiLCJhcGlLZXkiLCJkZWZlciIsIkRlZmVycmVkIiwicGFyYW1zIiwicGFyYW0iLCJ1cmwiLCJyZXF1ZXN0IiwiYWpheCIsImRhdGFUeXBlIiwiYXN5bmMiLCJzdWNjZXNzIiwicmVzb2x2ZSIsImVycm9yIiwicmVqZWN0IiwicHJvbWlzZSJdLCJtYXBwaW5ncyI6IkNBQUEsU0FBQUEsR0FDQUMsT0FBQUMsaUJBQUEsV0FDQSxPQUNBQyxZQUFBLDRDQUNBQyxpQkFBQSx1Q0FDQUMsT0FBQSxPQUNBQyxNQUFBLFlBQ0FDLFFBQUEsY0FDQUMsaUJBQUEsc0NBR0FDLFFDWEEsU0FBQVQsR0FDQSxZQUtBLElBQUFVLEdBQUFELE9BQUFFLEdBQUFDLFFBQ0FILFFBQUFFLEdBQUFDLFNBQUEsV0FDQSxHQUFBQyxHQUFBSCxFQUFBSSxNQUFBQyxLQUFBQyxVQUVBLE9BREFQLFFBQUEsZ0JBQUFRLFlBQUEsbUJBQ0FKLEdBR0FiLEVBQUEsZ0JBQUFpQixZQUFBLG9CQUVBUixRQ2ZBLFNBQUFULEdBQ0EsWUFFQSxTQUFBa0IsS0FDQSxHQUFBQyxHQUFBLEdBQUFqQixrQkFDQWtCLEVBQUEsTUFDQUMsR0FBQSxLQUFBLEtBQUEsS0FBQSxNQUNBQyxFQUFBLGFBRUFDLEVBQUEsU0FBQUMsR0FDQSxHQUFBQyxHQUFBLCtEQTRCQSxPQXZCQUEsSUFEQUMsRUFBQUMsU0FBQU4sRUFBQUcsRUFBQUksTUFBQSxHQUFBQyxJQUNBLDJDQUVBLGFBQUFWLEVBQUFoQixZQUFBLDRCQUdBc0IsR0FBQSxrTUFRQUEsR0FEQUMsRUFBQUMsU0FBQU4sRUFBQUcsRUFBQUksTUFBQSxHQUFBQyxJQUNBLDJDQUVBLGFBQUFWLEVBQUFoQixZQUFBLDRCQUdBc0IsR0FBQSx3QkFHQUEsRUFBQUMsRUFBQUQsU0FBQUEsSUFFQUQsSUFHQU0sRUFBQSxTQUFBQyxHQUNBLEdBQUFOLEdBQUEsTUFxQkEsT0FkQUEsSUFMQU0sRUFBQUMscUJBS0EsZ0RBSkEsNEZBU0FQLEdBQUEsME5BT0FBLEVBQUFDLEVBQUFELFNBQUFBLElBRUFNLElBR0FF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b0ksTUFDQUYsSUFBQUEsRUFDQUcsU0FBQSxjQUtBNUgiLCJmaWxlIjoiaHNjLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbigkKSB7XG4gICAgd2luZG93LkhvY2tleURhdGFDb25maWcgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGxvZ29CYXNlVXJsOiAnL3dwLWNvbnRlbnQvdGhlbWVzL2hzYy10aGVtZS9pbWFnZXMvdGVhbXMnLFxuICAgICAgICAgICAgaG9ja2V5RGF0YUFwaVVybDogJ2h0dHBzOi8vYXBpLmhvY2tleWRhdGEubmV0L2RhdGEvZWJlbCcsXG4gICAgICAgICAgICBsZWFndWU6ICdlYmVsJyxcbiAgICAgICAgICAgIHNwb3J0OiAnaWNlaG9ja2V5JyxcbiAgICAgICAgICAgIHJlZmVyZXI6ICd3d3cuaC1zYy5hdCcsXG4gICAgICAgICAgICBob2NrZXlEYXRhQXBpS2V5OiAnZTUyYjU3MjJjYmM4OWMzZTUxZWUwY2Q2ZTI0ODVhODEnXG4gICAgICAgIH07XG4gICAgfVxufSkoalF1ZXJ5KTtcblxuIiwiKGZ1bmN0aW9uKCQpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcblxuICAgIC8vIFN0b3AgZGl2aSBoZWFkZXIgZnJvbSBzaHJpbmtpbmcuXG4gICAgLy8gaHR0cHM6Ly9kaXZpYm9vc3Rlci5jb20vc3RvcC10aGUtZGl2aS1oZWFkZXItZnJvbS1zaHJpbmtpbmctb24tc2Nyb2xsL1xuICAgIC8vIE92ZXJyaWRlIHRoZSBhZGRDbGFzcyB0byBwcmV2ZW50IGZpeGVkIGhlYWRlciBjbGFzcyBmcm9tIGJlaW5nIGFkZGVkXG4gICAgdmFyIGFkZGNsYXNzID0galF1ZXJ5LmZuLmFkZENsYXNzO1xuICAgIGpRdWVyeS5mbi5hZGRDbGFzcyA9IGZ1bmN0aW9uKCl7XG4gICAgICAgIHZhciByZXN1bHQgPSBhZGRjbGFzcy5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgICBqUXVlcnkoJyNtYWluLWhlYWRlcicpLnJlbW92ZUNsYXNzKCdldC1maXhlZC1oZWFkZXInKTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICAkKCcjbWFpbi1oZWFkZXInKS5yZW1vdmVDbGFzcygnZXQtZml4ZWQtaGVhZGVyJyk7XG5cbn0pKGpRdWVyeSk7XG4iLCIoZnVuY3Rpb24oJCkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuXG4gICAgZnVuY3Rpb24gSHNjS25vY2tvdXQoKSB7XG4gICAgICAgIHZhciBjb25maWcgPSBuZXcgSG9ja2V5RGF0YUNvbmZpZygpO1xuICAgICAgICB2YXIgZGl2aXNpb25JZCA9ICcxMzYnO1xuICAgICAgICB2YXIgZGVmYXVsdFRlYW1zID0gWzM3NDAsIDM3NDEsIDQ5NTEsIDQ5NTJdO1xuICAgICAgICB2YXIgdHlwZSA9ICdoYWxiZmluYWxlJztcblxuICAgICAgICB2YXIgcmV0cmlldmVFbmNvdW50ZXJPdmVydmlld1RlbXBsYXRlID0gZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgdmFyIHRlbXBsYXRlID0gJzx0YWJsZSBjbGFzcz1cImhzYy1rbm9ja291dC1vdmVydmlld1wiPidcbiAgICAgICAgICAgICAgICArICc8dHI+J1xuICAgICAgICAgICAgICAgICsgJyAgPHRkIGNsYXNzPVwiaW1hZ2VcIj4nO1xuXG4gICAgICAgICAgICBpZiAoXy5jb250YWlucyhkZWZhdWx0VGVhbXMsIGRhdGEudGVhbXNbMF0uaWQpKSB7XG4gICAgICAgICAgICAgICAgdGVtcGxhdGUgKz0gJzxzdHJvbmc+e3sgdGVhbXNbMF0ubG9uZ25hbWUgfX08L3N0cm9uZz4nO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZSArPSAnPGltZyBzcmM9XCInICsgY29uZmlnLmxvZ29CYXNlVXJsICsgJy97eyB0ZWFtc1swXS5pZCB9fS5wbmdcIi8+JztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGVtcGxhdGUgKz0gJyAgPC90ZD4nXG4gICAgICAgICAgICAgICAgKyAnICA8dGQgY2xhc3M9XCJtZXRhXCI+J1xuICAgICAgICAgICAgICAgICsgJyAgICA8c3BhbiBjbGFzcz1cInNjb3JlXCI+e3sgdGVhbXNbMF0uZ2FtZXNXb24gfX0gOiB7eyB0ZWFtc1sxXS5nYW1lc1dvbiB9fTwvc3Bhbj48YnIvPidcbiAgICAgICAgICAgICAgICArICcgICAgPHNwYW4gY2xhc3M9XCJiZXN0b2ZcIj5CZXN0IG9mOiB7eyBiZXN0T2YgfX08L3NwYW4+J1xuICAgICAgICAgICAgICAgICsgJyAgPC90ZD4nXG4gICAgICAgICAgICAgICAgKyAnICA8dGQgY2xhc3M9XCJpbWFnZVwiPic7XG5cbiAgICAgICAgICAgIGlmIChfLmNvbnRhaW5zKGRlZmF1bHRUZWFtcywgZGF0YS50ZWFtc1sxXS5pZCkpIHtcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZSArPSAnPHN0cm9uZz57eyB0ZWFtc1sxXS5sb25nbmFtZSB9fTwvc3Ryb25nPic7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRlbXBsYXRlICs9ICc8aW1nIHNyYz1cIicgKyBjb25maWcubG9nb0Jhc2VVcmwgKyAnL3t7IHRlYW1zWzFdLmlkIH19LnBuZ1wiLz4nO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0ZW1wbGF0ZSArPSAnICA8L3RkPidcbiAgICAgICAgICAgICAgICArICc8L3RyPidcbiAgICAgICAgICAgICAgICArICc8L3RhYmxlPic7XG4gICAgICAgICAgICB0ZW1wbGF0ZSA9IF8udGVtcGxhdGUodGVtcGxhdGUpO1xuXG4gICAgICAgICAgICByZXR1cm4gdGVtcGxhdGUoZGF0YSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgdmFyIHJldHJpZXZlRW5jb3VudGVyR2FtZVRlbXBsYXRlID0gZnVuY3Rpb24oZ2FtZSkge1xuICAgICAgICAgICAgdmFyIHRlbXBsYXRlID0gJzx0cj4nO1xuXG4gICAgICAgICAgICBpZiAoIWdhbWUuZGF0ZUlzVG9CZURldGVybWluZWQpIHtcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZSArPSAnICA8dGQgY2xhc3M9XCJkYXRlXCIgY29sc3Bhbj1cIjJcIj4nXG4gICAgICAgICAgICAgICAgICAgICsgJyAgICB7eyBzY2hlZHVsZWREYXRlLnZhbHVlIH19IC0ge3sgc2NoZWR1bGVkVGltZSB9fSdcbiAgICAgICAgICAgICAgICAgICAgKyAnICA8L3RkPic7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRlbXBsYXRlICs9ICcgIDx0ZCBjbGFzcz1cImRhdGVcIiBjb2xzcGFuPVwiMlwiPidcbiAgICAgICAgICAgICAgICAgICAgKyAnICAgIFRCRCdcbiAgICAgICAgICAgICAgICAgICAgKyAnICA8L3RkPic7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRlbXBsYXRlICs9ICc8L3RyPjx0cj4nXG4gICAgICAgICAgICAgICAgKyAnICA8dGQgY2xhc3M9XCJ0ZWFtXCI+e3sgaG9tZVRlYW1Mb25nTmFtZSB9fSA8YnIvPiB7eyBhd2F5VGVhbUxvbmdOYW1lIH19PC90ZD4nXG4gICAgICAgICAgICAgICAgKyAnICA8dGQgY2xhc3M9XCJzY29yZVwiPidcbiAgICAgICAgICAgICAgICArICcgICAgICB7eyBnYW1lU3RhdHVzID4gMCA/IGhvbWVUZWFtU2NvcmUgOiBcIi1cIiB9fSdcbiAgICAgICAgICAgICAgICArICcgICAgICA6IHt7IGdhbWVTdGF0dXMgPiAwID8gYXdheVRlYW1TY29yZSA6IFwiLVwiIH19J1xuICAgICAgICAgICAgICAgICsgJyAgPC90ZD4nXG4gICAgICAgICAgICAgICAgKyAnPC90cj4nO1xuICAgICAgICAgICAgdGVtcGxhdGUgPSBfLnRlbXBsYXRlKHRlbXBsYXRlKTtcblxuICAgICAgICAgICAgcmV0dXJuIHRlbXBsYXRlKGdhbWUpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHZhciBidWlsZFdpZGdldCA9IGZ1bmN0aW9uKCRlbGVtLCBkYXRhKSB7XG4gICAgICAgICAgICB2YXIgb3V0cHV0ID0gJzxkaXYgY2xhc3M9XCJoc2Mta25vY2tvdXRcIj4nO1xuICAgICAgICAgICAgdmFyIHBoYXNlcyA9IGJ1aWxkS25vY2tvdXRQaGFzZXMoZGF0YSk7XG4gICAgICAgICAgICBvdXRwdXQgKz0gcGhhc2VzO1xuICAgICAgICAgICAgb3V0cHV0ICs9ICc8L2Rpdj4nO1xuXG4gICAgICAgICAgICBvdXRwdXQgPSAkKG91dHB1dCk7XG4gICAgICAgICAgICAkZWxlbS5hcHBlbmQob3V0cHV0KTtcbiAgICAgICAgICAgIG91dHB1dC5mYWRlSW4oKTtcbiAgICAgICAgfTtcblxuICAgICAgICB2YXIgYnVpbGRLbm9ja291dFBoYXNlcyA9IGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgIGlmICh0eXBlLnRvTG93ZXJDYXNlKCkgPT09ICdoYWxiZmluYWxlJykge1xuICAgICAgICAgICAgICAgIHJldHVybiByZXRyaWV2ZUtub2Nrb3V0UGhhc2UoZGF0YS5waGFzZXNbMF0pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmV0cmlldmVLbm9ja291dFBoYXNlKGRhdGEucGhhc2VzWzFdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICB2YXIgcmV0cmlldmVLbm9ja291dFBoYXNlID0gZnVuY3Rpb24ocGhhc2UpIHtcbiAgICAgICAgICAgIHZhciBvdXRwdXQgPSAnJztcbiAgICAgICAgICAgIF8uZWFjaChwaGFzZS5lbmNvdW50ZXJzLCBmdW5jdGlvbihlbmNvdW50ZXIsIGtleSkge1xuICAgICAgICAgICAgICAgIG91dHB1dCArPSByZXRyaWV2ZUVuY291bnRlcihlbmNvdW50ZXIpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHJldHVybiBvdXRwdXQ7XG4gICAgICAgIH07XG5cbiAgICAgICAgdmFyIHJldHJpZXZlRW5jb3VudGVyID0gZnVuY3Rpb24oZW5jb3VudGVyKSB7XG4gICAgICAgICAgICB2YXIgb3V0cHV0ID0gJyc7XG4gICAgICAgICAgICB2YXIgb3ZlcnZpZXdEYXRhID0ge1xuICAgICAgICAgICAgICAgIHRlYW1zOiBlbmNvdW50ZXIudGVhbXMsXG4gICAgICAgICAgICAgICAgYmVzdE9mOiBlbmNvdW50ZXIuYmVzdE9mXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBvdXRwdXQgKz0gJzxkaXYgY2xhc3M9XCJoc2Mta25vY2tvdXQtZ2FtZVwiPic7XG4gICAgICAgICAgICBvdXRwdXQgKz0gcmV0cmlldmVFbmNvdW50ZXJPdmVydmlld1RlbXBsYXRlKG92ZXJ2aWV3RGF0YSk7XG5cbiAgICAgICAgICAgIG91dHB1dCArPSAnPHRhYmxlIGNsYXNzPVwiaHNjLWtub2Nrb3V0LWxpc3RcIj4nO1xuICAgICAgICAgICAgb3V0cHV0ICs9IHJldHJpZXZlRW5jb3VudGVyR2FtZXMoZW5jb3VudGVyLmdhbWVzKTtcbiAgICAgICAgICAgIG91dHB1dCArPSAnPC90YWJsZT4nO1xuICAgICAgICAgICAgb3V0cHV0ICs9ICc8L2Rpdj4nO1xuXG4gICAgICAgICAgICByZXR1cm4gb3V0cHV0O1xuICAgICAgICB9O1xuXG4gICAgICAgIHZhciByZXRyaWV2ZUVuY291bnRlckdhbWVzID0gZnVuY3Rpb24oZ2FtZXMpIHtcbiAgICAgICAgICAgIHZhciBvdXRwdXQgPSAnJztcblxuICAgICAgICAgICAgXy5lYWNoKGdhbWVzLCBmdW5jdGlvbihnYW1lLCBrZXkpIHtcbiAgICAgICAgICAgICAgICBvdXRwdXQgKz0gcmV0cmlldmVFbmNvdW50ZXJHYW1lVGVtcGxhdGUoZ2FtZSk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgcmV0dXJuIG91dHB1dDtcbiAgICAgICAgfTtcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgaW5pdDogZnVuY3Rpb24oJGVsZW0pIHtcbiAgICAgICAgICAgICAgICB2YXIgc2VydmljZSA9IG5ldyBIb2NrZXlEYXRhU2VydmljZTtcbiAgICAgICAgICAgICAgICBkaXZpc2lvbklkID0gJGVsZW0uZGF0YSgnZGl2aXNpb24nKTtcbiAgICAgICAgICAgICAgICB0eXBlID0gJGVsZW0uZGF0YSgndHlwZScpO1xuXG4gICAgICAgICAgICAgICAgc2VydmljZS5nZXRLbm9ja291dChkaXZpc2lvbklkKS50aGVuKFxuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYnVpbGRXaWRnZXQoJGVsZW0sIHJlc3BvbnNlLmRhdGEpO1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2Vycm9yJywgcmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG5cbiAgICAkKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpIHtcbiAgICAgICAgXy50ZW1wbGF0ZVNldHRpbmdzID0ge1xuICAgICAgICAgICAgaW50ZXJwb2xhdGU6IC9cXHtcXHsoLis/KVxcfVxcfS9nXG4gICAgICAgIH07XG5cbiAgICAgICAgJCgnLmpzLWhzYy1rbm9ja291dCcpLmVhY2goZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgd2lkZ2V0ID0gbmV3IEhzY0tub2Nrb3V0O1xuICAgICAgICAgICAgd2lkZ2V0LmluaXQoJCh0aGlzKSk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xufSkoalF1ZXJ5KTtcbiIsIihmdW5jdGlvbigkKSB7XG4gICAgZnVuY3Rpb24gaW5pdE1vYmlsZU1lbnUoKSB7XG4gICAgICAgIHZhciAkbWFpbkFyZWEgPSAkKCcjZXQtbWFpbi1hcmVhJyk7XG4gICAgICAgIHZhciAkbWVudUJ1dHRvbiA9ICQoJy5tb2JpbGVfbWVudV9iYXJfdG9nZ2xlJyk7XG5cbiAgICAgICAgJG1lbnVCdXR0b24ub24oJ2NsaWNrJywgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgICAgICAgIGlmICgkKGV2ZW50LmN1cnJlbnRUYXJnZXQpLmhhc0NsYXNzKCdvcGVuZWQnKSkge1xuICAgICAgICAgICAgICAgIGFuaW1hdGVMb2dvKCk7XG4gICAgICAgICAgICAgICAgJG1haW5BcmVhLnNob3coKTtcbiAgICAgICAgICAgICAgICAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpLnJlbW92ZUNsYXNzKCdvcGVuZWQnKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgYW5pbWF0ZUxvZ28oKTtcbiAgICAgICAgICAgICAgICAkbWFpbkFyZWEuaGlkZSgpO1xuICAgICAgICAgICAgICAgICQoZXZlbnQuY3VycmVudFRhcmdldCkuYWRkQ2xhc3MoJ29wZW5lZCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBhbmltYXRlTG9nbygpIHtcbiAgICAgICAgdmFyICRsb2dvID0gJCgnLmxvZ29fY29udGFpbmVyJyk7XG5cbiAgICAgICAgJGxvZ28uYW5pbWF0ZSh7XG4gICAgICAgICAgICB0b3A6ICctNTBweCdcbiAgICAgICAgfSwgJ2Zhc3QnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICRsb2dvLmFuaW1hdGUoe1xuICAgICAgICAgICAgICAgICAgICB0b3A6ICcwcHgnXG4gICAgICAgICAgICAgICAgfSwgJ2Zhc3QnKTtcbiAgICAgICAgICAgIH0sIDUwMCk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgICQod2luZG93KS5sb2FkKGZ1bmN0aW9uKCkge1xuICAgICAgICBpbml0TW9iaWxlTWVudSgpO1xuICAgIH0pO1xufSkoalF1ZXJ5KTtcbiIsIihmdW5jdGlvbigkKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgICB2YXIgSG9ja2V5RGF0YVdpZGdldHNTY2hlZHVsZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgY29uZmlnID0gbmV3IEhvY2tleURhdGFDb25maWcoKTtcbiAgICAgICAgdmFyIGRpdmlzaW9uSWQgPSAnMTM2JztcbiAgICAgICAgdmFyIHRlYW1JZCA9ICc3MzEnO1xuXG4gICAgICAgIHZhciByZXRyaWV2ZUVtcHR5VGVtcGxhdGUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiAnPGRpdiBjbGFzcz1cIm5vLWdhbWVzXCI+J1xuICAgICAgICAgICAgICAgICsgJ0tlaW5lIFNwaWVsZSB6dXIgWmVpdC4nXG4gICAgICAgICAgICAgICAgKyAnPC9kaXY+JztcbiAgICAgICAgfTtcblxuICAgICAgICB2YXIgcmV0cmlldmVSb3dUZW1wbGF0ZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuICc8ZGl2IGNsYXNzPVwiaHNjLWdhbWUtc2NoZWR1bGUtbGlzdC1pdGVtXCI+J1xuICAgICAgICAgICAgICAgICsgJyAgPGRpdiBjbGFzcz1cInNjaGVkdWxlXCI+J1xuICAgICAgICAgICAgICAgICsgJyAgICA8ZGl2IGNsYXNzPVwiZGF0ZVwiPnt7IHNjaGVkdWxlZERhdGUudmFsdWUgfX08L2Rpdj4nXG4gICAgICAgICAgICAgICAgKyAnICAgIDxkaXYgY2xhc3M9XCJ0aW1lXCI+LSB7eyBzY2hlZHVsZWRUaW1lIH19PC9kaXY+J1xuICAgICAgICAgICAgICAgICsgJyAgPC9kaXY+J1xuICAgICAgICAgICAgICAgICsgJyAgPGRpdiBjbGFzcz1cImdhbWVcIj4nXG4gICAgICAgICAgICAgICAgKyAnICA8ZGl2IGNsYXNzPVwidGVhbXNcIj4nXG4gICAgICAgICAgICAgICAgKyAnICAgIDxkaXYgY2xhc3M9XCJ0ZWFtIHRlYW0taG9tZVwiPidcbiAgICAgICAgICAgICAgICArICcgICAgICA8ZGl2IGNsYXNzPVwidGVhbWxvZ29cIj48aW1nIHNyYz1cIicgKyBjb25maWcubG9nb0Jhc2VVcmwgKyAnL3t7IGhvbWVUZWFtSWQgfX0ucG5nXCIgLz48L2Rpdj4nXG4gICAgICAgICAgICAgICAgKyAnICAgICAgPGRpdiBjbGFzcz1cInRlYW1uYW1lXCI+e3sgaG9tZVRlYW1Mb25nTmFtZSB9fTwvZGl2PidcbiAgICAgICAgICAgICAgICArICcgICAgPC9kaXY+J1xuICAgICAgICAgICAgICAgICsgJyAgICA8ZGl2IGNsYXNzPVwiZGl2aWRlclwiPjwvZGl2PidcbiAgICAgICAgICAgICAgICArICcgICAgPGRpdiBjbGFzcz1cInRlYW0gdGVhbS1hd2F5XCI+J1xuICAgICAgICAgICAgICAgICsgJyAgICAgIDxkaXYgY2xhc3M9XCJ0ZWFtbG9nb1wiPjxpbWcgc3JjPVwiJyArIGNvbmZpZy5sb2dvQmFzZVVybCArICcve3sgYXdheVRlYW1JZCB9fS5wbmdcIiAvPjwvZGl2PidcbiAgICAgICAgICAgICAgICArICcgICAgICA8ZGl2IGNsYXNzPVwidGVhbW5hbWVcIj57eyBhd2F5VGVhbUxvbmdOYW1lIH19PC9kaXY+J1xuICAgICAgICAgICAgICAgICsgJyAgICA8L2Rpdj4nXG4gICAgICAgICAgICAgICAgKyAnICA8L2Rpdj4nXG4gICAgICAgICAgICAgICAgKyAnICA8ZGl2IGNsYXNzPVwic2NvcmVzXCI+J1xuICAgICAgICAgICAgICAgICsgJyAgICAgIHt7IGdhbWVTdGF0dXMgPiAwID8gaG9tZVRlYW1TY29yZSA6IFwiLVwiIH19J1xuICAgICAgICAgICAgICAgICsgJyAgICAgIDoge3sgZ2FtZVN0YXR1cyA+IDAgPyBhd2F5VGVhbVNjb3JlIDogXCItXCIgfX0nXG4gICAgICAgICAgICAgICAgKyAnICA8L2Rpdj4nXG4gICAgICAgICAgICAgICAgKyAnICA8L2Rpdj4nXG4gICAgICAgICAgICAgICAgKyAnPC9kaXY+JztcbiAgICAgICAgfTtcblxuICAgICAgICB2YXIgYnVpbGRXaWRnZXQgPSBmdW5jdGlvbigkZWxlbSwgZGF0YSkge1xuICAgICAgICAgICAgdmFyIGxpc3RIb2xkZXIgPSAkKCc8ZGl2IGNsYXNzPVwiaHNjLWdhbWUtc2NoZWR1bGUtbGlzdFwiPjwvZGl2PicpO1xuICAgICAgICAgICAgJGVsZW0uYXBwZW5kKGxpc3RIb2xkZXIpO1xuICAgICAgICAgICAgYnVpbGRSb3dzKGRhdGEucm93cywgbGlzdEhvbGRlcik7XG4gICAgICAgIH07XG5cbiAgICAgICAgdmFyIGJ1aWxkUm93cyA9IGZ1bmN0aW9uKHJvd3MsIGVsZW1lbnQpIHtcbiAgICAgICAgICAgIHZhciB0ZW1wbGF0ZSA9IF8udGVtcGxhdGUocmV0cmlldmVSb3dUZW1wbGF0ZSgpKTtcbiAgICAgICAgICAgIHZhciBvdXRwdXQgPSAnJztcbiAgICAgICAgICAgIHZhciByb3cgPSAnJztcbiAgICAgICAgICAgIHZhciBkZWxheSA9IDE7XG5cbiAgICAgICAgICAgIGlmIChyb3dzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHRlbXBsYXRlID0gJChyZXRyaWV2ZUVtcHR5VGVtcGxhdGUoKSk7XG4gICAgICAgICAgICAgICAgZWxlbWVudC5hcHBlbmQodGVtcGxhdGUpO1xuICAgICAgICAgICAgICAgIHRlbXBsYXRlLmhpZGUoKS5kZWxheShkZWxheSAqIGtleSkuZmFkZUluKCk7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgXy5lYWNoKHJvd3MsIGZ1bmN0aW9uKHZhbHVlLCBrZXkpIHtcbiAgICAgICAgICAgICAgICBpZiAodmFsdWUuaG9tZVRlYW1JZCA9PT0gdGVhbUlkIHx8IHZhbHVlLmF3YXlUZWFtSWQgPT09IHRlYW1JZCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUuc2NoZWR1bGVkVGltZSA9PT0gJzAwOjAwJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUuc2NoZWR1bGVkVGltZSA9ICdrLkEuJztcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIHJvdyA9ICQodGVtcGxhdGUodmFsdWUpKTtcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5hcHBlbmQocm93KTtcbiAgICAgICAgICAgICAgICAgICAgcm93LmhpZGUoKS5kZWxheShkZWxheSAqIGtleSkuZmFkZUluKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBpbml0OiBmdW5jdGlvbigkZWxlbSkge1xuICAgICAgICAgICAgICAgIHZhciBzZXJ2aWNlID0gbmV3IEhvY2tleURhdGFTZXJ2aWNlO1xuICAgICAgICAgICAgICAgIGRpdmlzaW9uSWQgPSAkZWxlbS5kYXRhKCdkaXZpc2lvbicpO1xuICAgICAgICAgICAgICAgIHRlYW1JZCA9ICRlbGVtLmRhdGEoJ3RlYW0nKTtcblxuICAgICAgICAgICAgICAgIHNlcnZpY2UuZ2V0U2NoZWR1bGUoZGl2aXNpb25JZCkudGhlbihcbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24ocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1aWxkV2lkZ2V0KCRlbGVtLCByZXNwb25zZS5kYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24ocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdlcnJvcicsIHJlc3BvbnNlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKSB7XG4gICAgICAgIF8udGVtcGxhdGVTZXR0aW5ncyA9IHtcbiAgICAgICAgICAgIGludGVycG9sYXRlOiAvXFx7XFx7KC4rPylcXH1cXH0vZ1xuICAgICAgICB9O1xuXG4gICAgICAgICQoJy5qcy13aWRnZXQtc2NoZWR1bGUnKS5lYWNoKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIHNjaGVkdWxlcyA9IG5ldyBIb2NrZXlEYXRhV2lkZ2V0c1NjaGVkdWxlO1xuICAgICAgICAgICAgc2NoZWR1bGVzLmluaXQoJCh0aGlzKSk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xufSkoalF1ZXJ5KTtcbiIsIihmdW5jdGlvbigkKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgdmFyIEhvY2tleURhdGFXaWRnZXRzU2NoZWR1bGVTaW5nbGUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGNvbmZpZyA9IG5ldyBIb2NrZXlEYXRhQ29uZmlnKCk7XG4gICAgICAgIHZhciBkaXZpc2lvbklkID0gJzEzNic7XG4gICAgICAgIHZhciB0ZWFtSWQgPSAnNzMxJztcbiAgICAgICAgdmFyIHR5cGUgPSAnbGFzdCc7XG5cbiAgICAgICAgdmFyIHJldHJpZXZlRW1wdHlUZW1wbGF0ZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuICc8ZGl2IGNsYXNzPVwibm8tZ2FtZXNcIj4nXG4gICAgICAgICAgICAgICAgKyAnS2VpbmUgU3BpZWxlIHp1ciBaZWl0LidcbiAgICAgICAgICAgICAgICArICc8L2Rpdj4nO1xuICAgICAgICB9O1xuXG4gICAgICAgIHZhciByZXRyaWV2ZVJvd1RlbXBsYXRlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgY2xhc3NOYW1lID0gJ2xhc3QtZ2FtZS13aWRnZXQnO1xuXG4gICAgICAgICAgICBpZiAodHlwZSA9PT0gJ25leHQnKSB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lID0gJ25leHQtZ2FtZS13aWRnZXQnO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gJzxkaXYgY2xhc3M9XCJoc2MtZ2FtZS1zY2hlZHVsZS13aWRnZXQgJyArIGNsYXNzTmFtZSArICdcIj4nXG4gICAgICAgICAgICAgICAgKyAnPGRpdiBjbGFzcz1cInNjaGVkdWxlLXdpZGdldC1ob2xkZXJcIj4nXG4gICAgICAgICAgICAgICAgKyAnICA8ZGl2IGNsYXNzPVwiaW1hZ2UgaW1hZ2UtaG9tZS10ZWFtXCI+J1xuICAgICAgICAgICAgICAgICsgJyAgICA8aW1nIHNyYz1cIicgKyBjb25maWcubG9nb0Jhc2VVcmwgKyAnL3t7IGhvbWVUZWFtSWQgfX0ucG5nXCIgLz4nXG4gICAgICAgICAgICAgICAgKyAnICA8L2Rpdj4nXG4gICAgICAgICAgICAgICAgKyAnICA8ZGl2IGNsYXNzPVwibWV0YVwiPidcbiAgICAgICAgICAgICAgICArICcgICAgPGRpdiBjbGFzcz1cImRhdGVcIj57eyBzY2hlZHVsZWREYXRlLnZhbHVlIH19PC9kaXY+J1xuICAgICAgICAgICAgICAgICsgJyAgICA8ZGl2IGNsYXNzPVwidGltZVwiPnt7IHNjaGVkdWxlZFRpbWUgfX08L2Rpdj4nXG4gICAgICAgICAgICAgICAgKyAnICAgIDxkaXYgY2xhc3M9XCJzY29yZXNcIj57eyBob21lVGVhbVNjb3JlIH19Ont7IGF3YXlUZWFtU2NvcmUgfX08L2Rpdj4nXG4gICAgICAgICAgICAgICAgKyAnICA8L2Rpdj4nXG4gICAgICAgICAgICAgICAgKyAnICA8ZGl2IGNsYXNzPVwiaW1hZ2UgaW1hZ2UtYXdheS10ZWFtXCI+J1xuICAgICAgICAgICAgICAgICsgJyAgICA8aW1nIHNyYz1cIicgKyBjb25maWcubG9nb0Jhc2VVcmwgKyAnL3t7IGF3YXlUZWFtSWQgfX0ucG5nXCIgLz4nXG4gICAgICAgICAgICAgICAgKyAnICA8L2Rpdj4nXG4gICAgICAgICAgICAgICAgKyAnPC9kaXY+J1xuICAgICAgICAgICAgICAgICsgJyAgPGRpdiBjbGFzcz1cInRlYW1zXCI+J1xuICAgICAgICAgICAgICAgICsgJyAgICA8c3BhbiBjbGFzcz1cInRlYW0gaG9tZS10ZWFtXCI+e3sgaG9tZVRlYW1Mb25nTmFtZSB9fTwvc3Bhbj4nXG4gICAgICAgICAgICAgICAgKyAnICAgIDxzcGFuIGNsYXNzPVwiZGl2aWRlclwiPi08L3NwYW4+J1xuICAgICAgICAgICAgICAgICsgJyAgICA8c3BhbiBjbGFzcz1cInRlYW0gYXdheS10ZWFtXCI+e3sgYXdheVRlYW1Mb25nTmFtZSB9fTwvc3Bhbj4nXG4gICAgICAgICAgICAgICAgKyAnICA8L2Rpdj4nXG4gICAgICAgICAgICAgICAgKyAnPC9kaXY+JztcbiAgICAgICAgfTtcblxuICAgICAgICB2YXIgYnVpbGRXaWRnZXQgPSBmdW5jdGlvbigkZWxlbSwgZGF0YSkge1xuICAgICAgICAgICAgdmFyIGhvbGRlciA9ICQoJzxkaXYgY2xhc3M9XCJqcy1zY2hlZHVsZS13aWRnZXRcIj48L2Rpdj4nKTtcbiAgICAgICAgICAgICRlbGVtLmFwcGVuZChob2xkZXIpO1xuICAgICAgICAgICAgYnVpbGRSb3dzKGRhdGEucm93cywgaG9sZGVyKTtcbiAgICAgICAgfTtcblxuICAgICAgICB2YXIgYnVpbGRSb3dzID0gZnVuY3Rpb24ocm93cywgZWxlbWVudCkge1xuICAgICAgICAgICAgdmFyIG91dHB1dCA9ICcnO1xuICAgICAgICAgICAgdmFyIHRlbXBsYXRlID0gXy50ZW1wbGF0ZShyZXRyaWV2ZVJvd1RlbXBsYXRlKCkpO1xuICAgICAgICAgICAgdmFyIHRvZGF5ID0gbW9tZW50KCk7XG4gICAgICAgICAgICB2YXIgbGltaXQgPSAxO1xuICAgICAgICAgICAgdmFyIGZvdW5kID0gZmFsc2U7XG5cbiAgICAgICAgICAgIGlmICh0eXBlID09PSAnbGFzdCcpIHtcbiAgICAgICAgICAgICAgICByb3dzID0gXy5jaGFpbihyb3dzKS5yZXZlcnNlKCkuX3dyYXBwZWQ7XG4gICAgICAgICAgICAgICAgdmFyIGxhc3RHYW1lID0gXy5maW5kKHJvd3MsIGZ1bmN0aW9uKHJvdykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoKHJvdy5ob21lVGVhbUlkID09PSB0ZWFtSWQgfHwgcm93LmF3YXlUZWFtSWQgPT09IHRlYW1JZClcbiAgICAgICAgICAgICAgICAgICAgICAgICYmIChyb3cuc2NoZWR1bGVkRGF0ZSAmJiByb3cuc2NoZWR1bGVkRGF0ZS52YWx1ZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICYmIHJvdy5nYW1lU3RhdHVzID4gMFxuICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBnYW1lRGF0ZSA9IG1vbWVudChyb3cuc2NoZWR1bGVkRGF0ZS52YWx1ZSwgJ0RELk1NLllZWVknKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGdhbWVEYXRlLmlzQmVmb3JlKHRvZGF5KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByb3c7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIGlmIChsYXN0R2FtZSkge1xuICAgICAgICAgICAgICAgICAgICBmb3VuZCA9IHRydWU7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGxhc3RHYW1lLnNjaGVkdWxlZFRpbWUgPT09ICcwMDowMCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhc3RHYW1lLnNjaGVkdWxlZFRpbWUgPSAnay5BLic7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBvdXRwdXQgKz0gdGVtcGxhdGUobGFzdEdhbWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHR5cGUgPT09ICduZXh0Jykge1xuICAgICAgICAgICAgICAgIHZhciBuZXh0R2FtZSA9IF8uZmluZChyb3dzLCBmdW5jdGlvbihyb3cpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKChyb3cuaG9tZVRlYW1JZCA9PT0gdGVhbUlkIHx8IHJvdy5hd2F5VGVhbUlkID09PSB0ZWFtSWQpXG4gICAgICAgICAgICAgICAgICAgICAgICAmJiAocm93LnNjaGVkdWxlZERhdGUgJiYgcm93LnNjaGVkdWxlZERhdGUudmFsdWUpXG4gICAgICAgICAgICAgICAgICAgICAgICAmJiByb3cuZ2FtZVN0YXR1cyA9PT0gMFxuICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBnYW1lRGF0ZSA9IG1vbWVudChyb3cuc2NoZWR1bGVkRGF0ZS52YWx1ZSwgJ0RELk1NLllZWVknKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGdhbWVEYXRlLmlzU2FtZU9yQWZ0ZXIodG9kYXksICdkYXknKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByb3c7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIGlmIChuZXh0R2FtZSkge1xuICAgICAgICAgICAgICAgICAgICBmb3VuZCA9IHRydWU7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKG5leHRHYW1lLnNjaGVkdWxlZFRpbWUgPT09ICcwMDowMCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5leHRHYW1lLnNjaGVkdWxlZFRpbWUgPSAnay5BLic7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBvdXRwdXQgKz0gdGVtcGxhdGUobmV4dEdhbWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGZvdW5kKSB7XG4gICAgICAgICAgICAgICAgb3V0cHV0ID0gJChvdXRwdXQpO1xuICAgICAgICAgICAgICAgIGVsZW1lbnQuYXBwZW5kKG91dHB1dCk7XG4gICAgICAgICAgICAgICAgb3V0cHV0LmhpZGUoKS5kZWxheSgnc2xvdycpLmZhZGVJbigpO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRlbXBsYXRlID0gJChyZXRyaWV2ZUVtcHR5VGVtcGxhdGUoKSk7XG4gICAgICAgICAgICBlbGVtZW50LmFwcGVuZCh0ZW1wbGF0ZSk7XG4gICAgICAgICAgICB0ZW1wbGF0ZS5oaWRlKCkuZGVsYXkoJ3Nsb3cnKS5mYWRlSW4oKTtcblxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGluaXQ6IGZ1bmN0aW9uKCRlbGVtKSB7XG4gICAgICAgICAgICAgICAgdmFyIHNlcnZpY2UgPSBuZXcgSG9ja2V5RGF0YVNlcnZpY2U7XG4gICAgICAgICAgICAgICAgZGl2aXNpb25JZCA9ICRlbGVtLmRhdGEoJ2RpdmlzaW9uJyk7XG4gICAgICAgICAgICAgICAgdGVhbUlkID0gJGVsZW0uZGF0YSgndGVhbScpO1xuICAgICAgICAgICAgICAgIHR5cGUgPSAkZWxlbS5kYXRhKCd0eXBlJyk7XG5cbiAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IHNlcnZpY2UuZ2V0U2NoZWR1bGUoZGl2aXNpb25JZCkudGhlbihcbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24ocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1aWxkV2lkZ2V0KCRlbGVtLCByZXNwb25zZS5kYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24ocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdlcnJvcicsIHJlc3BvbnNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGJ1aWxkV2lkZ2V0KCRlbGVtLCBKU09OLnBhcnNlKHJlc3BvbnNlLmRhdGEpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKSB7XG4gICAgICAgIF8udGVtcGxhdGVTZXR0aW5ncyA9IHtcbiAgICAgICAgICAgIGludGVycG9sYXRlOiAvXFx7XFx7KC4rPylcXH1cXH0vZ1xuICAgICAgICB9O1xuXG4gICAgICAgICQoJy5qcy13aWRnZXQtc2NoZWR1bGUtc2luZ2xlJykuZWFjaChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciBzY2hlZHVsZXNTaW5nbGUgPSBuZXcgSG9ja2V5RGF0YVdpZGdldHNTY2hlZHVsZVNpbmdsZTtcbiAgICAgICAgICAgIHNjaGVkdWxlc1NpbmdsZS5pbml0KCQodGhpcykpO1xuICAgICAgICB9KTtcbiAgICB9KTtcbn0pKGpRdWVyeSk7XG4iLCIoZnVuY3Rpb24oJCkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuXG4gICAgZnVuY3Rpb24gSG9ja2V5RGF0YVdpZGdldHNTdGFuZGluZ3MoKSB7XG4gICAgICAgIHZhciBjb25maWcgPSBuZXcgSG9ja2V5RGF0YUNvbmZpZygpO1xuICAgICAgICB2YXIgZGl2aXNpb25JZCA9ICcxMzYnO1xuICAgICAgICB2YXIgdGVhbUlkID0gJzczMSc7XG5cbiAgICAgICAgdmFyIHJldHJpZXZlSGVhZGVyVGVtcGxhdGUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiAnPHRyIGNsYXNzPVwiaHNjLXN0YW5kaW5ncy1oZWFkZXJcIj4nXG4gICAgICAgICAgICAgICAgKyAnPHRkIGNsYXNzPVwicmFua1wiPiM8L3RkPidcbiAgICAgICAgICAgICAgICArICc8dGQgY2xhc3M9XCJpbWFnZVwiPjwvdGQ+J1xuICAgICAgICAgICAgICAgICsgJzx0ZCBjbGFzcz1cInRlYW1cIj5UZWFtPC90ZD4nXG4gICAgICAgICAgICAgICAgKyAnPHRkIGNsYXNzPVwiaW5mbyB0ZC1ncFwiPlNwPC90ZD4nXG4gICAgICAgICAgICAgICAgKyAnPHRkIGNsYXNzPVwiaW5mbyB0ZC13XCI+UzwvdGQ+J1xuICAgICAgICAgICAgICAgICsgJzx0ZCBjbGFzcz1cImluZm8gdGQtbFwiPk48L3RkPidcbiAgICAgICAgICAgICAgICArICc8dGQgY2xhc3M9XCJpbmZvIHRkLW90d1wiPk9UUzwvdGQ+J1xuICAgICAgICAgICAgICAgICsgJzx0ZCBjbGFzcz1cImluZm8gdGQtb3RsXCI+T1ROPC90ZD4nXG4gICAgICAgICAgICAgICAgKyAnPHRkIGNsYXNzPVwiaW5mbyB0ZC1nb2Fsc1wiPlRvcmU8L3RkPidcbiAgICAgICAgICAgICAgICArICc8dGQgY2xhc3M9XCJpbmZvIHRkLWdkXCI+VEQ8L3RkPidcbiAgICAgICAgICAgICAgICArICc8dGQgY2xhc3M9XCJpbmZvIHRkLXB0c1wiPlBLVDwvdGQ+J1xuICAgICAgICAgICAgICAgICsgJzwvdHI+JztcbiAgICAgICAgfTtcblxuICAgICAgICB2YXIgcmV0cmlldmVSb3dUZW1wbGF0ZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuICc8dHIgY2xhc3M9XCJoc2Mtc3RhbmRpbmdzLXJvd1wiPidcbiAgICAgICAgICAgICAgICArICc8dGQgY2xhc3M9XCJyYW5rXCI+e3sgdGFibGVSYW5rIH19PC90ZD4nXG4gICAgICAgICAgICAgICAgKyAnPHRkIGNsYXNzPVwiaW1hZ2VcIj48aW1nIHNyYz1cIicgKyBjb25maWcubG9nb0Jhc2VVcmwgKyAnL3t7IGlkIH19LnBuZ1wiIC8+PC90ZD4nXG4gICAgICAgICAgICAgICAgKyAnPHRkIGNsYXNzPVwidGVhbVwiPnt7IHRlYW1Mb25nbmFtZSB9fTwvdGQ+J1xuICAgICAgICAgICAgICAgICsgJzx0ZCBjbGFzcz1cImluZm8gdGQtZ3BcIj57eyBnYW1lc1BsYXllZCB9fTwvdGQ+J1xuICAgICAgICAgICAgICAgICsgJzx0ZCBjbGFzcz1cImluZm8gdGQtd1wiPnt7IGdhbWVzV29uIH19PC90ZD4nXG4gICAgICAgICAgICAgICAgKyAnPHRkIGNsYXNzPVwiaW5mbyB0ZC1sXCI+e3sgZ2FtZXNMb3N0IH19PC90ZD4nXG4gICAgICAgICAgICAgICAgKyAnPHRkIGNsYXNzPVwiaW5mbyB0ZC1vdHdcIj57eyBnYW1lc1dvbkluT3QgfX08L3RkPidcbiAgICAgICAgICAgICAgICArICc8dGQgY2xhc3M9XCJpbmZvIHRkLW90bFwiPnt7IGdhbWVzTG9zdEluT3QgfX08L3RkPidcbiAgICAgICAgICAgICAgICArICc8dGQgY2xhc3M9XCJpbmZvIHRkLWdvYWxzXCI+e3sgZ29hbHNGb3IgfX06e3sgZ29hbHNBZ2FpbnN0IH19PC90ZD4nXG4gICAgICAgICAgICAgICAgKyAnPHRkIGNsYXNzPVwiaW5mbyB0ZC1nZFwiPnt7IGdvYWxEaWZmZXJlbmNlIH19PC90ZD4nXG4gICAgICAgICAgICAgICAgKyAnPHRkIGNsYXNzPVwiaW5mbyB0ZC1wdHNcIj57eyBwb2ludHMgfX08L3RkPidcbiAgICAgICAgICAgICAgICArICc8L3RyPic7XG4gICAgICAgIH07XG5cbiAgICAgICAgdmFyIGJ1aWxkV2lkZ2V0ID0gZnVuY3Rpb24oJGVsZW0sIGRhdGEpIHtcbiAgICAgICAgICAgIHZhciBvdXRwdXQgPSAnPHRhYmxlIGNsYXNzPVwiaHNjLXRhYmxlIGhzYy1zdGFuZGluZ3NcIj4nO1xuICAgICAgICAgICAgdmFyIHJvd3MgPSBidWlsZFJvd3MoZGF0YS5yb3dzKTtcbiAgICAgICAgICAgIG91dHB1dCArPSByZXRyaWV2ZUhlYWRlclRlbXBsYXRlKCk7XG4gICAgICAgICAgICBvdXRwdXQgKz0gcm93cztcbiAgICAgICAgICAgIG91dHB1dCArPSAnPC90YWJsZT4nO1xuXG4gICAgICAgICAgICBvdXRwdXQgPSAkKG91dHB1dCk7XG4gICAgICAgICAgICAkZWxlbS5hcHBlbmQob3V0cHV0KTtcbiAgICAgICAgICAgIG91dHB1dC5mYWRlSW4oKTtcbiAgICAgICAgfTtcblxuICAgICAgICB2YXIgYnVpbGRSb3dzID0gZnVuY3Rpb24ocm93cykge1xuICAgICAgICAgICAgdmFyIG91dHB1dCA9ICcnO1xuICAgICAgICAgICAgdmFyIHRlbXBsYXRlID0gXy50ZW1wbGF0ZShyZXRyaWV2ZVJvd1RlbXBsYXRlKCkpO1xuXG4gICAgICAgICAgICBfLmVhY2gocm93cywgZnVuY3Rpb24odmFsdWUsIGtleSkge1xuICAgICAgICAgICAgICAgIG91dHB1dCArPSB0ZW1wbGF0ZSh2YWx1ZSk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgcmV0dXJuIG91dHB1dDtcbiAgICAgICAgfTtcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgaW5pdDogZnVuY3Rpb24oJGVsZW0pIHtcbiAgICAgICAgICAgICAgICB2YXIgc2VydmljZSA9IG5ldyBIb2NrZXlEYXRhU2VydmljZTtcbiAgICAgICAgICAgICAgICBkaXZpc2lvbklkID0gJGVsZW0uZGF0YSgnZGl2aXNpb24nKTtcblxuICAgICAgICAgICAgICAgIHNlcnZpY2UuZ2V0U3RhbmRpbmdzKGRpdmlzaW9uSWQpLnRoZW4oXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBidWlsZFdpZGdldCgkZWxlbSwgcmVzcG9uc2UuZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnZXJyb3InLCByZXNwb25zZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcblxuICAgICQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCkge1xuICAgICAgICBfLnRlbXBsYXRlU2V0dGluZ3MgPSB7XG4gICAgICAgICAgICBpbnRlcnBvbGF0ZTogL1xce1xceyguKz8pXFx9XFx9L2dcbiAgICAgICAgfTtcblxuICAgICAgICAkKCcuanMtd2lkZ2V0LXN0YW5kaW5ncycpLmVhY2goZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgc3RhbmRpbmdzID0gbmV3IEhvY2tleURhdGFXaWRnZXRzU3RhbmRpbmdzO1xuICAgICAgICAgICAgc3RhbmRpbmdzLmluaXQoJCh0aGlzKSk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xufSkoalF1ZXJ5KTtcbiIsIihmdW5jdGlvbigkKSB7XG4gICAgd2luZG93LkhvY2tleURhdGFTZXJ2aWNlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIFwidXNlIHN0cmljdFwiO1xuXG4gICAgICAgIHZhciBjb25maWcgPSBuZXcgSG9ja2V5RGF0YUNvbmZpZygpO1xuICAgICAgICB2YXIgYmFzZVVybCA9IGNvbmZpZy5ob2NrZXlEYXRhQXBpVXJsO1xuICAgICAgICB2YXIgc2NoZWR1bGVVcmwgPSAnL1NjaGVkdWxlJztcbiAgICAgICAgdmFyIHN0YW5kaW5nc1VybCA9ICcvU3RhbmRpbmdzJztcbiAgICAgICAgdmFyIGtub2Nrb3V0VXJsID0gJy9Lbm9ja291dFN0YWdlJztcblxuICAgICAgICB2YXIgdXJsUGFyYW1zID0ge1xuICAgICAgICAgICAgYXBpS2V5OiBjb25maWcuaG9ja2V5RGF0YUFwaUtleSxcbiAgICAgICAgICAgIGRpdmlzaW9uSWQ6ICcxMzYnLFxuICAgICAgICAgICAgbGVhZ3VlOiBjb25maWcubGVhZ3VlLFxuICAgICAgICAgICAgc3BvcnQ6IGNvbmZpZy5zcG9ydCxcbiAgICAgICAgICAgIHJlZmVyZXI6IGNvbmZpZy5yZWZlcmVyXG4gICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGdldFNjaGVkdWxlOiBmdW5jdGlvbihkaXZpc2lvbklkKSB7XG4gICAgICAgICAgICAgICAgdmFyIGRlZmVyID0gJC5EZWZlcnJlZCgpO1xuXG4gICAgICAgICAgICAgICAgdXJsUGFyYW1zLmRpdmlzaW9uSWQgPSBkaXZpc2lvbklkO1xuICAgICAgICAgICAgICAgIHZhciBwYXJhbXMgPSAkLnBhcmFtKHVybFBhcmFtcyk7XG4gICAgICAgICAgICAgICAgdmFyIHVybCA9IGJhc2VVcmwgKyBzY2hlZHVsZVVybCArICc/JyArIHBhcmFtcztcbiAgICAgICAgICAgICAgICB2YXIgcmVxdWVzdCA9ICQuYWpheCh7XG4gICAgICAgICAgICAgICAgICAgIHVybDogdXJsLFxuICAgICAgICAgICAgICAgICAgICBkYXRhVHlwZTogXCJqc29ucFwiLFxuICAgICAgICAgICAgICAgICAgICBhc3luYzogZmFsc2VcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIHJlcXVlc3Quc3VjY2VzcyhmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZGVmZXIucmVzb2x2ZShyZXNwb25zZSk7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICByZXF1ZXN0LmVycm9yKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBkZWZlci5yZWplY3Qoe1xuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvd3M6IFtdXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIGRlZmVyLnByb21pc2UoKTtcblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGdldFN0YW5kaW5nczogZnVuY3Rpb24oZGl2aXNpb25JZCkge1xuICAgICAgICAgICAgICAgIHVybFBhcmFtcy5kaXZpc2lvbklkID0gZGl2aXNpb25JZDtcbiAgICAgICAgICAgICAgICB2YXIgcGFyYW1zID0gJC5wYXJhbSh1cmxQYXJhbXMpO1xuICAgICAgICAgICAgICAgIHZhciB1cmwgPSBiYXNlVXJsICsgc3RhbmRpbmdzVXJsICsgJz8nICsgcGFyYW1zO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuICQuYWpheCh7XG4gICAgICAgICAgICAgICAgICAgIHVybDogdXJsLFxuICAgICAgICAgICAgICAgICAgICBkYXRhVHlwZTogXCJqc29ucFwiXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZ2V0S25vY2tvdXQ6IGZ1bmN0aW9uKGRpdmlzaW9uSWQpIHtcbiAgICAgICAgICAgICAgICB1cmxQYXJhbXMuZGl2aXNpb25JZCA9IGRpdmlzaW9uSWQ7XG4gICAgICAgICAgICAgICAgdmFyIHBhcmFtcyA9ICQucGFyYW0odXJsUGFyYW1zKTtcbiAgICAgICAgICAgICAgICB2YXIgdXJsID0gYmFzZVVybCArIGtub2Nrb3V0VXJsICsgJz8nICsgcGFyYW1zO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuICQuYWpheCh7XG4gICAgICAgICAgICAgICAgICAgIHVybDogdXJsLFxuICAgICAgICAgICAgICAgICAgICBkYXRhVHlwZTogXCJqc29ucFwiXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xufSkoalF1ZXJ5KTtcbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
