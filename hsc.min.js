!function(e){window.HockeyDataService=function(){"use strict";var a="http://api.hockeydata.net/data/ebel",t="/Schedule",n="/Standings",s="/KnockoutStage",i={apiKey:"e52b5722cbc89c3e51ee0cd6e2485a81",divisionId:"136",league:"ebel",sport:"icehockey",referer:"www.h-sc.at"};return{getSchedule:function(n){var s=e.Deferred();i.divisionId=n;var c=e.param(i),d=a+t+"?"+c,o=e.ajax({url:d,dataType:"jsonp",async:!1});return o.success(function(e){return e.data.rows.push({id:"d9e6d977-e3bd-4d81-9788-722cdb9f669b",divisionId:136,divisionName:"VEHL 1",scheduledDate:{sortValue:14451804e5,value:"18.10.2019",shortValue:"18.10.",longValue:"18. Oktober 2015"},scheduledTime:"17:00",awayTeamId:728,awayTeamLongName:"EHC Megafit Ice Tigers Dornbirn",awayTeamShortName:"ITD",awayTeamFlavourname:"EHC Megafit Ice Tigers Dornbirn",homeTeamId:731,homeTeamLongName:"SC Hohenems 2",homeTeamShortName:"HO2",homeTeamFlavourname:"SC Hohenems 2",homeTeamScore:null,awayTeamScore:null}),s.resolve(e)}),o.error(function(e){return s.reject({data:{rows:[]}})}),s.promise()},getStandings:function(t){i.divisionId=t;var s=e.param(i),c=a+n+"?"+s;return e.ajax({url:c,dataType:"jsonp"})},getKnockout:function(t){i.divisionId=t;var n=e.param(i),c=a+s+"?"+n;return e.ajax({url:c,dataType:"jsonp"})}}}}(jQuery),function(e){"use strict";var a=jQuery.fn.addClass;jQuery.fn.addClass=function(){var e=a.apply(this,arguments);return jQuery("#main-header").removeClass("et-fixed-header"),e},e("#main-header").removeClass("et-fixed-header")}(jQuery),function(e){"use strict";function a(){var e="/wp-content/themes/hsc-theme/images/teams",a="136",t="halbfinale",n=function(a){var t='<table class="hsc-knockout-overview"><tr>  <td class="image">    <img src="'+e+'/{{ teams[0].id }}.png" />  </td>  <td class="meta">    <span class="score">{{ teams[0].gamesWon }} : {{ teams[1].gamesWon }}</span><br/>    <span class="bestof">Best of: {{ bestOf }}</span>  </td>  <td class="image">    <img src="'+e+'/{{ teams[1].id }}.png" />  </td></tr></table>';return(t=_.template(t))(a)},s=function(e){var a='<tr>  <td class="date" colspan="2">    {{ scheduledDate.value }} - {{ scheduledTime }}  </td></tr><tr>  <td class="team">{{ homeTeamLongName }} <br/> {{ awayTeamLongName }}</td>  <td class="score">{{ homeTeamScore }} : {{ awayTeamScore }}</td></tr>';return(a=_.template(a))(e)},i=function(e,a){var t='<div class="hsc-knockout">',n=c(a);t+=n,t+="</div>",e.html(t)},c=function(e){return d("halbfinale"===t.toLowerCase()?e.phases[0]:e.phases[1])},d=function(e){var a="";return _.each(e.encounters,function(e,t){a+=o(e)}),a},o=function(e){var a="",t={teams:e.teams,bestOf:e.bestOf};return a+='<div class="hsc-knockout-game">',a+=n(t),a+='<table class="hsc-knockout-list">',a+=r(e.games),a+="</table>",a+="</div>"},r=function(e){var a="";return _.each(e,function(e,t){a+=s(e)}),a};return{init:function(e){var n=new HockeyDataService;a=e.data("division"),t=e.data("type"),n.getKnockout(a).then(function(a){i(e,a.data)},function(e){console.log("error",e)})}}}e(document).ready(function(){_.templateSettings={interpolate:/\{\{(.+?)\}\}/g},e(".js-hsc-knockout").each(function(){var t=new a;t.init(e(this))})})}(jQuery),function(e){function a(){var a=e("#et-main-area"),t=e(".mobile_menu_bar_toggle");t.on("click",function(t){e(t.currentTarget).hasClass("opened")?(a.show(),e(t.currentTarget).removeClass("opened")):(a.hide(),e(t.currentTarget).addClass("opened"))})}e(window).load(function(){a()})}(jQuery),function(e){"use strict";var a=function(){var e="/wp-content/themes/hsc-theme/images/teams",a="136",t="731",n=function(){return'<div class="hsc-game-schedule-list-item">  <div class="schedule">    <div class="date">{{ scheduledDate.value }}</div>    <div class="time">- {{ scheduledTime }}</div>  </div>  <div class="game">  <div class="teams">    <div class="team team-home">      <div class="teamlogo"><img src="'+e+'/{{ homeTeamId }}.png" /></div>      <div class="teamname">{{ homeTeamLongName }}</div>    </div>    <div class="team team-away">      <div class="teamlogo"><img src="'+e+'/{{ awayTeamId }}.png" /></div>      <div class="teamname">{{ awayTeamLongName }}</div>    </div>  </div>  <div class="scores">      {{ homeTeamScore === null ? "-": homeTeamScore }}      : {{ awayTeamScore === null ? "-": awayTeamScore }}  </div>  </div></div>'},s=function(e,a){var t='<div class="hsc-game-schedule-list">',n=i(a.rows);t+=n,t+="</div>",e.html(t)},i=function(e){var a="",s=_.template(n());return _.each(e,function(e,n){(e.homeTeamId===t||e.awayTeamId===t)&&(a+=s(e))}),a};return{init:function(e){var n=new HockeyDataService;a=e.data("division"),t=e.data("team"),n.getSchedule(a).then(function(a){s(e,a.data)},function(e){console.log("error",e)})}}};e(document).ready(function(){_.templateSettings={interpolate:/\{\{(.+?)\}\}/g},e(".js-widget-schedule").each(function(){var t=new a;t.init(e(this))})})}(jQuery),function(e){"use strict";var a=function(){var e="/wp-content/themes/hsc-theme/images/teams",a="136",t="731",n="last",s=function(){var a="last-game-widget";return"next"===n&&(a="next-game-widget"),'<div class="hsc-game-schedule-widget '+a+'"><div class="schedule-widget-holder">  <div class="image image-home-team">    <img src="'+e+'/{{ homeTeamId }}.png" />  </div>  <div class="meta">    <div class="date">{{ scheduledDate.value }}</div>    <div class="time">{{ scheduledTime }}</div>    <div class="scores">      <div class="score score-home-team">{{ homeTeamScore }}</div>      <div class="divider">:</div>      <div class="score score-away-team">{{ awayTeamScore }}</div>    </div>  </div>  <div class="image image-away-team">    <img src="'+e+'/{{ awayTeamId }}.png" />  </div></div>  <div class="teams">    <span class="team home-team">{{ homeTeamLongName }}</span>    <span class="divider">-</span>    <span class="team away-team">{{ awayTeamLongName }}</span>  </div></div>'},i=function(e,a){var t="<div>",n=c(a.rows);t+=n,t+="</div>",e.html(t)},c=function(e){var a="",i=_.template(s()),c=moment();if("last"===n){e=_.chain(e).reverse()._wrapped;var d=_.find(e,function(e){if((e.homeTeamId===t||e.awayTeamId===t)&&e.scheduledDate&&e.scheduledDate.value&&null!==e.homeTeamScore&&null!==e.awayTeamScore){var a=moment(e.scheduledDate.value,"DD.MM.YYYY");if(a.isBefore(c))return e}});d&&(a+=i(d))}if("next"===n){var o=_.find(e,function(e){if((e.homeTeamId===t||e.awayTeamId===t)&&e.scheduledDate&&e.scheduledDate.value&&null===e.homeTeamScore&&null===e.awayTeamScore){var a=moment(e.scheduledDate.value,"DD.MM.YYYY");if(a.isSameOrAfter(c))return e}});o&&(a+=i(o))}return a};return{init:function(e){var s=new HockeyDataService;a=e.data("division"),t=e.data("team"),n=e.data("type");s.getSchedule(a).then(function(a){i(e,a.data)},function(e){console.log("error",e)})}}};e(document).ready(function(){_.templateSettings={interpolate:/\{\{(.+?)\}\}/g},e(".js-widget-schedule-single").each(function(){var t=new a;t.init(e(this))})})}(jQuery),function(e){"use strict";function a(){var e="/wp-content/themes/hsc-theme/images/teams",a="136",t=function(){return'<tr class="hsc-standings-header"><td class="rank">#</td><td class="image"></td><td class="team">Team</td><td class="info">GP</td><td class="info">W</td><td class="info">L</td><td class="info">P</td></tr>'},n=function(){return'<tr class="hsc-standings-row"><td class="rank">{{ tableRank }}</td><td class="image"><img src="'+e+'/{{ id }}.png" /></td><td class="team">{{ teamLongname }}</td><td class="info">{{ gamesPlayed }}</td><td class="info">{{ gamesWon }}</td><td class="info">{{ gamesLost }}</td><td class="info">{{ points }}</td></tr>'},s=function(e,a){var n='<table class="hsc-table hsc-standings">',s=i(a.rows);n+=t(),n+=s,n+="</table>",e.html(n)},i=function(e){var a="",t=_.template(n());return _.each(e,function(e,n){a+=t(e)}),a};return{init:function(e){var t=new HockeyDataService;a=e.data("division"),t.getStandings(a).then(function(a){s(e,a.data)},function(e){console.log("error",e)})}}}e(document).ready(function(){_.templateSettings={interpolate:/\{\{(.+?)\}\}/g},e(".js-widget-standings").each(function(){var t=new a;t.init(e(this))})})}(jQuery);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNlcnZpY2VzL2hvY2tleWRhdGEtc2VydmljZS5qcyIsImNvbXBvbmVudHMvZml4ZXMuanMiLCJjb21wb25lbnRzL2tub2Nrb3V0LmpzIiwiY29tcG9uZW50cy9tb2JpbGUtbWVudS5qcyIsImNvbXBvbmVudHMvc2NoZWR1bGUtbGlzdC5qcyIsImNvbXBvbmVudHMvc2NoZWR1bGUtd2lkZ2V0LmpzIiwiY29tcG9uZW50cy9zdGFuZGluZ3MuanMiXSwibmFtZXMiOlsiJCIsIndpbmRvdyIsIkhvY2tleURhdGFTZXJ2aWNlIiwiYmFzZVVybCIsInNjaGVkdWxlVXJsIiwic3RhbmRpbmdzVXJsIiwia25vY2tvdXRVcmwiLCJ1cmxQYXJhbXMiLCJhcGlLZXkiLCJkaXZpc2lvbklkIiwibGVhZ3VlIiwic3BvcnQiLCJyZWZlcmVyIiwiZ2V0U2NoZWR1bGUiLCJkZWZlciIsIkRlZmVycmVkIiwicGFyYW1zIiwicGFyYW0iLCJ1cmwiLCJyZXF1ZXN0IiwiYWpheCIsImRhdGFUeXBlIiwiYXN5bmMiLCJzdWNjZXNzIiwicmVzcG9uc2UiLCJkYXRhIiwicm93cyIsInB1c2giLCJpZCIsImRpdmlzaW9uTmFtZSIsInNjaGVkdWxlZERhdGUiLCJzb3J0VmFsdWUiLCJ2YWx1ZSIsInNob3J0VmFsdWUiLCJsb25nVmFsdWUiLCJzY2hlZHVsZWRUaW1lIiwiYXdheVRlYW1JZCIsImF3YXlUZWFtTG9uZ05hbWUiLCJhd2F5VGVhbVNob3J0TmFtZSIsImF3YXlUZWFtRmxhdm91cm5hbWUiLCJob21lVGVhbUlkIiwiaG9tZVRlYW1Mb25nTmFtZSIsImhvbWVUZWFtU2hvcnROYW1lIiwiaG9tZVRlYW1GbGF2b3VybmFtZSIsImhvbWVUZWFtU2NvcmUiLCJhd2F5VGVhbVNjb3JlIiwicmVzb2x2ZSIsImVycm9yIiwicmVqZWN0IiwicHJvbWlzZSIsImdldFN0YW5kaW5ncyIsImdldEtub2Nrb3V0IiwialF1ZXJ5IiwiYWRkY2xhc3MiLCJmbiIsImFkZENsYXNzIiwicmVzdWx0IiwiYXBwbHkiLCJ0aGlzIiwiYXJndW1lbnRzIiwicmVtb3ZlQ2xhc3MiLCJIc2NLbm9ja291dCIsImxvZ29CYXNlVXJsIiwidHlwZSIsInJldHJpZXZlRW5jb3VudGVyT3ZlcnZpZXdUZW1wbGF0ZSIsInRlbXBsYXRlIiwiXyIsInJldHJpZXZlRW5jb3VudGVyR2FtZVRlbXBsYXRlIiwiZ2FtZSIsImJ1aWxkV2lkZ2V0IiwiJGVsZW0iLCJvdXRwdXQiLCJwaGFzZXMiLCJidWlsZEtub2Nrb3V0UGhhc2VzIiwiaHRtbCIsInJldHJpZXZlS25vY2tvdXRQaGFzZSIsInRvTG93ZXJDYXNlIiwicGhhc2UiLCJlYWNoIiwiZW5jb3VudGVycyIsImVuY291bnRlciIsImtleSIsInJldHJpZXZlRW5jb3VudGVyIiwib3ZlcnZpZXdEYXRhIiwidGVhbXMiLCJiZXN0T2YiLCJyZXRyaWV2ZUVuY291bnRlckdhbWVzIiwiZ2FtZXMiLCJpbml0Iiwic2VydmljZSIsInRoZW4iLCJjb25zb2xlIiwibG9nIiwiZG9jdW1lbnQiLCJyZWFkeSIsInRlbXBsYXRlU2V0dGluZ3MiLCJpbnRlcnBvbGF0ZSIsIndpZGdldCIsImluaXRNb2JpbGVNZW51IiwiJG1haW5BcmVhIiwiJG1lbnVCdXR0b24iLCJvbiIsImV2ZW50IiwiY3VycmVudFRhcmdldCIsImhhc0NsYXNzIiwic2hvdyIsImhpZGUiLCJsb2FkIiwiSG9ja2V5RGF0YVdpZGdldHNTY2hlZHVsZSIsInRlYW1JZCIsInJldHJpZXZlUm93VGVtcGxhdGUiLCJidWlsZFJvd3MiLCJzY2hlZHVsZXMiLCJIb2NrZXlEYXRhV2lkZ2V0c1NjaGVkdWxlU2luZ2xlIiwiY2xhc3NOYW1lIiwidG9kYXkiLCJtb21lbnQiLCJjaGFpbiIsInJldmVyc2UiLCJfd3JhcHBlZCIsImxhc3RHYW1lIiwiZmluZCIsInJvdyIsImdhbWVEYXRlIiwiaXNCZWZvcmUiLCJuZXh0R2FtZSIsImlzU2FtZU9yQWZ0ZXIiLCJzY2hlZHVsZXNTaW5nbGUiLCJIb2NrZXlEYXRhV2lkZ2V0c1N0YW5kaW5ncyIsInJldHJpZXZlSGVhZGVyVGVtcGxhdGUiLCJzdGFuZGluZ3MiXSwibWFwcGluZ3MiOiJDQUFBLFNBQUFBLEdBQ0FDLE9BQUFDLGtCQUFBLFdBQ0EsWUFFQSxJQUFBQyxHQUFBLHNDQUNBQyxFQUFBLFlBQ0FDLEVBQUEsYUFDQUMsRUFBQSxpQkFFQUMsR0FDQUMsT0FBQSxtQ0FDQUMsV0FBQSxNQUNBQyxPQUFBLE9BQ0FDLE1BQUEsWUFDQUMsUUFBQSxjQUdBLFFBQ0FDLFlBQUEsU0FBQUosR0FDQSxHQUFBSyxHQUFBZCxFQUFBZSxVQUVBUixHQUFBRSxXQUFBQSxDQUNBLElBQUFPLEdBQUFoQixFQUFBaUIsTUFBQVYsR0FDQVcsRUFBQWYsRUFBQUMsRUFBQSxJQUFBWSxFQUVBRyxFQUFBbkIsRUFBQW9CLE1BQ0FGLElBQUFBLEVBQ0FHLFNBQUEsUUFDQUMsT0FBQSxHQW9DQSxPQWxDQUgsR0FBQUksUUFBQSxTQUFBQyxHQXdCQSxNQXZCQUEsR0FBQUMsS0FBQUMsS0FBQUMsTUFDQUMsR0FBQSx1Q0FDQW5CLFdBQUEsSUFDQW9CLGFBQUEsU0FDQUMsZUFDQUMsVUFBQSxXQUNBQyxNQUFBLGFBQ0FDLFdBQUEsU0FDQUMsVUFBQSxvQkFFQUMsY0FBQSxRQUNBQyxXQUFBLElBQ0FDLGlCQUFBLGtDQUNBQyxrQkFBQSxNQUNBQyxvQkFBQSxrQ0FDQUMsV0FBQSxJQUNBQyxpQkFBQSxnQkFDQUMsa0JBQUEsTUFDQUMsb0JBQUEsZ0JBQ0FDLGNBQUEsS0FDQUMsY0FBQSxPQUdBL0IsRUFBQWdDLFFBQUF0QixLQUVBTCxFQUFBNEIsTUFBQSxTQUFBdkIsR0FDQSxNQUFBVixHQUFBa0MsUUFDQXZCLE1BQ0FDLGFBS0FaLEVBQUFtQyxXQUdBQyxhQUFBLFNBQUF6QyxHQUNBRixFQUFBRSxXQUFBQSxDQUNBLElBQUFPLEdBQUFoQixFQUFBaUIsTUFBQVYsR0FDQVcsRUFBQWYsRUFBQUUsRUFBQSxJQUFBVyxDQUVBLE9BQUFoQixHQUFBb0IsTUFDQUYsSUFBQUEsRUFDQUcsU0FBQSxXQUdBOEIsWUFBQSxTQUFBMUMsR0FDQUYsRUFBQUUsV0FBQUEsQ0FDQSxJQUFBTyxHQUFBaEIsRUFBQWlCLE1BQUFWLEdBQ0FXLEVBQUFmLEVBQUFHLEVBQUEsSUFBQVUsQ0FFQSxPQUFBaEIsR0FBQW9CLE1BQ0FGLElBQUFBLEVBQ0FHLFNBQUEsY0FLQStCLFFDekZBLFNBQUFwRCxHQUNBLFlBS0EsSUFBQXFELEdBQUFELE9BQUFFLEdBQUFDLFFBQ0FILFFBQUFFLEdBQUFDLFNBQUEsV0FDQSxHQUFBQyxHQUFBSCxFQUFBSSxNQUFBQyxLQUFBQyxVQUVBLE9BREFQLFFBQUEsZ0JBQUFRLFlBQUEsbUJBQ0FKLEdBR0F4RCxFQUFBLGdCQUFBNEQsWUFBQSxvQkFFQVIsUUNmQSxTQUFBcEQsR0FDQSxZQUVBLFNBQUE2RCxLQUNBLEdBQUFDLEdBQUEsNENBQ0FyRCxFQUFBLE1BRUFzRCxFQUFBLGFBRUFDLEVBQUEsU0FBQXZDLEdBQ0EsR0FBQXdDLEdBQUEsOEVBR0FILEVBQUEsME9BT0FBLEVBQUEsZ0RBTUEsUUFGQUcsRUFBQUMsRUFBQUQsU0FBQUEsSUFFQXhDLElBR0EwQyxFQUFBLFNBQUFDLEdBQ0EsR0FBQUgsR0FBQSwwUEFVQSxRQUZBQSxFQUFBQyxFQUFBRCxTQUFBQSxJQUVBRyxJQUdBQyxFQUFBLFNBQUFDLEVBQUE3QyxHQUNBLEdBQUE4QyxHQUFBLDZCQUNBQyxFQUFBQyxFQUFBaEQsRUFDQThDLElBQUFDLEVBQ0FELEdBQUEsU0FFQUQsRUFBQUksS0FBQUgsSUFHQUUsRUFBQSxTQUFBaEQsR0FDQSxNQUNBa0QsR0FEQSxlQUFBWixFQUFBYSxjQUNBbkQsRUFBQStDLE9BQUEsR0FFQS9DLEVBQUErQyxPQUFBLEtBSUFHLEVBQUEsU0FBQUUsR0FDQSxHQUFBTixHQUFBLEVBS0EsT0FKQUwsR0FBQVksS0FBQUQsRUFBQUUsV0FBQSxTQUFBQyxFQUFBQyxHQUNBVixHQUFBVyxFQUFBRixLQUdBVCxHQUdBVyxFQUFBLFNBQUFGLEdBQ0EsR0FBQVQsR0FBQSxHQUNBWSxHQUNBQyxNQUFBSixFQUFBSSxNQUNBQyxPQUFBTCxFQUFBSyxPQVdBLE9BUkFkLElBQUEsa0NBQ0FBLEdBQUFQLEVBQUFtQixHQUVBWixHQUFBLG9DQUNBQSxHQUFBZSxFQUFBTixFQUFBTyxPQUNBaEIsR0FBQSxXQUNBQSxHQUFBLFVBS0FlLEVBQUEsU0FBQUMsR0FDQSxHQUFBaEIsR0FBQSxFQU1BLE9BSkFMLEdBQUFZLEtBQUFTLEVBQUEsU0FBQW5CLEVBQUFhLEdBQ0FWLEdBQUFKLEVBQUFDLEtBR0FHLEVBR0EsUUFDQWlCLEtBQUEsU0FBQWxCLEdBQ0EsR0FBQW1CLEdBQUEsR0FBQXZGLGtCQUNBTyxHQUFBNkQsRUFBQTdDLEtBQUEsWUFDQXNDLEVBQUFPLEVBQUE3QyxLQUFBLFFBRUFnRSxFQUFBdEMsWUFBQTFDLEdBQUFpRixLQUNBLFNBQUFsRSxHQUNBNkMsRUFBQUMsRUFBQTlDLEVBQUFDLE9BRUEsU0FBQUQsR0FDQW1FLFFBQUFDLElBQUEsUUFBQXBFLE9BT0F4QixFQUFBNkYsVUFBQUMsTUFBQSxXQUNBNUIsRUFBQTZCLGtCQUNBQyxZQUFBLGtCQUdBaEcsRUFBQSxvQkFBQThFLEtBQUEsV0FDQSxHQUFBbUIsR0FBQSxHQUFBcEMsRUFDQW9DLEdBQUFULEtBQUF4RixFQUFBMEQsWUFHQU4sUUM3SEEsU0FBQXBELEdBeUJBLFFBQUFrRyxLQUNBLEdBQUFDLEdBQUFuRyxFQUFBLGlCQUNBb0csRUFBQXBHLEVBQUEsMEJBRUFvRyxHQUFBQyxHQUFBLFFBQUEsU0FBQUMsR0FDQXRHLEVBQUFzRyxFQUFBQyxlQUFBQyxTQUFBLFdBQ0FMLEVBQUFNLE9BQ0F6RyxFQUFBc0csRUFBQUMsZUFBQTNDLFlBQUEsWUFFQXVDLEVBQUFPLE9BQ0ExRyxFQUFBc0csRUFBQUMsZUFBQWhELFNBQUEsYUFLQXZELEVBQUFDLFFBQUEwRyxLQUFBLFdBS0FULE9BRUE5QyxRQy9DQSxTQUFBcEQsR0FDQSxZQUVBLElBQUE0RyxHQUFBLFdBQ0EsR0FBQTlDLEdBQUEsNENBQ0FyRCxFQUFBLE1BQ0FvRyxFQUFBLE1BV0FDLEVBQUEsV0FDQSxNQUFBLGlTQVFBaEQsRUFBQSwwS0FJQUEsRUFBQSx5UUFZQU8sRUFBQSxTQUFBQyxFQUFBN0MsR0FDQSxHQUFBOEMsR0FBQSx1Q0FDQTdDLEVBQUFxRixFQUFBdEYsRUFBQUMsS0FFQTZDLElBQUE3QyxFQUNBNkMsR0FBQSxTQUVBRCxFQUFBSSxLQUFBSCxJQUdBd0MsRUFBQSxTQUFBckYsR0FDQSxHQUFBNkMsR0FBQSxHQUNBTixFQUFBQyxFQUFBRCxTQUFBNkMsSUFRQSxPQU5BNUMsR0FBQVksS0FBQXBELEVBQUEsU0FBQU0sRUFBQWlELElBQ0FqRCxFQUFBUSxhQUFBcUUsR0FBQTdFLEVBQUFJLGFBQUF5RSxLQUNBdEMsR0FBQU4sRUFBQWpDLE1BSUF1QyxFQUdBLFFBQ0FpQixLQUFBLFNBQUFsQixHQUNBLEdBQUFtQixHQUFBLEdBQUF2RixrQkFDQU8sR0FBQTZELEVBQUE3QyxLQUFBLFlBQ0FvRixFQUFBdkMsRUFBQTdDLEtBQUEsUUFFQWdFLEVBQUE1RSxZQUFBSixHQUFBaUYsS0FDQSxTQUFBbEUsR0FDQTZDLEVBQUFDLEVBQUE5QyxFQUFBQyxPQUVBLFNBQUFELEdBQ0FtRSxRQUFBQyxJQUFBLFFBQUFwRSxPQU9BeEIsR0FBQTZGLFVBQUFDLE1BQUEsV0FDQTVCLEVBQUE2QixrQkFDQUMsWUFBQSxrQkFHQWhHLEVBQUEsdUJBQUE4RSxLQUFBLFdBQ0EsR0FBQWtDLEdBQUEsR0FBQUosRUFDQUksR0FBQXhCLEtBQUF4RixFQUFBMEQsWUFHQU4sUUM3RkEsU0FBQXBELEdBQ0EsWUFDQSxJQUFBaUgsR0FBQSxXQUNBLEdBQUFuRCxHQUFBLDRDQUNBckQsRUFBQSxNQUNBb0csRUFBQSxNQUNBOUMsRUFBQSxPQUVBK0MsRUFBQSxXQUNBLEdBQUFJLEdBQUEsa0JBTUEsT0FKQSxTQUFBbkQsSUFDQW1ELEVBQUEsb0JBR0Esd0NBQUFBLEVBQUEsNEZBR0FwRCxFQUFBLCtaQVlBQSxFQUFBLDRPQVdBTyxFQUFBLFNBQUFDLEVBQUE3QyxHQUNBLEdBQUE4QyxHQUFBLFFBQ0E3QyxFQUFBcUYsRUFBQXRGLEVBQUFDLEtBQ0E2QyxJQUFBN0MsRUFDQTZDLEdBQUEsU0FFQUQsRUFBQUksS0FBQUgsSUFHQXdDLEVBQUEsU0FBQXJGLEdBQ0EsR0FBQTZDLEdBQUEsR0FDQU4sRUFBQUMsRUFBQUQsU0FBQTZDLEtBQ0FLLEVBQUFDLFFBSUEsSUFBQSxTQUFBckQsRUFBQSxDQUNBckMsRUFBQXdDLEVBQUFtRCxNQUFBM0YsR0FBQTRGLFVBQUFDLFFBQ0EsSUFBQUMsR0FBQXRELEVBQUF1RCxLQUFBL0YsRUFBQSxTQUFBZ0csR0FDQSxJQUFBQSxFQUFBbEYsYUFBQXFFLEdBQUFhLEVBQUF0RixhQUFBeUUsSUFDQWEsRUFBQTVGLGVBQUE0RixFQUFBNUYsY0FBQUUsT0FDQSxPQUFBMEYsRUFBQTlFLGVBQ0EsT0FBQThFLEVBQUE3RSxjQUNBLENBQ0EsR0FBQThFLEdBQUFQLE9BQUFNLEVBQUE1RixjQUFBRSxNQUFBLGFBQ0EsSUFBQTJGLEVBQUFDLFNBQUFULEdBQ0EsTUFBQU8sS0FLQUYsS0FDQWpELEdBQUFOLEVBQUF1RCxJQUlBLEdBQUEsU0FBQXpELEVBQUEsQ0FDQSxHQUFBOEQsR0FBQTNELEVBQUF1RCxLQUFBL0YsRUFBQSxTQUFBZ0csR0FDQSxJQUFBQSxFQUFBbEYsYUFBQXFFLEdBQUFhLEVBQUF0RixhQUFBeUUsSUFDQWEsRUFBQTVGLGVBQUE0RixFQUFBNUYsY0FBQUUsT0FDQSxPQUFBMEYsRUFBQTlFLGVBQ0EsT0FBQThFLEVBQUE3RSxjQUNBLENBQ0EsR0FBQThFLEdBQUFQLE9BQUFNLEVBQUE1RixjQUFBRSxNQUFBLGFBQ0EsSUFBQTJGLEVBQUFHLGNBQUFYLEdBQ0EsTUFBQU8sS0FLQUcsS0FDQXRELEdBQUFOLEVBQUE0RCxJQUlBLE1BQUF0RCxHQUdBLFFBQ0FpQixLQUFBLFNBQUFsQixHQUNBLEdBQUFtQixHQUFBLEdBQUF2RixrQkFDQU8sR0FBQTZELEVBQUE3QyxLQUFBLFlBQ0FvRixFQUFBdkMsRUFBQTdDLEtBQUEsUUFDQXNDLEVBQUFPLEVBQUE3QyxLQUFBLE9BRUFnRSxHQUFBNUUsWUFBQUosR0FBQWlGLEtBQ0EsU0FBQWxFLEdBQ0E2QyxFQUFBQyxFQUFBOUMsRUFBQUMsT0FFQSxTQUFBRCxHQUNBbUUsUUFBQUMsSUFBQSxRQUFBcEUsT0FRQXhCLEdBQUE2RixVQUFBQyxNQUFBLFdBQ0E1QixFQUFBNkIsa0JBQ0FDLFlBQUEsa0JBR0FoRyxFQUFBLDhCQUFBOEUsS0FBQSxXQUNBLEdBQUFpRCxHQUFBLEdBQUFkLEVBQ0FjLEdBQUF2QyxLQUFBeEYsRUFBQTBELFlBR0FOLFFDaklBLFNBQUFwRCxHQUNBLFlBRUEsU0FBQWdJLEtBQ0EsR0FBQWxFLEdBQUEsNENBQ0FyRCxFQUFBLE1BR0F3SCxFQUFBLFdBQ0EsTUFBQSwrTUFXQW5CLEVBQUEsV0FDQSxNQUFBLGtHQUVBaEQsRUFBQSx5TkFTQU8sRUFBQSxTQUFBQyxFQUFBN0MsR0FDQSxHQUFBOEMsR0FBQSwwQ0FDQTdDLEVBQUFxRixFQUFBdEYsRUFBQUMsS0FDQTZDLElBQUEwRCxJQUNBMUQsR0FBQTdDLEVBQ0E2QyxHQUFBLFdBRUFELEVBQUFJLEtBQUFILElBR0F3QyxFQUFBLFNBQUFyRixHQUNBLEdBQUE2QyxHQUFBLEdBQ0FOLEVBQUFDLEVBQUFELFNBQUE2QyxJQU1BLE9BSkE1QyxHQUFBWSxLQUFBcEQsRUFBQSxTQUFBTSxFQUFBaUQsR0FDQVYsR0FBQU4sRUFBQWpDLEtBR0F1QyxFQUdBLFFBQ0FpQixLQUFBLFNBQUFsQixHQUNBLEdBQUFtQixHQUFBLEdBQUF2RixrQkFDQU8sR0FBQTZELEVBQUE3QyxLQUFBLFlBRUFnRSxFQUFBdkMsYUFBQXpDLEdBQUFpRixLQUNBLFNBQUFsRSxHQUNBNkMsRUFBQUMsRUFBQTlDLEVBQUFDLE9BRUEsU0FBQUQsR0FDQW1FLFFBQUFDLElBQUEsUUFBQXBFLE9BT0F4QixFQUFBNkYsVUFBQUMsTUFBQSxXQUNBNUIsRUFBQTZCLGtCQUNBQyxZQUFBLGtCQUdBaEcsRUFBQSx3QkFBQThFLEtBQUEsV0FDQSxHQUFBb0QsR0FBQSxHQUFBRixFQUNBRSxHQUFBMUMsS0FBQXhGLEVBQUEwRCxZQUdBTiIsImZpbGUiOiJoc2MubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uKCQpIHtcbndpbmRvdy5Ib2NrZXlEYXRhU2VydmljZSA9IGZ1bmN0aW9uKCkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuXG4gICAgdmFyIGJhc2VVcmwgPSAnaHR0cDovL2FwaS5ob2NrZXlkYXRhLm5ldC9kYXRhL2ViZWwnO1xuICAgIHZhciBzY2hlZHVsZVVybCA9ICcvU2NoZWR1bGUnO1xuICAgIHZhciBzdGFuZGluZ3NVcmwgPSAnL1N0YW5kaW5ncyc7XG4gICAgdmFyIGtub2Nrb3V0VXJsID0gJy9Lbm9ja291dFN0YWdlJztcblxuICAgIHZhciB1cmxQYXJhbXMgPSB7XG4gICAgICAgIGFwaUtleTogJ2U1MmI1NzIyY2JjODljM2U1MWVlMGNkNmUyNDg1YTgxJyxcbiAgICAgICAgZGl2aXNpb25JZDogJzEzNicsXG4gICAgICAgIGxlYWd1ZTogJ2ViZWwnLFxuICAgICAgICBzcG9ydDogJ2ljZWhvY2tleScsXG4gICAgICAgIHJlZmVyZXI6ICd3d3cuaC1zYy5hdCdcbiAgICB9O1xuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgZ2V0U2NoZWR1bGU6IGZ1bmN0aW9uKGRpdmlzaW9uSWQpIHtcbiAgICAgICAgICAgIHZhciBkZWZlciA9ICQuRGVmZXJyZWQoKTtcblxuICAgICAgICAgICAgdXJsUGFyYW1zLmRpdmlzaW9uSWQgPSBkaXZpc2lvbklkO1xuICAgICAgICAgICAgdmFyIHBhcmFtcyA9ICQucGFyYW0odXJsUGFyYW1zKTtcbiAgICAgICAgICAgIHZhciB1cmwgPSBiYXNlVXJsICsgc2NoZWR1bGVVcmwgKyAnPycgKyBwYXJhbXM7XG5cbiAgICAgICAgICAgIHZhciByZXF1ZXN0ID0gJC5hamF4KHtcbiAgICAgICAgICAgICAgICB1cmw6IHVybCxcbiAgICAgICAgICAgICAgICBkYXRhVHlwZTogXCJqc29ucFwiLFxuICAgICAgICAgICAgICAgIGFzeW5jOiBmYWxzZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXF1ZXN0LnN1Y2Nlc3MoZnVuY3Rpb24ocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZS5kYXRhLnJvd3MucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIFwiaWRcIjogXCJkOWU2ZDk3Ny1lM2JkLTRkODEtOTc4OC03MjJjZGI5ZjY2OWJcIixcbiAgICAgICAgICAgICAgICAgICAgXCJkaXZpc2lvbklkXCI6IDEzNixcbiAgICAgICAgICAgICAgICAgICAgXCJkaXZpc2lvbk5hbWVcIjogXCJWRUhMIDFcIixcbiAgICAgICAgICAgICAgICAgICAgXCJzY2hlZHVsZWREYXRlXCI6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIFwic29ydFZhbHVlXCI6IDE0NDUxODA0MDAwMDAsXG4gICAgICAgICAgICAgICAgICAgICAgICBcInZhbHVlXCI6IFwiMTguMTAuMjAxOVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJzaG9ydFZhbHVlXCI6IFwiMTguMTAuXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBcImxvbmdWYWx1ZVwiOiBcIjE4LiBPa3RvYmVyIDIwMTVcIlxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBcInNjaGVkdWxlZFRpbWVcIjogXCIxNzowMFwiLFxuICAgICAgICAgICAgICAgICAgICBcImF3YXlUZWFtSWRcIjogNzI4LFxuICAgICAgICAgICAgICAgICAgICBcImF3YXlUZWFtTG9uZ05hbWVcIjogXCJFSEMgTWVnYWZpdCBJY2UgVGlnZXJzIERvcm5iaXJuXCIsXG4gICAgICAgICAgICAgICAgICAgIFwiYXdheVRlYW1TaG9ydE5hbWVcIjogXCJJVERcIixcbiAgICAgICAgICAgICAgICAgICAgXCJhd2F5VGVhbUZsYXZvdXJuYW1lXCI6IFwiRUhDIE1lZ2FmaXQgSWNlIFRpZ2VycyBEb3JuYmlyblwiLFxuICAgICAgICAgICAgICAgICAgICBcImhvbWVUZWFtSWRcIjogNzMxLFxuICAgICAgICAgICAgICAgICAgICBcImhvbWVUZWFtTG9uZ05hbWVcIjogXCJTQyBIb2hlbmVtcyAyXCIsXG4gICAgICAgICAgICAgICAgICAgIFwiaG9tZVRlYW1TaG9ydE5hbWVcIjogXCJITzJcIixcbiAgICAgICAgICAgICAgICAgICAgXCJob21lVGVhbUZsYXZvdXJuYW1lXCI6IFwiU0MgSG9oZW5lbXMgMlwiLFxuICAgICAgICAgICAgICAgICAgICBcImhvbWVUZWFtU2NvcmVcIjogbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgXCJhd2F5VGVhbVNjb3JlXCI6IG51bGxcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIHJldHVybiBkZWZlci5yZXNvbHZlKHJlc3BvbnNlKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmVxdWVzdC5lcnJvcihmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBkZWZlci5yZWplY3Qoe1xuICAgICAgICAgICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICByb3dzOiBbXVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgcmV0dXJuIGRlZmVyLnByb21pc2UoKTtcblxuICAgICAgICB9LFxuICAgICAgICBnZXRTdGFuZGluZ3M6IGZ1bmN0aW9uKGRpdmlzaW9uSWQpIHtcbiAgICAgICAgICAgIHVybFBhcmFtcy5kaXZpc2lvbklkID0gZGl2aXNpb25JZDtcbiAgICAgICAgICAgIHZhciBwYXJhbXMgPSAkLnBhcmFtKHVybFBhcmFtcyk7XG4gICAgICAgICAgICB2YXIgdXJsID0gYmFzZVVybCArIHN0YW5kaW5nc1VybCArICc/JyArIHBhcmFtcztcblxuICAgICAgICAgICAgcmV0dXJuICQuYWpheCh7XG4gICAgICAgICAgICAgICAgdXJsOiB1cmwsXG4gICAgICAgICAgICAgICAgZGF0YVR5cGU6IFwianNvbnBcIlxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIGdldEtub2Nrb3V0OiBmdW5jdGlvbihkaXZpc2lvbklkKSB7XG4gICAgICAgICAgICB1cmxQYXJhbXMuZGl2aXNpb25JZCA9IGRpdmlzaW9uSWQ7XG4gICAgICAgICAgICB2YXIgcGFyYW1zID0gJC5wYXJhbSh1cmxQYXJhbXMpO1xuICAgICAgICAgICAgdmFyIHVybCA9IGJhc2VVcmwgKyBrbm9ja291dFVybCArICc/JyArIHBhcmFtcztcblxuICAgICAgICAgICAgcmV0dXJuICQuYWpheCh7XG4gICAgICAgICAgICAgICAgdXJsOiB1cmwsXG4gICAgICAgICAgICAgICAgZGF0YVR5cGU6IFwianNvbnBcIlxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG59O1xufSkoalF1ZXJ5KTtcbiIsIihmdW5jdGlvbigkKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgICAvLyBTdG9wIGRpdmkgaGVhZGVyIGZyb20gc2hyaW5raW5nLlxuICAgIC8vIGh0dHBzOi8vZGl2aWJvb3N0ZXIuY29tL3N0b3AtdGhlLWRpdmktaGVhZGVyLWZyb20tc2hyaW5raW5nLW9uLXNjcm9sbC9cbiAgICAvLyBPdmVycmlkZSB0aGUgYWRkQ2xhc3MgdG8gcHJldmVudCBmaXhlZCBoZWFkZXIgY2xhc3MgZnJvbSBiZWluZyBhZGRlZFxuICAgIHZhciBhZGRjbGFzcyA9IGpRdWVyeS5mbi5hZGRDbGFzcztcbiAgICBqUXVlcnkuZm4uYWRkQ2xhc3MgPSBmdW5jdGlvbigpe1xuICAgICAgICB2YXIgcmVzdWx0ID0gYWRkY2xhc3MuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgICAgalF1ZXJ5KCcjbWFpbi1oZWFkZXInKS5yZW1vdmVDbGFzcygnZXQtZml4ZWQtaGVhZGVyJyk7XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgJCgnI21haW4taGVhZGVyJykucmVtb3ZlQ2xhc3MoJ2V0LWZpeGVkLWhlYWRlcicpO1xuXG59KShqUXVlcnkpO1xuIiwiKGZ1bmN0aW9uKCQpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcblxuICAgIGZ1bmN0aW9uIEhzY0tub2Nrb3V0KCkge1xuICAgICAgICB2YXIgbG9nb0Jhc2VVcmwgPSAnL3dwLWNvbnRlbnQvdGhlbWVzL2hzYy10aGVtZS9pbWFnZXMvdGVhbXMnO1xuICAgICAgICB2YXIgZGl2aXNpb25JZCA9ICcxMzYnO1xuICAgICAgICB2YXIgdGVhbUlkID0gJzczMSc7XG4gICAgICAgIHZhciB0eXBlID0gJ2hhbGJmaW5hbGUnO1xuXG4gICAgICAgIHZhciByZXRyaWV2ZUVuY291bnRlck92ZXJ2aWV3VGVtcGxhdGUgPSBmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICB2YXIgdGVtcGxhdGUgPSAnPHRhYmxlIGNsYXNzPVwiaHNjLWtub2Nrb3V0LW92ZXJ2aWV3XCI+J1xuICAgICAgICAgICAgICAgICsgJzx0cj4nXG4gICAgICAgICAgICAgICAgKyAnICA8dGQgY2xhc3M9XCJpbWFnZVwiPidcbiAgICAgICAgICAgICAgICArICcgICAgPGltZyBzcmM9XCInICsgbG9nb0Jhc2VVcmwgKyAnL3t7IHRlYW1zWzBdLmlkIH19LnBuZ1wiIC8+J1xuICAgICAgICAgICAgICAgICsgJyAgPC90ZD4nXG4gICAgICAgICAgICAgICAgKyAnICA8dGQgY2xhc3M9XCJtZXRhXCI+J1xuICAgICAgICAgICAgICAgICsgJyAgICA8c3BhbiBjbGFzcz1cInNjb3JlXCI+e3sgdGVhbXNbMF0uZ2FtZXNXb24gfX0gOiB7eyB0ZWFtc1sxXS5nYW1lc1dvbiB9fTwvc3Bhbj48YnIvPidcbiAgICAgICAgICAgICAgICArICcgICAgPHNwYW4gY2xhc3M9XCJiZXN0b2ZcIj5CZXN0IG9mOiB7eyBiZXN0T2YgfX08L3NwYW4+J1xuICAgICAgICAgICAgICAgICsgJyAgPC90ZD4nXG4gICAgICAgICAgICAgICAgKyAnICA8dGQgY2xhc3M9XCJpbWFnZVwiPidcbiAgICAgICAgICAgICAgICArICcgICAgPGltZyBzcmM9XCInICsgbG9nb0Jhc2VVcmwgKyAnL3t7IHRlYW1zWzFdLmlkIH19LnBuZ1wiIC8+J1xuICAgICAgICAgICAgICAgICsgJyAgPC90ZD4nXG4gICAgICAgICAgICAgICAgKyAnPC90cj4nXG4gICAgICAgICAgICAgICAgKyAnPC90YWJsZT4nO1xuICAgICAgICAgICAgdGVtcGxhdGUgPSBfLnRlbXBsYXRlKHRlbXBsYXRlKTtcblxuICAgICAgICAgICAgcmV0dXJuIHRlbXBsYXRlKGRhdGEpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHZhciByZXRyaWV2ZUVuY291bnRlckdhbWVUZW1wbGF0ZSA9IGZ1bmN0aW9uKGdhbWUpIHtcbiAgICAgICAgICAgIHZhciB0ZW1wbGF0ZSA9ICc8dHI+J1xuICAgICAgICAgICAgICAgICsgJyAgPHRkIGNsYXNzPVwiZGF0ZVwiIGNvbHNwYW49XCIyXCI+J1xuICAgICAgICAgICAgICAgICsgJyAgICB7eyBzY2hlZHVsZWREYXRlLnZhbHVlIH19IC0ge3sgc2NoZWR1bGVkVGltZSB9fSdcbiAgICAgICAgICAgICAgICArICcgIDwvdGQ+J1xuICAgICAgICAgICAgICAgICsgJzwvdHI+PHRyPidcbiAgICAgICAgICAgICAgICArICcgIDx0ZCBjbGFzcz1cInRlYW1cIj57eyBob21lVGVhbUxvbmdOYW1lIH19IDxici8+IHt7IGF3YXlUZWFtTG9uZ05hbWUgfX08L3RkPidcbiAgICAgICAgICAgICAgICArICcgIDx0ZCBjbGFzcz1cInNjb3JlXCI+e3sgaG9tZVRlYW1TY29yZSB9fSA6IHt7IGF3YXlUZWFtU2NvcmUgfX08L3RkPidcbiAgICAgICAgICAgICAgICArICc8L3RyPic7XG4gICAgICAgICAgICB0ZW1wbGF0ZSA9IF8udGVtcGxhdGUodGVtcGxhdGUpO1xuXG4gICAgICAgICAgICByZXR1cm4gdGVtcGxhdGUoZ2FtZSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgdmFyIGJ1aWxkV2lkZ2V0ID0gZnVuY3Rpb24oJGVsZW0sIGRhdGEpIHtcbiAgICAgICAgICAgIHZhciBvdXRwdXQgPSAnPGRpdiBjbGFzcz1cImhzYy1rbm9ja291dFwiPic7XG4gICAgICAgICAgICB2YXIgcGhhc2VzID0gYnVpbGRLbm9ja291dFBoYXNlcyhkYXRhKTtcbiAgICAgICAgICAgIG91dHB1dCArPSBwaGFzZXM7XG4gICAgICAgICAgICBvdXRwdXQgKz0gJzwvZGl2Pic7XG5cbiAgICAgICAgICAgICRlbGVtLmh0bWwob3V0cHV0KTtcbiAgICAgICAgfTtcblxuICAgICAgICB2YXIgYnVpbGRLbm9ja291dFBoYXNlcyA9IGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgIGlmICh0eXBlLnRvTG93ZXJDYXNlKCkgPT09ICdoYWxiZmluYWxlJykge1xuICAgICAgICAgICAgICAgIHJldHVybiByZXRyaWV2ZUtub2Nrb3V0UGhhc2UoZGF0YS5waGFzZXNbMF0pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmV0cmlldmVLbm9ja291dFBoYXNlKGRhdGEucGhhc2VzWzFdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICB2YXIgcmV0cmlldmVLbm9ja291dFBoYXNlID0gZnVuY3Rpb24ocGhhc2UpIHtcbiAgICAgICAgICAgIHZhciBvdXRwdXQgPSAnJztcbiAgICAgICAgICAgIF8uZWFjaChwaGFzZS5lbmNvdW50ZXJzLCBmdW5jdGlvbihlbmNvdW50ZXIsIGtleSkge1xuICAgICAgICAgICAgICAgIG91dHB1dCArPSByZXRyaWV2ZUVuY291bnRlcihlbmNvdW50ZXIpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHJldHVybiBvdXRwdXQ7XG4gICAgICAgIH07XG5cbiAgICAgICAgdmFyIHJldHJpZXZlRW5jb3VudGVyID0gZnVuY3Rpb24oZW5jb3VudGVyKSB7XG4gICAgICAgICAgICB2YXIgb3V0cHV0ID0gJyc7XG4gICAgICAgICAgICB2YXIgb3ZlcnZpZXdEYXRhID0ge1xuICAgICAgICAgICAgICAgIHRlYW1zOiBlbmNvdW50ZXIudGVhbXMsXG4gICAgICAgICAgICAgICAgYmVzdE9mOiBlbmNvdW50ZXIuYmVzdE9mXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBvdXRwdXQgKz0gJzxkaXYgY2xhc3M9XCJoc2Mta25vY2tvdXQtZ2FtZVwiPic7XG4gICAgICAgICAgICBvdXRwdXQgKz0gcmV0cmlldmVFbmNvdW50ZXJPdmVydmlld1RlbXBsYXRlKG92ZXJ2aWV3RGF0YSk7XG5cbiAgICAgICAgICAgIG91dHB1dCArPSAnPHRhYmxlIGNsYXNzPVwiaHNjLWtub2Nrb3V0LWxpc3RcIj4nO1xuICAgICAgICAgICAgb3V0cHV0ICs9IHJldHJpZXZlRW5jb3VudGVyR2FtZXMoZW5jb3VudGVyLmdhbWVzKTtcbiAgICAgICAgICAgIG91dHB1dCArPSAnPC90YWJsZT4nO1xuICAgICAgICAgICAgb3V0cHV0ICs9ICc8L2Rpdj4nO1xuXG4gICAgICAgICAgICByZXR1cm4gb3V0cHV0O1xuICAgICAgICB9O1xuXG4gICAgICAgIHZhciByZXRyaWV2ZUVuY291bnRlckdhbWVzID0gZnVuY3Rpb24oZ2FtZXMpIHtcbiAgICAgICAgICAgIHZhciBvdXRwdXQgPSAnJztcblxuICAgICAgICAgICAgXy5lYWNoKGdhbWVzLCBmdW5jdGlvbihnYW1lLCBrZXkpIHtcbiAgICAgICAgICAgICAgICBvdXRwdXQgKz0gcmV0cmlldmVFbmNvdW50ZXJHYW1lVGVtcGxhdGUoZ2FtZSk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgcmV0dXJuIG91dHB1dDtcbiAgICAgICAgfTtcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgaW5pdDogZnVuY3Rpb24oJGVsZW0pIHtcbiAgICAgICAgICAgICAgICB2YXIgc2VydmljZSA9IG5ldyBIb2NrZXlEYXRhU2VydmljZTtcbiAgICAgICAgICAgICAgICBkaXZpc2lvbklkID0gJGVsZW0uZGF0YSgnZGl2aXNpb24nKTtcbiAgICAgICAgICAgICAgICB0eXBlID0gJGVsZW0uZGF0YSgndHlwZScpO1xuXG4gICAgICAgICAgICAgICAgc2VydmljZS5nZXRLbm9ja291dChkaXZpc2lvbklkKS50aGVuKFxuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYnVpbGRXaWRnZXQoJGVsZW0sIHJlc3BvbnNlLmRhdGEpO1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2Vycm9yJywgcmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG5cbiAgICAkKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpIHtcbiAgICAgICAgXy50ZW1wbGF0ZVNldHRpbmdzID0ge1xuICAgICAgICAgICAgaW50ZXJwb2xhdGU6IC9cXHtcXHsoLis/KVxcfVxcfS9nXG4gICAgICAgIH07XG5cbiAgICAgICAgJCgnLmpzLWhzYy1rbm9ja291dCcpLmVhY2goZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgd2lkZ2V0ID0gbmV3IEhzY0tub2Nrb3V0O1xuICAgICAgICAgICAgd2lkZ2V0LmluaXQoJCh0aGlzKSk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xufSkoalF1ZXJ5KTtcbiIsIihmdW5jdGlvbigkKSB7XG4gICAgLy8gZnVuY3Rpb24gc2V0dXBfY29sbGFwc2libGVfc3VibWVudXMoKSB7XG4gICAgLy8gICAgIHZhciAkbWVudSA9ICQoJyNtb2JpbGVfbWVudScpO1xuICAgIC8vICAgICB2YXIgdG9wX2xldmVsX2xpbmsgPSAnI21vYmlsZV9tZW51IC5tZW51LWl0ZW0taGFzLWNoaWxkcmVuID4gYSc7XG5cbiAgICAvLyAgICAgJG1lbnUuZmluZCgnYScpLmVhY2goZnVuY3Rpb24oKSB7XG4gICAgLy8gICAgICAgICAkKHRoaXMpLm9mZignY2xpY2snKTtcblxuICAgIC8vICAgICAgICAgaWYgKCQodGhpcykuaXModG9wX2xldmVsX2xpbmspKSB7XG4gICAgLy8gICAgICAgICAgICAgJCh0aGlzKS5hdHRyKCdocmVmJywgJyMnKTtcbiAgICAvLyAgICAgICAgIH1cblxuICAgIC8vICAgICAgICAgaWYgKCEkKHRoaXMpLnNpYmxpbmdzKCcuc3ViLW1lbnUnKS5sZW5ndGgpIHtcbiAgICAvLyAgICAgICAgICAgICAkKHRoaXMpLm9uKCdjbGljaycsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgLy8gICAgICAgICAgICAgICAgICQodGhpcykucGFyZW50cygnLm1vYmlsZV9uYXYnKS50cmlnZ2VyKCdjbGljaycpO1xuICAgIC8vICAgICAgICAgICAgIH0pO1xuICAgIC8vICAgICAgICAgfSBlbHNlIHtcbiAgICAvLyAgICAgICAgICAgICAkKHRoaXMpLm9uKCdjbGljaycsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgLy8gICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgLy8gICAgICAgICAgICAgICAgICQodGhpcykucGFyZW50KCkudG9nZ2xlQ2xhc3MoJ3Zpc2libGUnKTtcbiAgICAvLyAgICAgICAgICAgICB9KTtcbiAgICAvLyAgICAgICAgIH1cbiAgICAvLyAgICAgfSk7XG4gICAgLy8gfVxuXG4gICAgZnVuY3Rpb24gaW5pdE1vYmlsZU1lbnUoKSB7XG4gICAgICAgIHZhciAkbWFpbkFyZWEgPSAkKCcjZXQtbWFpbi1hcmVhJyk7XG4gICAgICAgIHZhciAkbWVudUJ1dHRvbiA9ICQoJy5tb2JpbGVfbWVudV9iYXJfdG9nZ2xlJyk7XG5cbiAgICAgICAgJG1lbnVCdXR0b24ub24oJ2NsaWNrJywgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgICAgIGlmICgkKGV2ZW50LmN1cnJlbnRUYXJnZXQpLmhhc0NsYXNzKCdvcGVuZWQnKSkge1xuICAgICAgICAgICAgICAgICRtYWluQXJlYS5zaG93KCk7XG4gICAgICAgICAgICAgICAgJChldmVudC5jdXJyZW50VGFyZ2V0KS5yZW1vdmVDbGFzcygnb3BlbmVkJyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICRtYWluQXJlYS5oaWRlKCk7XG4gICAgICAgICAgICAgICAgJChldmVudC5jdXJyZW50VGFyZ2V0KS5hZGRDbGFzcygnb3BlbmVkJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgICQod2luZG93KS5sb2FkKGZ1bmN0aW9uKCkge1xuICAgICAgICAvLyBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAvLyAgICAgc2V0dXBfY29sbGFwc2libGVfc3VibWVudXMoKTtcbiAgICAgICAgLy8gfSwgNzAwKTtcblxuICAgICAgICBpbml0TW9iaWxlTWVudSgpO1xuICAgIH0pO1xufSkoalF1ZXJ5KTtcblxuIiwiKGZ1bmN0aW9uKCQpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcblxuICAgIHZhciBIb2NrZXlEYXRhV2lkZ2V0c1NjaGVkdWxlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBsb2dvQmFzZVVybCA9ICcvd3AtY29udGVudC90aGVtZXMvaHNjLXRoZW1lL2ltYWdlcy90ZWFtcyc7XG4gICAgICAgIHZhciBkaXZpc2lvbklkID0gJzEzNic7XG4gICAgICAgIHZhciB0ZWFtSWQgPSAnNzMxJztcblxuICAgICAgICB2YXIgYnVpbGRXaWRnZXRIZWFkZXIgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiAnPGRpdiBjbGFzcz1cImhzYy1nYW1lLXNjaGVkdWxlLWxpc3QtaGVhZGVyXCI+J1xuICAgICAgICAgICAgICAgICsgJyAgPGRpdiBjbGFzcz1cImRhdGVcIj5EYXR1bTwvZGl2PidcbiAgICAgICAgICAgICAgICArICcgIDxkaXYgY2xhc3M9XCJ0aW1lXCI+PC9kaXY+J1xuICAgICAgICAgICAgICAgICsgJyAgPGRpdiBjbGFzcz1cInRlYW1cIj5CZWdlZ251bmc8L2Rpdj4nXG4gICAgICAgICAgICAgICAgKyAnICA8ZGl2IGNsYXNzPVwic2NvcmVzXCI+RXJnZWJuaXM8L2Rpdj4nXG4gICAgICAgICAgICAgICAgKyAnPC9kaXY+JztcbiAgICAgICAgfTtcblxuICAgICAgICB2YXIgcmV0cmlldmVSb3dUZW1wbGF0ZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuICc8ZGl2IGNsYXNzPVwiaHNjLWdhbWUtc2NoZWR1bGUtbGlzdC1pdGVtXCI+J1xuICAgICAgICAgICAgICAgICsgJyAgPGRpdiBjbGFzcz1cInNjaGVkdWxlXCI+J1xuICAgICAgICAgICAgICAgICsgJyAgICA8ZGl2IGNsYXNzPVwiZGF0ZVwiPnt7IHNjaGVkdWxlZERhdGUudmFsdWUgfX08L2Rpdj4nXG4gICAgICAgICAgICAgICAgKyAnICAgIDxkaXYgY2xhc3M9XCJ0aW1lXCI+LSB7eyBzY2hlZHVsZWRUaW1lIH19PC9kaXY+J1xuICAgICAgICAgICAgICAgICsgJyAgPC9kaXY+J1xuICAgICAgICAgICAgICAgICsgJyAgPGRpdiBjbGFzcz1cImdhbWVcIj4nXG4gICAgICAgICAgICAgICAgKyAnICA8ZGl2IGNsYXNzPVwidGVhbXNcIj4nXG4gICAgICAgICAgICAgICAgKyAnICAgIDxkaXYgY2xhc3M9XCJ0ZWFtIHRlYW0taG9tZVwiPidcbiAgICAgICAgICAgICAgICArICcgICAgICA8ZGl2IGNsYXNzPVwidGVhbWxvZ29cIj48aW1nIHNyYz1cIicgKyBsb2dvQmFzZVVybCArICcve3sgaG9tZVRlYW1JZCB9fS5wbmdcIiAvPjwvZGl2PidcbiAgICAgICAgICAgICAgICArICcgICAgICA8ZGl2IGNsYXNzPVwidGVhbW5hbWVcIj57eyBob21lVGVhbUxvbmdOYW1lIH19PC9kaXY+J1xuICAgICAgICAgICAgICAgICsgJyAgICA8L2Rpdj4nXG4gICAgICAgICAgICAgICAgKyAnICAgIDxkaXYgY2xhc3M9XCJ0ZWFtIHRlYW0tYXdheVwiPidcbiAgICAgICAgICAgICAgICArICcgICAgICA8ZGl2IGNsYXNzPVwidGVhbWxvZ29cIj48aW1nIHNyYz1cIicgKyBsb2dvQmFzZVVybCArICcve3sgYXdheVRlYW1JZCB9fS5wbmdcIiAvPjwvZGl2PidcbiAgICAgICAgICAgICAgICArICcgICAgICA8ZGl2IGNsYXNzPVwidGVhbW5hbWVcIj57eyBhd2F5VGVhbUxvbmdOYW1lIH19PC9kaXY+J1xuICAgICAgICAgICAgICAgICsgJyAgICA8L2Rpdj4nXG4gICAgICAgICAgICAgICAgKyAnICA8L2Rpdj4nXG4gICAgICAgICAgICAgICAgKyAnICA8ZGl2IGNsYXNzPVwic2NvcmVzXCI+J1xuICAgICAgICAgICAgICAgICsgJyAgICAgIHt7IGhvbWVUZWFtU2NvcmUgPT09IG51bGwgPyBcIi1cIjogaG9tZVRlYW1TY29yZSB9fSdcbiAgICAgICAgICAgICAgICArICcgICAgICA6IHt7IGF3YXlUZWFtU2NvcmUgPT09IG51bGwgPyBcIi1cIjogYXdheVRlYW1TY29yZSB9fSdcbiAgICAgICAgICAgICAgICArICcgIDwvZGl2PidcbiAgICAgICAgICAgICAgICArICcgIDwvZGl2PidcbiAgICAgICAgICAgICAgICArICc8L2Rpdj4nO1xuICAgICAgICB9O1xuXG4gICAgICAgIHZhciBidWlsZFdpZGdldCA9IGZ1bmN0aW9uKCRlbGVtLCBkYXRhKSB7XG4gICAgICAgICAgICB2YXIgb3V0cHV0ID0gJzxkaXYgY2xhc3M9XCJoc2MtZ2FtZS1zY2hlZHVsZS1saXN0XCI+JztcbiAgICAgICAgICAgIHZhciByb3dzID0gYnVpbGRSb3dzKGRhdGEucm93cyk7XG4gICAgICAgICAgICAvLyBvdXRwdXQgKz0gYnVpbGRXaWRnZXRIZWFkZXIoKTtcbiAgICAgICAgICAgIG91dHB1dCArPSByb3dzO1xuICAgICAgICAgICAgb3V0cHV0ICs9ICc8L2Rpdj4nO1xuXG4gICAgICAgICAgICAkZWxlbS5odG1sKG91dHB1dCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgdmFyIGJ1aWxkUm93cyA9IGZ1bmN0aW9uKHJvd3MpIHtcbiAgICAgICAgICAgIHZhciBvdXRwdXQgPSAnJztcbiAgICAgICAgICAgIHZhciB0ZW1wbGF0ZSA9IF8udGVtcGxhdGUocmV0cmlldmVSb3dUZW1wbGF0ZSgpKTtcblxuICAgICAgICAgICAgXy5lYWNoKHJvd3MsIGZ1bmN0aW9uKHZhbHVlLCBrZXkpIHtcbiAgICAgICAgICAgICAgICBpZiAodmFsdWUuaG9tZVRlYW1JZCA9PT0gdGVhbUlkIHx8IHZhbHVlLmF3YXlUZWFtSWQgPT09IHRlYW1JZCkge1xuICAgICAgICAgICAgICAgICAgICBvdXRwdXQgKz0gdGVtcGxhdGUodmFsdWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICByZXR1cm4gb3V0cHV0O1xuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBpbml0OiBmdW5jdGlvbigkZWxlbSkge1xuICAgICAgICAgICAgICAgIHZhciBzZXJ2aWNlID0gbmV3IEhvY2tleURhdGFTZXJ2aWNlO1xuICAgICAgICAgICAgICAgIGRpdmlzaW9uSWQgPSAkZWxlbS5kYXRhKCdkaXZpc2lvbicpO1xuICAgICAgICAgICAgICAgIHRlYW1JZCA9ICRlbGVtLmRhdGEoJ3RlYW0nKTtcblxuICAgICAgICAgICAgICAgIHNlcnZpY2UuZ2V0U2NoZWR1bGUoZGl2aXNpb25JZCkudGhlbihcbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24ocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1aWxkV2lkZ2V0KCRlbGVtLCByZXNwb25zZS5kYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24ocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdlcnJvcicsIHJlc3BvbnNlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKSB7XG4gICAgICAgIF8udGVtcGxhdGVTZXR0aW5ncyA9IHtcbiAgICAgICAgICAgIGludGVycG9sYXRlOiAvXFx7XFx7KC4rPylcXH1cXH0vZ1xuICAgICAgICB9O1xuXG4gICAgICAgICQoJy5qcy13aWRnZXQtc2NoZWR1bGUnKS5lYWNoKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIHNjaGVkdWxlcyA9IG5ldyBIb2NrZXlEYXRhV2lkZ2V0c1NjaGVkdWxlO1xuICAgICAgICAgICAgc2NoZWR1bGVzLmluaXQoJCh0aGlzKSk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xufSkoalF1ZXJ5KTtcbiIsIihmdW5jdGlvbigkKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgdmFyIEhvY2tleURhdGFXaWRnZXRzU2NoZWR1bGVTaW5nbGUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGxvZ29CYXNlVXJsID0gJy93cC1jb250ZW50L3RoZW1lcy9oc2MtdGhlbWUvaW1hZ2VzL3RlYW1zJztcbiAgICAgICAgdmFyIGRpdmlzaW9uSWQgPSAnMTM2JztcbiAgICAgICAgdmFyIHRlYW1JZCA9ICc3MzEnO1xuICAgICAgICB2YXIgdHlwZSA9ICdsYXN0JztcblxuICAgICAgICB2YXIgcmV0cmlldmVSb3dUZW1wbGF0ZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIGNsYXNzTmFtZSA9ICdsYXN0LWdhbWUtd2lkZ2V0JztcblxuICAgICAgICAgICAgaWYgKHR5cGUgPT09ICduZXh0Jykge1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZSA9ICduZXh0LWdhbWUtd2lkZ2V0JztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuICc8ZGl2IGNsYXNzPVwiaHNjLWdhbWUtc2NoZWR1bGUtd2lkZ2V0ICcgKyBjbGFzc05hbWUgKyAnXCI+J1xuICAgICAgICAgICAgICAgICsgJzxkaXYgY2xhc3M9XCJzY2hlZHVsZS13aWRnZXQtaG9sZGVyXCI+J1xuICAgICAgICAgICAgICAgICsgJyAgPGRpdiBjbGFzcz1cImltYWdlIGltYWdlLWhvbWUtdGVhbVwiPidcbiAgICAgICAgICAgICAgICArICcgICAgPGltZyBzcmM9XCInICsgbG9nb0Jhc2VVcmwgKyAnL3t7IGhvbWVUZWFtSWQgfX0ucG5nXCIgLz4nXG4gICAgICAgICAgICAgICAgKyAnICA8L2Rpdj4nXG4gICAgICAgICAgICAgICAgKyAnICA8ZGl2IGNsYXNzPVwibWV0YVwiPidcbiAgICAgICAgICAgICAgICArICcgICAgPGRpdiBjbGFzcz1cImRhdGVcIj57eyBzY2hlZHVsZWREYXRlLnZhbHVlIH19PC9kaXY+J1xuICAgICAgICAgICAgICAgICsgJyAgICA8ZGl2IGNsYXNzPVwidGltZVwiPnt7IHNjaGVkdWxlZFRpbWUgfX08L2Rpdj4nXG4gICAgICAgICAgICAgICAgKyAnICAgIDxkaXYgY2xhc3M9XCJzY29yZXNcIj4nXG4gICAgICAgICAgICAgICAgKyAnICAgICAgPGRpdiBjbGFzcz1cInNjb3JlIHNjb3JlLWhvbWUtdGVhbVwiPnt7IGhvbWVUZWFtU2NvcmUgfX08L2Rpdj4nXG4gICAgICAgICAgICAgICAgKyAnICAgICAgPGRpdiBjbGFzcz1cImRpdmlkZXJcIj46PC9kaXY+J1xuICAgICAgICAgICAgICAgICsgJyAgICAgIDxkaXYgY2xhc3M9XCJzY29yZSBzY29yZS1hd2F5LXRlYW1cIj57eyBhd2F5VGVhbVNjb3JlIH19PC9kaXY+J1xuICAgICAgICAgICAgICAgICsgJyAgICA8L2Rpdj4nXG4gICAgICAgICAgICAgICAgKyAnICA8L2Rpdj4nXG4gICAgICAgICAgICAgICAgKyAnICA8ZGl2IGNsYXNzPVwiaW1hZ2UgaW1hZ2UtYXdheS10ZWFtXCI+J1xuICAgICAgICAgICAgICAgICsgJyAgICA8aW1nIHNyYz1cIicgKyBsb2dvQmFzZVVybCArICcve3sgYXdheVRlYW1JZCB9fS5wbmdcIiAvPidcbiAgICAgICAgICAgICAgICArICcgIDwvZGl2PidcbiAgICAgICAgICAgICAgICArICc8L2Rpdj4nXG4gICAgICAgICAgICAgICAgKyAnICA8ZGl2IGNsYXNzPVwidGVhbXNcIj4nXG4gICAgICAgICAgICAgICAgKyAnICAgIDxzcGFuIGNsYXNzPVwidGVhbSBob21lLXRlYW1cIj57eyBob21lVGVhbUxvbmdOYW1lIH19PC9zcGFuPidcbiAgICAgICAgICAgICAgICArICcgICAgPHNwYW4gY2xhc3M9XCJkaXZpZGVyXCI+LTwvc3Bhbj4nXG4gICAgICAgICAgICAgICAgKyAnICAgIDxzcGFuIGNsYXNzPVwidGVhbSBhd2F5LXRlYW1cIj57eyBhd2F5VGVhbUxvbmdOYW1lIH19PC9zcGFuPidcbiAgICAgICAgICAgICAgICArICcgIDwvZGl2PidcbiAgICAgICAgICAgICAgICArICc8L2Rpdj4nO1xuICAgICAgICB9O1xuXG4gICAgICAgIHZhciBidWlsZFdpZGdldCA9IGZ1bmN0aW9uKCRlbGVtLCBkYXRhKSB7XG4gICAgICAgICAgICB2YXIgb3V0cHV0ID0gJzxkaXY+JztcbiAgICAgICAgICAgIHZhciByb3dzID0gYnVpbGRSb3dzKGRhdGEucm93cyk7XG4gICAgICAgICAgICBvdXRwdXQgKz0gcm93cztcbiAgICAgICAgICAgIG91dHB1dCArPSAnPC9kaXY+JztcblxuICAgICAgICAgICAgJGVsZW0uaHRtbChvdXRwdXQpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHZhciBidWlsZFJvd3MgPSBmdW5jdGlvbihyb3dzKSB7XG4gICAgICAgICAgICB2YXIgb3V0cHV0ID0gJyc7XG4gICAgICAgICAgICB2YXIgdGVtcGxhdGUgPSBfLnRlbXBsYXRlKHJldHJpZXZlUm93VGVtcGxhdGUoKSk7XG4gICAgICAgICAgICB2YXIgdG9kYXkgPSBtb21lbnQoKTtcbiAgICAgICAgICAgIHZhciBsaW1pdCA9IDE7XG4gICAgICAgICAgICB2YXIgZm91bmQgPSAwO1xuXG4gICAgICAgICAgICBpZiAodHlwZSA9PT0gJ2xhc3QnKSB7XG4gICAgICAgICAgICAgICAgcm93cyA9IF8uY2hhaW4ocm93cykucmV2ZXJzZSgpLl93cmFwcGVkO1xuICAgICAgICAgICAgICAgIHZhciBsYXN0R2FtZSA9IF8uZmluZChyb3dzLCBmdW5jdGlvbihyb3cpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKChyb3cuaG9tZVRlYW1JZCA9PT0gdGVhbUlkIHx8IHJvdy5hd2F5VGVhbUlkID09PSB0ZWFtSWQpXG4gICAgICAgICAgICAgICAgICAgICAgICAmJiAocm93LnNjaGVkdWxlZERhdGUgJiYgcm93LnNjaGVkdWxlZERhdGUudmFsdWUpXG4gICAgICAgICAgICAgICAgICAgICAgICAmJiByb3cuaG9tZVRlYW1TY29yZSAhPT0gbnVsbFxuICAgICAgICAgICAgICAgICAgICAgICAgJiYgcm93LmF3YXlUZWFtU2NvcmUgIT09IG51bGxcbiAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZ2FtZURhdGUgPSBtb21lbnQocm93LnNjaGVkdWxlZERhdGUudmFsdWUsICdERC5NTS5ZWVlZJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZ2FtZURhdGUuaXNCZWZvcmUodG9kYXkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJvdztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgaWYgKGxhc3RHYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgIG91dHB1dCArPSB0ZW1wbGF0ZShsYXN0R2FtZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAodHlwZSA9PT0gJ25leHQnKSB7XG4gICAgICAgICAgICAgICAgdmFyIG5leHRHYW1lID0gXy5maW5kKHJvd3MsIGZ1bmN0aW9uKHJvdykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoKHJvdy5ob21lVGVhbUlkID09PSB0ZWFtSWQgfHwgcm93LmF3YXlUZWFtSWQgPT09IHRlYW1JZClcbiAgICAgICAgICAgICAgICAgICAgICAgICYmIChyb3cuc2NoZWR1bGVkRGF0ZSAmJiByb3cuc2NoZWR1bGVkRGF0ZS52YWx1ZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICYmIHJvdy5ob21lVGVhbVNjb3JlID09PSBudWxsXG4gICAgICAgICAgICAgICAgICAgICAgICAmJiByb3cuYXdheVRlYW1TY29yZSA9PT0gbnVsbFxuICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBnYW1lRGF0ZSA9IG1vbWVudChyb3cuc2NoZWR1bGVkRGF0ZS52YWx1ZSwgJ0RELk1NLllZWVknKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChnYW1lRGF0ZS5pc1NhbWVPckFmdGVyKHRvZGF5KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByb3c7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIGlmIChuZXh0R2FtZSkge1xuICAgICAgICAgICAgICAgICAgICBvdXRwdXQgKz0gdGVtcGxhdGUobmV4dEdhbWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIG91dHB1dDtcbiAgICAgICAgfTtcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgaW5pdDogZnVuY3Rpb24oJGVsZW0pIHtcbiAgICAgICAgICAgICAgICB2YXIgc2VydmljZSA9IG5ldyBIb2NrZXlEYXRhU2VydmljZTtcbiAgICAgICAgICAgICAgICBkaXZpc2lvbklkID0gJGVsZW0uZGF0YSgnZGl2aXNpb24nKTtcbiAgICAgICAgICAgICAgICB0ZWFtSWQgPSAkZWxlbS5kYXRhKCd0ZWFtJyk7XG4gICAgICAgICAgICAgICAgdHlwZSA9ICRlbGVtLmRhdGEoJ3R5cGUnKTtcblxuICAgICAgICAgICAgICAgIHZhciBkYXRhID0gc2VydmljZS5nZXRTY2hlZHVsZShkaXZpc2lvbklkKS50aGVuKFxuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYnVpbGRXaWRnZXQoJGVsZW0sIHJlc3BvbnNlLmRhdGEpO1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2Vycm9yJywgcmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gYnVpbGRXaWRnZXQoJGVsZW0sIEpTT04ucGFyc2UocmVzcG9uc2UuZGF0YSkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG5cbiAgICAkKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpIHtcbiAgICAgICAgXy50ZW1wbGF0ZVNldHRpbmdzID0ge1xuICAgICAgICAgICAgaW50ZXJwb2xhdGU6IC9cXHtcXHsoLis/KVxcfVxcfS9nXG4gICAgICAgIH07XG5cbiAgICAgICAgJCgnLmpzLXdpZGdldC1zY2hlZHVsZS1zaW5nbGUnKS5lYWNoKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIHNjaGVkdWxlc1NpbmdsZSA9IG5ldyBIb2NrZXlEYXRhV2lkZ2V0c1NjaGVkdWxlU2luZ2xlO1xuICAgICAgICAgICAgc2NoZWR1bGVzU2luZ2xlLmluaXQoJCh0aGlzKSk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xufSkoalF1ZXJ5KTtcbiIsIihmdW5jdGlvbigkKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgICBmdW5jdGlvbiBIb2NrZXlEYXRhV2lkZ2V0c1N0YW5kaW5ncygpIHtcbiAgICAgICAgdmFyIGxvZ29CYXNlVXJsID0gJy93cC1jb250ZW50L3RoZW1lcy9oc2MtdGhlbWUvaW1hZ2VzL3RlYW1zJztcbiAgICAgICAgdmFyIGRpdmlzaW9uSWQgPSAnMTM2JztcbiAgICAgICAgdmFyIHRlYW1JZCA9ICc3MzEnO1xuXG4gICAgICAgIHZhciByZXRyaWV2ZUhlYWRlclRlbXBsYXRlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gJzx0ciBjbGFzcz1cImhzYy1zdGFuZGluZ3MtaGVhZGVyXCI+J1xuICAgICAgICAgICAgICAgICsgJzx0ZCBjbGFzcz1cInJhbmtcIj4jPC90ZD4nXG4gICAgICAgICAgICAgICAgKyAnPHRkIGNsYXNzPVwiaW1hZ2VcIj48L3RkPidcbiAgICAgICAgICAgICAgICArICc8dGQgY2xhc3M9XCJ0ZWFtXCI+VGVhbTwvdGQ+J1xuICAgICAgICAgICAgICAgICsgJzx0ZCBjbGFzcz1cImluZm9cIj5HUDwvdGQ+J1xuICAgICAgICAgICAgICAgICsgJzx0ZCBjbGFzcz1cImluZm9cIj5XPC90ZD4nXG4gICAgICAgICAgICAgICAgKyAnPHRkIGNsYXNzPVwiaW5mb1wiPkw8L3RkPidcbiAgICAgICAgICAgICAgICArICc8dGQgY2xhc3M9XCJpbmZvXCI+UDwvdGQ+J1xuICAgICAgICAgICAgICAgICsgJzwvdHI+JztcbiAgICAgICAgfTtcblxuICAgICAgICB2YXIgcmV0cmlldmVSb3dUZW1wbGF0ZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuICc8dHIgY2xhc3M9XCJoc2Mtc3RhbmRpbmdzLXJvd1wiPidcbiAgICAgICAgICAgICAgICArICc8dGQgY2xhc3M9XCJyYW5rXCI+e3sgdGFibGVSYW5rIH19PC90ZD4nXG4gICAgICAgICAgICAgICAgKyAnPHRkIGNsYXNzPVwiaW1hZ2VcIj48aW1nIHNyYz1cIicgKyBsb2dvQmFzZVVybCArICcve3sgaWQgfX0ucG5nXCIgLz48L3RkPidcbiAgICAgICAgICAgICAgICArICc8dGQgY2xhc3M9XCJ0ZWFtXCI+e3sgdGVhbUxvbmduYW1lIH19PC90ZD4nXG4gICAgICAgICAgICAgICAgKyAnPHRkIGNsYXNzPVwiaW5mb1wiPnt7IGdhbWVzUGxheWVkIH19PC90ZD4nXG4gICAgICAgICAgICAgICAgKyAnPHRkIGNsYXNzPVwiaW5mb1wiPnt7IGdhbWVzV29uIH19PC90ZD4nXG4gICAgICAgICAgICAgICAgKyAnPHRkIGNsYXNzPVwiaW5mb1wiPnt7IGdhbWVzTG9zdCB9fTwvdGQ+J1xuICAgICAgICAgICAgICAgICsgJzx0ZCBjbGFzcz1cImluZm9cIj57eyBwb2ludHMgfX08L3RkPidcbiAgICAgICAgICAgICAgICArICc8L3RyPic7XG4gICAgICAgIH07XG5cbiAgICAgICAgdmFyIGJ1aWxkV2lkZ2V0ID0gZnVuY3Rpb24oJGVsZW0sIGRhdGEpIHtcbiAgICAgICAgICAgIHZhciBvdXRwdXQgPSAnPHRhYmxlIGNsYXNzPVwiaHNjLXRhYmxlIGhzYy1zdGFuZGluZ3NcIj4nO1xuICAgICAgICAgICAgdmFyIHJvd3MgPSBidWlsZFJvd3MoZGF0YS5yb3dzKTtcbiAgICAgICAgICAgIG91dHB1dCArPSByZXRyaWV2ZUhlYWRlclRlbXBsYXRlKCk7XG4gICAgICAgICAgICBvdXRwdXQgKz0gcm93cztcbiAgICAgICAgICAgIG91dHB1dCArPSAnPC90YWJsZT4nO1xuXG4gICAgICAgICAgICAkZWxlbS5odG1sKG91dHB1dCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgdmFyIGJ1aWxkUm93cyA9IGZ1bmN0aW9uKHJvd3MpIHtcbiAgICAgICAgICAgIHZhciBvdXRwdXQgPSAnJztcbiAgICAgICAgICAgIHZhciB0ZW1wbGF0ZSA9IF8udGVtcGxhdGUocmV0cmlldmVSb3dUZW1wbGF0ZSgpKTtcblxuICAgICAgICAgICAgXy5lYWNoKHJvd3MsIGZ1bmN0aW9uKHZhbHVlLCBrZXkpIHtcbiAgICAgICAgICAgICAgICBvdXRwdXQgKz0gdGVtcGxhdGUodmFsdWUpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHJldHVybiBvdXRwdXQ7XG4gICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGluaXQ6IGZ1bmN0aW9uKCRlbGVtKSB7XG4gICAgICAgICAgICAgICAgdmFyIHNlcnZpY2UgPSBuZXcgSG9ja2V5RGF0YVNlcnZpY2U7XG4gICAgICAgICAgICAgICAgZGl2aXNpb25JZCA9ICRlbGVtLmRhdGEoJ2RpdmlzaW9uJyk7XG5cbiAgICAgICAgICAgICAgICBzZXJ2aWNlLmdldFN0YW5kaW5ncyhkaXZpc2lvbklkKS50aGVuKFxuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYnVpbGRXaWRnZXQoJGVsZW0sIHJlc3BvbnNlLmRhdGEpO1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2Vycm9yJywgcmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG5cbiAgICAkKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpIHtcbiAgICAgICAgXy50ZW1wbGF0ZVNldHRpbmdzID0ge1xuICAgICAgICAgICAgaW50ZXJwb2xhdGU6IC9cXHtcXHsoLis/KVxcfVxcfS9nXG4gICAgICAgIH07XG5cbiAgICAgICAgJCgnLmpzLXdpZGdldC1zdGFuZGluZ3MnKS5lYWNoKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIHN0YW5kaW5ncyA9IG5ldyBIb2NrZXlEYXRhV2lkZ2V0c1N0YW5kaW5ncztcbiAgICAgICAgICAgIHN0YW5kaW5ncy5pbml0KCQodGhpcykpO1xuICAgICAgICB9KTtcbiAgICB9KTtcbn0pKGpRdWVyeSk7XG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
