!function(e){"use strict";function a(){var e="/wp-content/themes/hsc-theme/images/teams",a="136",t="halbfinale",s=function(a){var t='<table class="hsc-knockout-overview"><tr>  <td class="image">    <img src="'+e+'/{{ teams[0].id }}.png" />  </td>  <td class="meta">    <span class="score">{{ teams[0].gamesWon }} : {{ teams[1].gamesWon }}</span><br/>    <span class="bestof">Best of: {{ bestOf }}</span>  </td>  <td class="image">    <img src="'+e+'/{{ teams[1].id }}.png" />  </td></tr></table>';return(t=_.template(t))(a)},n=function(e){var a='<tr>  <td class="date" colspan="2">    {{ scheduledDate.value }} - {{ scheduledTime }}  </td></tr><tr>  <td class="team">{{ homeTeamLongName }} <br/> {{ awayTeamLongName }}</td>  <td class="score">{{ homeTeamScore }} : {{ awayTeamScore }}</td></tr>';return(a=_.template(a))(e)},i=function(e,a){var t='<div class="hsc-knockout">',s=c(a);t+=s,t+="</div>",e.html(t)},c=function(e){return d("halbfinale"===t.toLowerCase()?e.phases[0]:e.phases[1])},d=function(e){var a="";return _.each(e.encounters,function(e,t){a+=o(e)}),a},o=function(e){var a="",t={teams:e.teams,bestOf:e.bestOf};return a+='<div class="hsc-knockout-game">',a+=s(t),a+='<table class="hsc-knockout-list">',a+=r(e.games),a+="</table>",a+="</div>"},r=function(e){var a="";return _.each(e,function(e,t){a+=n(e)}),a};return{init:function(e){var s=new HockeyDataService;a=e.data("division"),t=e.data("type"),s.getKnockout(a).then(function(a){i(e,a.data)},function(e){console.log("error",e)})}}}e(document).ready(function(){_.templateSettings={interpolate:/\{\{(.+?)\}\}/g},e(".js-hsc-knockout").each(function(){var t=new a;t.init(e(this))})})}(jQuery),function(e){"use strict";var a=function(){var e="/wp-content/themes/hsc-theme/images/teams",a="136",t="731",s=function(){return'<div class="hsc-game-schedule-list-item">  <div class="schedule">    <div class="date">{{ scheduledDate.value }}</div>    <div class="time">- {{ scheduledTime }}</div>  </div>  <div class="game">  <div class="teams">    <div class="team team-home">      <div class="teamlogo"><img src="'+e+'/{{ homeTeamId }}.png" /></div>      <div class="teamname">{{ homeTeamLongName }}</div>    </div>    <div class="team team-away">      <div class="teamlogo"><img src="'+e+'/{{ awayTeamId }}.png" /></div>      <div class="teamname">{{ awayTeamLongName }}</div>    </div>  </div>  <div class="scores">      {{ homeTeamScore === null ? "-": homeTeamScore }}      : {{ awayTeamScore === null ? "-": awayTeamScore }}  </div>  </div></div>'},n=function(e,a){var t='<div class="hsc-game-schedule-list">',s=i(a.rows);t+=s,t+="</div>",e.html(t)},i=function(e){var a="",n=_.template(s());return _.each(e,function(e,s){(e.homeTeamId===t||e.awayTeamId===t)&&(a+=n(e))}),a};return{init:function(e){var s=new HockeyDataService;a=e.data("division"),t=e.data("team"),s.getSchedule(a).then(function(a){n(e,a.data)},function(e){console.log("error",e)})}}};e(document).ready(function(){_.templateSettings={interpolate:/\{\{(.+?)\}\}/g},e(".js-widget-schedule").each(function(){var t=new a;t.init(e(this))})})}(jQuery),function(e){"use strict";var a=function(){var e="/wp-content/themes/hsc-theme/images/teams",a="136",t="731",s="last",n=function(){var a="last-game-widget";return"next"===s&&(a="next-game-widget"),'<div class="hsc-game-schedule-widget '+a+'"><div class="schedule-widget-holder">  <div class="image image-home-team">    <img src="'+e+'/{{ homeTeamId }}.png" />  </div>  <div class="meta">    <div class="date">{{ scheduledDate.value }}</div>    <div class="time">{{ scheduledTime }}</div>    <div class="scores">      <div class="score score-home-team">{{ homeTeamScore }}</div>      <div class="divider">:</div>      <div class="score score-away-team">{{ awayTeamScore }}</div>    </div>  </div>  <div class="image image-away-team">    <img src="'+e+'/{{ awayTeamId }}.png" />  </div></div>  <div class="teams">    <span class="team home-team">{{ homeTeamLongName }}</span>    <span class="divider">-</span>    <span class="team away-team">{{ awayTeamLongName }}</span>  </div></div>'},i=function(e,a){var t="<div>",s=c(a.rows);t+=s,t+="</div>",e.html(t)},c=function(e){var a="",i=_.template(n()),c=moment();if("last"===s){e=_.chain(e).reverse()._wrapped;var d=_.find(e,function(e){if((e.homeTeamId===t||e.awayTeamId===t)&&e.scheduledDate&&e.scheduledDate.value&&null!==e.homeTeamScore&&null!==e.awayTeamScore){var a=moment(e.scheduledDate.value,"DD.MM.YYYY");if(a.isBefore(c))return e}});d&&(a+=i(d))}if("next"===s){var o=_.find(e,function(e){if((e.homeTeamId===t||e.awayTeamId===t)&&e.scheduledDate&&e.scheduledDate.value&&null===e.homeTeamScore&&null===e.awayTeamScore){var a=moment(e.scheduledDate.value,"DD.MM.YYYY");if(a.isSameOrAfter(c))return e}});o&&(a+=i(o))}return a};return{init:function(e){var n=new HockeyDataService;a=e.data("division"),t=e.data("team"),s=e.data("type");n.getSchedule(a).then(function(a){i(e,a.data)},function(e){console.log("error",e)})}}};e(document).ready(function(){_.templateSettings={interpolate:/\{\{(.+?)\}\}/g},e(".js-widget-schedule-single").each(function(){var t=new a;t.init(e(this))})})}(jQuery),function(e){"use strict";function a(){var e="/wp-content/themes/hsc-theme/images/teams",a="136",t=function(){return'<tr class="hsc-standings-header"><td class="rank">#</td><td class="image"></td><td class="team">Team</td><td class="info">GP</td><td class="info">W</td><td class="info">L</td><td class="info">P</td></tr>'},s=function(){return'<tr class="hsc-standings-row"><td class="rank">{{ tableRank }}</td><td class="image"><img src="'+e+'/{{ id }}.png" /></td><td class="team">{{ teamLongname }}</td><td class="info">{{ gamesPlayed }}</td><td class="info">{{ gamesWon }}</td><td class="info">{{ gamesLost }}</td><td class="info">{{ points }}</td></tr>'},n=function(e,a){var s='<table class="hsc-table hsc-standings">',n=i(a.rows);s+=t(),s+=n,s+="</table>",e.html(s)},i=function(e){var a="",t=_.template(s());return _.each(e,function(e,s){a+=t(e)}),a};return{init:function(e){var t=new HockeyDataService;a=e.data("division"),t.getStandings(a).then(function(a){n(e,a.data)},function(e){console.log("error",e)})}}}e(document).ready(function(){_.templateSettings={interpolate:/\{\{(.+?)\}\}/g},e(".js-widget-standings").each(function(){var t=new a;t.init(e(this))})})}(jQuery),function(e){window.HockeyDataService=function(){"use strict";var a="http://api.hockeydata.net/data/ebel",t="/Schedule",s="/Standings",n="/KnockoutStage",i={apiKey:"e52b5722cbc89c3e51ee0cd6e2485a81",divisionId:"136",league:"ebel",sport:"icehockey",referer:"www.h-sc.at"};return{getSchedule:function(s){var n=e.Deferred();i.divisionId=s;var c=e.param(i),d=a+t+"?"+c,o=e.ajax({url:d,dataType:"jsonp",async:!1});return o.success(function(e){return e.data.rows.push({id:"d9e6d977-e3bd-4d81-9788-722cdb9f669b",divisionId:136,divisionName:"VEHL 1",scheduledDate:{sortValue:14451804e5,value:"18.10.2019",shortValue:"18.10.",longValue:"18. Oktober 2015"},scheduledTime:"17:00",awayTeamId:728,awayTeamLongName:"EHC Megafit Ice Tigers Dornbirn",awayTeamShortName:"ITD",awayTeamFlavourname:"EHC Megafit Ice Tigers Dornbirn",homeTeamId:731,homeTeamLongName:"SC Hohenems 2",homeTeamShortName:"HO2",homeTeamFlavourname:"SC Hohenems 2",homeTeamScore:null,awayTeamScore:null}),n.resolve(e)}),o.error(function(e){return n.reject({data:{rows:[]}})}),n.promise()},getStandings:function(t){i.divisionId=t;var n=e.param(i),c=a+s+"?"+n;return e.ajax({url:c,dataType:"jsonp"})},getKnockout:function(t){i.divisionId=t;var s=e.param(i),c=a+n+"?"+s;return e.ajax({url:c,dataType:"jsonp"})}}}}(jQuery);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbXBvbmVudHMva25vY2tvdXQuanMiLCJjb21wb25lbnRzL3NjaGVkdWxlLWxpc3QuanMiLCJjb21wb25lbnRzL3NjaGVkdWxlLXdpZGdldC5qcyIsImNvbXBvbmVudHMvc3RhbmRpbmdzLmpzIiwic2VydmljZXMvaG9ja2V5ZGF0YS1zZXJ2aWNlLmpzIl0sIm5hbWVzIjpbIiQiLCJIc2NLbm9ja291dCIsImxvZ29CYXNlVXJsIiwiZGl2aXNpb25JZCIsInR5cGUiLCJyZXRyaWV2ZUVuY291bnRlck92ZXJ2aWV3VGVtcGxhdGUiLCJkYXRhIiwidGVtcGxhdGUiLCJfIiwicmV0cmlldmVFbmNvdW50ZXJHYW1lVGVtcGxhdGUiLCJnYW1lIiwiYnVpbGRXaWRnZXQiLCIkZWxlbSIsIm91dHB1dCIsInBoYXNlcyIsImJ1aWxkS25vY2tvdXRQaGFzZXMiLCJodG1sIiwicmV0cmlldmVLbm9ja291dFBoYXNlIiwidG9Mb3dlckNhc2UiLCJwaGFzZSIsImVhY2giLCJlbmNvdW50ZXJzIiwiZW5jb3VudGVyIiwia2V5IiwicmV0cmlldmVFbmNvdW50ZXIiLCJvdmVydmlld0RhdGEiLCJ0ZWFtcyIsImJlc3RPZiIsInJldHJpZXZlRW5jb3VudGVyR2FtZXMiLCJnYW1lcyIsImluaXQiLCJzZXJ2aWNlIiwiSG9ja2V5RGF0YVNlcnZpY2UiLCJnZXRLbm9ja291dCIsInRoZW4iLCJyZXNwb25zZSIsImNvbnNvbGUiLCJsb2ciLCJkb2N1bWVudCIsInJlYWR5IiwidGVtcGxhdGVTZXR0aW5ncyIsImludGVycG9sYXRlIiwid2lkZ2V0IiwidGhpcyIsImpRdWVyeSIsIkhvY2tleURhdGFXaWRnZXRzU2NoZWR1bGUiLCJ0ZWFtSWQiLCJyZXRyaWV2ZVJvd1RlbXBsYXRlIiwicm93cyIsImJ1aWxkUm93cyIsInZhbHVlIiwiaG9tZVRlYW1JZCIsImF3YXlUZWFtSWQiLCJnZXRTY2hlZHVsZSIsInNjaGVkdWxlcyIsIkhvY2tleURhdGFXaWRnZXRzU2NoZWR1bGVTaW5nbGUiLCJjbGFzc05hbWUiLCJ0b2RheSIsIm1vbWVudCIsImNoYWluIiwicmV2ZXJzZSIsIl93cmFwcGVkIiwibGFzdEdhbWUiLCJmaW5kIiwicm93Iiwic2NoZWR1bGVkRGF0ZSIsImhvbWVUZWFtU2NvcmUiLCJhd2F5VGVhbVNjb3JlIiwiZ2FtZURhdGUiLCJpc0JlZm9yZSIsIm5leHRHYW1lIiwiaXNTYW1lT3JBZnRlciIsInNjaGVkdWxlc1NpbmdsZSIsIkhvY2tleURhdGFXaWRnZXRzU3RhbmRpbmdzIiwicmV0cmlldmVIZWFkZXJUZW1wbGF0ZSIsImdldFN0YW5kaW5ncyIsInN0YW5kaW5ncyIsIndpbmRvdyIsImJhc2VVcmwiLCJzY2hlZHVsZVVybCIsInN0YW5kaW5nc1VybCIsImtub2Nrb3V0VXJsIiwidXJsUGFyYW1zIiwiYXBpS2V5IiwibGVhZ3VlIiwic3BvcnQiLCJyZWZlcmVyIiwiZGVmZXIiLCJEZWZlcnJlZCIsInBhcmFtcyIsInBhcmFtIiwidXJsIiwicmVxdWVzdCIsImFqYXgiLCJkYXRhVHlwZSIsImFzeW5jIiwic3VjY2VzcyIsInB1c2giLCJpZCIsImRpdmlzaW9uTmFtZSIsInNvcnRWYWx1ZSIsInNob3J0VmFsdWUiLCJsb25nVmFsdWUiLCJzY2hlZHVsZWRUaW1lIiwiYXdheVRlYW1Mb25nTmFtZSIsImF3YXlUZWFtU2hvcnROYW1lIiwiYXdheVRlYW1GbGF2b3VybmFtZSIsImhvbWVUZWFtTG9uZ05hbWUiLCJob21lVGVhbVNob3J0TmFtZSIsImhvbWVUZWFtRmxhdm91cm5hbWUiLCJyZXNvbHZlIiwiZXJyb3IiLCJyZWplY3QiLCJwcm9taXNlIl0sIm1hcHBpbmdzIjoiQ0FBQSxTQUFBQSxHQUNBLFlBRUEsU0FBQUMsS0FDQSxHQUFBQyxHQUFBLDRDQUNBQyxFQUFBLE1BRUFDLEVBQUEsYUFFQUMsRUFBQSxTQUFBQyxHQUNBLEdBQUFDLEdBQUEsOEVBR0FMLEVBQUEsME9BT0FBLEVBQUEsZ0RBTUEsUUFGQUssRUFBQUMsRUFBQUQsU0FBQUEsSUFFQUQsSUFHQUcsRUFBQSxT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SUFBQVMsQ0FFQSxPQUFBekYsR0FBQTZGLE1BQ0FGLElBQUFBLEVBQ0FHLFNBQUEsV0FHQTdELFlBQUEsU0FBQTlCLEdBQ0ErRSxFQUFBL0UsV0FBQUEsQ0FDQSxJQUFBc0YsR0FBQXpGLEVBQUEwRixNQUFBUixHQUNBUyxFQUFBYixFQUFBRyxFQUFBLElBQUFRLENBRUEsT0FBQXpGLEdBQUE2RixNQUNBRixJQUFBQSxFQUNBRyxTQUFBLGNBS0FsRCIsImZpbGUiOiJoc2MubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uKCQpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcblxuICAgIGZ1bmN0aW9uIEhzY0tub2Nrb3V0KCkge1xuICAgICAgICB2YXIgbG9nb0Jhc2VVcmwgPSAnL3dwLWNvbnRlbnQvdGhlbWVzL2hzYy10aGVtZS9pbWFnZXMvdGVhbXMnO1xuICAgICAgICB2YXIgZGl2aXNpb25JZCA9ICcxMzYnO1xuICAgICAgICB2YXIgdGVhbUlkID0gJzczMSc7XG4gICAgICAgIHZhciB0eXBlID0gJ2hhbGJmaW5hbGUnO1xuXG4gICAgICAgIHZhciByZXRyaWV2ZUVuY291bnRlck92ZXJ2aWV3VGVtcGxhdGUgPSBmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICB2YXIgdGVtcGxhdGUgPSAnPHRhYmxlIGNsYXNzPVwiaHNjLWtub2Nrb3V0LW92ZXJ2aWV3XCI+J1xuICAgICAgICAgICAgICAgICsgJzx0cj4nXG4gICAgICAgICAgICAgICAgKyAnICA8dGQgY2xhc3M9XCJpbWFnZVwiPidcbiAgICAgICAgICAgICAgICArICcgICAgPGltZyBzcmM9XCInICsgbG9nb0Jhc2VVcmwgKyAnL3t7IHRlYW1zWzBdLmlkIH19LnBuZ1wiIC8+J1xuICAgICAgICAgICAgICAgICsgJyAgPC90ZD4nXG4gICAgICAgICAgICAgICAgKyAnICA8dGQgY2xhc3M9XCJtZXRhXCI+J1xuICAgICAgICAgICAgICAgICsgJyAgICA8c3BhbiBjbGFzcz1cInNjb3JlXCI+e3sgdGVhbXNbMF0uZ2FtZXNXb24gfX0gOiB7eyB0ZWFtc1sxXS5nYW1lc1dvbiB9fTwvc3Bhbj48YnIvPidcbiAgICAgICAgICAgICAgICArICcgICAgPHNwYW4gY2xhc3M9XCJiZXN0b2ZcIj5CZXN0IG9mOiB7eyBiZXN0T2YgfX08L3NwYW4+J1xuICAgICAgICAgICAgICAgICsgJyAgPC90ZD4nXG4gICAgICAgICAgICAgICAgKyAnICA8dGQgY2xhc3M9XCJpbWFnZVwiPidcbiAgICAgICAgICAgICAgICArICcgICAgPGltZyBzcmM9XCInICsgbG9nb0Jhc2VVcmwgKyAnL3t7IHRlYW1zWzFdLmlkIH19LnBuZ1wiIC8+J1xuICAgICAgICAgICAgICAgICsgJyAgPC90ZD4nXG4gICAgICAgICAgICAgICAgKyAnPC90cj4nXG4gICAgICAgICAgICAgICAgKyAnPC90YWJsZT4nO1xuICAgICAgICAgICAgdGVtcGxhdGUgPSBfLnRlbXBsYXRlKHRlbXBsYXRlKTtcblxuICAgICAgICAgICAgcmV0dXJuIHRlbXBsYXRlKGRhdGEpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHZhciByZXRyaWV2ZUVuY291bnRlckdhbWVUZW1wbGF0ZSA9IGZ1bmN0aW9uKGdhbWUpIHtcbiAgICAgICAgICAgIHZhciB0ZW1wbGF0ZSA9ICc8dHI+J1xuICAgICAgICAgICAgICAgICsgJyAgPHRkIGNsYXNzPVwiZGF0ZVwiIGNvbHNwYW49XCIyXCI+J1xuICAgICAgICAgICAgICAgICsgJyAgICB7eyBzY2hlZHVsZWREYXRlLnZhbHVlIH19IC0ge3sgc2NoZWR1bGVkVGltZSB9fSdcbiAgICAgICAgICAgICAgICArICcgIDwvdGQ+J1xuICAgICAgICAgICAgICAgICsgJzwvdHI+PHRyPidcbiAgICAgICAgICAgICAgICArICcgIDx0ZCBjbGFzcz1cInRlYW1cIj57eyBob21lVGVhbUxvbmdOYW1lIH19IDxici8+IHt7IGF3YXlUZWFtTG9uZ05hbWUgfX08L3RkPidcbiAgICAgICAgICAgICAgICArICcgIDx0ZCBjbGFzcz1cInNjb3JlXCI+e3sgaG9tZVRlYW1TY29yZSB9fSA6IHt7IGF3YXlUZWFtU2NvcmUgfX08L3RkPidcbiAgICAgICAgICAgICAgICArICc8L3RyPic7XG4gICAgICAgICAgICB0ZW1wbGF0ZSA9IF8udGVtcGxhdGUodGVtcGxhdGUpO1xuXG4gICAgICAgICAgICByZXR1cm4gdGVtcGxhdGUoZ2FtZSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgdmFyIGJ1aWxkV2lkZ2V0ID0gZnVuY3Rpb24oJGVsZW0sIGRhdGEpIHtcbiAgICAgICAgICAgIHZhciBvdXRwdXQgPSAnPGRpdiBjbGFzcz1cImhzYy1rbm9ja291dFwiPic7XG4gICAgICAgICAgICB2YXIgcGhhc2VzID0gYnVpbGRLbm9ja291dFBoYXNlcyhkYXRhKTtcbiAgICAgICAgICAgIG91dHB1dCArPSBwaGFzZXM7XG4gICAgICAgICAgICBvdXRwdXQgKz0gJzwvZGl2Pic7XG5cbiAgICAgICAgICAgICRlbGVtLmh0bWwob3V0cHV0KTtcbiAgICAgICAgfTtcblxuICAgICAgICB2YXIgYnVpbGRLbm9ja291dFBoYXNlcyA9IGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgIGlmICh0eXBlLnRvTG93ZXJDYXNlKCkgPT09ICdoYWxiZmluYWxlJykge1xuICAgICAgICAgICAgICAgIHJldHVybiByZXRyaWV2ZUtub2Nrb3V0UGhhc2UoZGF0YS5waGFzZXNbMF0pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmV0cmlldmVLbm9ja291dFBoYXNlKGRhdGEucGhhc2VzWzFdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICB2YXIgcmV0cmlldmVLbm9ja291dFBoYXNlID0gZnVuY3Rpb24ocGhhc2UpIHtcbiAgICAgICAgICAgIHZhciBvdXRwdXQgPSAnJztcbiAgICAgICAgICAgIF8uZWFjaChwaGFzZS5lbmNvdW50ZXJzLCBmdW5jdGlvbihlbmNvdW50ZXIsIGtleSkge1xuICAgICAgICAgICAgICAgIG91dHB1dCArPSByZXRyaWV2ZUVuY291bnRlcihlbmNvdW50ZXIpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHJldHVybiBvdXRwdXQ7XG4gICAgICAgIH07XG5cbiAgICAgICAgdmFyIHJldHJpZXZlRW5jb3VudGVyID0gZnVuY3Rpb24oZW5jb3VudGVyKSB7XG4gICAgICAgICAgICB2YXIgb3V0cHV0ID0gJyc7XG4gICAgICAgICAgICB2YXIgb3ZlcnZpZXdEYXRhID0ge1xuICAgICAgICAgICAgICAgIHRlYW1zOiBlbmNvdW50ZXIudGVhbXMsXG4gICAgICAgICAgICAgICAgYmVzdE9mOiBlbmNvdW50ZXIuYmVzdE9mXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBvdXRwdXQgKz0gJzxkaXYgY2xhc3M9XCJoc2Mta25vY2tvdXQtZ2FtZVwiPic7XG4gICAgICAgICAgICBvdXRwdXQgKz0gcmV0cmlldmVFbmNvdW50ZXJPdmVydmlld1RlbXBsYXRlKG92ZXJ2aWV3RGF0YSk7XG5cbiAgICAgICAgICAgIG91dHB1dCArPSAnPHRhYmxlIGNsYXNzPVwiaHNjLWtub2Nrb3V0LWxpc3RcIj4nO1xuICAgICAgICAgICAgb3V0cHV0ICs9IHJldHJpZXZlRW5jb3VudGVyR2FtZXMoZW5jb3VudGVyLmdhbWVzKTtcbiAgICAgICAgICAgIG91dHB1dCArPSAnPC90YWJsZT4nO1xuICAgICAgICAgICAgb3V0cHV0ICs9ICc8L2Rpdj4nO1xuXG4gICAgICAgICAgICByZXR1cm4gb3V0cHV0O1xuICAgICAgICB9O1xuXG4gICAgICAgIHZhciByZXRyaWV2ZUVuY291bnRlckdhbWVzID0gZnVuY3Rpb24oZ2FtZXMpIHtcbiAgICAgICAgICAgIHZhciBvdXRwdXQgPSAnJztcblxuICAgICAgICAgICAgXy5lYWNoKGdhbWVzLCBmdW5jdGlvbihnYW1lLCBrZXkpIHtcbiAgICAgICAgICAgICAgICBvdXRwdXQgKz0gcmV0cmlldmVFbmNvdW50ZXJHYW1lVGVtcGxhdGUoZ2FtZSk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgcmV0dXJuIG91dHB1dDtcbiAgICAgICAgfTtcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgaW5pdDogZnVuY3Rpb24oJGVsZW0pIHtcbiAgICAgICAgICAgICAgICB2YXIgc2VydmljZSA9IG5ldyBIb2NrZXlEYXRhU2VydmljZTtcbiAgICAgICAgICAgICAgICBkaXZpc2lvbklkID0gJGVsZW0uZGF0YSgnZGl2aXNpb24nKTtcbiAgICAgICAgICAgICAgICB0eXBlID0gJGVsZW0uZGF0YSgndHlwZScpO1xuXG4gICAgICAgICAgICAgICAgc2VydmljZS5nZXRLbm9ja291dChkaXZpc2lvbklkKS50aGVuKFxuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYnVpbGRXaWRnZXQoJGVsZW0sIHJlc3BvbnNlLmRhdGEpO1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2Vycm9yJywgcmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG5cbiAgICAkKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpIHtcbiAgICAgICAgXy50ZW1wbGF0ZVNldHRpbmdzID0ge1xuICAgICAgICAgICAgaW50ZXJwb2xhdGU6IC9cXHtcXHsoLis/KVxcfVxcfS9nXG4gICAgICAgIH07XG5cbiAgICAgICAgJCgnLmpzLWhzYy1rbm9ja291dCcpLmVhY2goZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgd2lkZ2V0ID0gbmV3IEhzY0tub2Nrb3V0O1xuICAgICAgICAgICAgd2lkZ2V0LmluaXQoJCh0aGlzKSk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xufSkoalF1ZXJ5KTtcbiIsIihmdW5jdGlvbigkKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgICB2YXIgSG9ja2V5RGF0YVdpZGdldHNTY2hlZHVsZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgbG9nb0Jhc2VVcmwgPSAnL3dwLWNvbnRlbnQvdGhlbWVzL2hzYy10aGVtZS9pbWFnZXMvdGVhbXMnO1xuICAgICAgICB2YXIgZGl2aXNpb25JZCA9ICcxMzYnO1xuICAgICAgICB2YXIgdGVhbUlkID0gJzczMSc7XG5cbiAgICAgICAgdmFyIGJ1aWxkV2lkZ2V0SGVhZGVyID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gJzxkaXYgY2xhc3M9XCJoc2MtZ2FtZS1zY2hlZHVsZS1saXN0LWhlYWRlclwiPidcbiAgICAgICAgICAgICAgICArICcgIDxkaXYgY2xhc3M9XCJkYXRlXCI+RGF0dW08L2Rpdj4nXG4gICAgICAgICAgICAgICAgKyAnICA8ZGl2IGNsYXNzPVwidGltZVwiPjwvZGl2PidcbiAgICAgICAgICAgICAgICArICcgIDxkaXYgY2xhc3M9XCJ0ZWFtXCI+QmVnZWdudW5nPC9kaXY+J1xuICAgICAgICAgICAgICAgICsgJyAgPGRpdiBjbGFzcz1cInNjb3Jlc1wiPkVyZ2VibmlzPC9kaXY+J1xuICAgICAgICAgICAgICAgICsgJzwvZGl2Pic7XG4gICAgICAgIH07XG5cbiAgICAgICAgdmFyIHJldHJpZXZlUm93VGVtcGxhdGUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiAnPGRpdiBjbGFzcz1cImhzYy1nYW1lLXNjaGVkdWxlLWxpc3QtaXRlbVwiPidcbiAgICAgICAgICAgICAgICArICcgIDxkaXYgY2xhc3M9XCJzY2hlZHVsZVwiPidcbiAgICAgICAgICAgICAgICArICcgICAgPGRpdiBjbGFzcz1cImRhdGVcIj57eyBzY2hlZHVsZWREYXRlLnZhbHVlIH19PC9kaXY+J1xuICAgICAgICAgICAgICAgICsgJyAgICA8ZGl2IGNsYXNzPVwidGltZVwiPi0ge3sgc2NoZWR1bGVkVGltZSB9fTwvZGl2PidcbiAgICAgICAgICAgICAgICArICcgIDwvZGl2PidcbiAgICAgICAgICAgICAgICArICcgIDxkaXYgY2xhc3M9XCJnYW1lXCI+J1xuICAgICAgICAgICAgICAgICsgJyAgPGRpdiBjbGFzcz1cInRlYW1zXCI+J1xuICAgICAgICAgICAgICAgICsgJyAgICA8ZGl2IGNsYXNzPVwidGVhbSB0ZWFtLWhvbWVcIj4nXG4gICAgICAgICAgICAgICAgKyAnICAgICAgPGRpdiBjbGFzcz1cInRlYW1sb2dvXCI+PGltZyBzcmM9XCInICsgbG9nb0Jhc2VVcmwgKyAnL3t7IGhvbWVUZWFtSWQgfX0ucG5nXCIgLz48L2Rpdj4nXG4gICAgICAgICAgICAgICAgKyAnICAgICAgPGRpdiBjbGFzcz1cInRlYW1uYW1lXCI+e3sgaG9tZVRlYW1Mb25nTmFtZSB9fTwvZGl2PidcbiAgICAgICAgICAgICAgICArICcgICAgPC9kaXY+J1xuICAgICAgICAgICAgICAgICsgJyAgICA8ZGl2IGNsYXNzPVwidGVhbSB0ZWFtLWF3YXlcIj4nXG4gICAgICAgICAgICAgICAgKyAnICAgICAgPGRpdiBjbGFzcz1cInRlYW1sb2dvXCI+PGltZyBzcmM9XCInICsgbG9nb0Jhc2VVcmwgKyAnL3t7IGF3YXlUZWFtSWQgfX0ucG5nXCIgLz48L2Rpdj4nXG4gICAgICAgICAgICAgICAgKyAnICAgICAgPGRpdiBjbGFzcz1cInRlYW1uYW1lXCI+e3sgYXdheVRlYW1Mb25nTmFtZSB9fTwvZGl2PidcbiAgICAgICAgICAgICAgICArICcgICAgPC9kaXY+J1xuICAgICAgICAgICAgICAgICsgJyAgPC9kaXY+J1xuICAgICAgICAgICAgICAgICsgJyAgPGRpdiBjbGFzcz1cInNjb3Jlc1wiPidcbiAgICAgICAgICAgICAgICArICcgICAgICB7eyBob21lVGVhbVNjb3JlID09PSBudWxsID8gXCItXCI6IGhvbWVUZWFtU2NvcmUgfX0nXG4gICAgICAgICAgICAgICAgKyAnICAgICAgOiB7eyBhd2F5VGVhbVNjb3JlID09PSBudWxsID8gXCItXCI6IGF3YXlUZWFtU2NvcmUgfX0nXG4gICAgICAgICAgICAgICAgKyAnICA8L2Rpdj4nXG4gICAgICAgICAgICAgICAgKyAnICA8L2Rpdj4nXG4gICAgICAgICAgICAgICAgKyAnPC9kaXY+JztcbiAgICAgICAgfTtcblxuICAgICAgICB2YXIgYnVpbGRXaWRnZXQgPSBmdW5jdGlvbigkZWxlbSwgZGF0YSkge1xuICAgICAgICAgICAgdmFyIG91dHB1dCA9ICc8ZGl2IGNsYXNzPVwiaHNjLWdhbWUtc2NoZWR1bGUtbGlzdFwiPic7XG4gICAgICAgICAgICB2YXIgcm93cyA9IGJ1aWxkUm93cyhkYXRhLnJvd3MpO1xuICAgICAgICAgICAgLy8gb3V0cHV0ICs9IGJ1aWxkV2lkZ2V0SGVhZGVyKCk7XG4gICAgICAgICAgICBvdXRwdXQgKz0gcm93cztcbiAgICAgICAgICAgIG91dHB1dCArPSAnPC9kaXY+JztcblxuICAgICAgICAgICAgJGVsZW0uaHRtbChvdXRwdXQpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHZhciBidWlsZFJvd3MgPSBmdW5jdGlvbihyb3dzKSB7XG4gICAgICAgICAgICB2YXIgb3V0cHV0ID0gJyc7XG4gICAgICAgICAgICB2YXIgdGVtcGxhdGUgPSBfLnRlbXBsYXRlKHJldHJpZXZlUm93VGVtcGxhdGUoKSk7XG5cbiAgICAgICAgICAgIF8uZWFjaChyb3dzLCBmdW5jdGlvbih2YWx1ZSwga2V5KSB7XG4gICAgICAgICAgICAgICAgaWYgKHZhbHVlLmhvbWVUZWFtSWQgPT09IHRlYW1JZCB8fCB2YWx1ZS5hd2F5VGVhbUlkID09PSB0ZWFtSWQpIHtcbiAgICAgICAgICAgICAgICAgICAgb3V0cHV0ICs9IHRlbXBsYXRlKHZhbHVlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgcmV0dXJuIG91dHB1dDtcbiAgICAgICAgfTtcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgaW5pdDogZnVuY3Rpb24oJGVsZW0pIHtcbiAgICAgICAgICAgICAgICB2YXIgc2VydmljZSA9IG5ldyBIb2NrZXlEYXRhU2VydmljZTtcbiAgICAgICAgICAgICAgICBkaXZpc2lvbklkID0gJGVsZW0uZGF0YSgnZGl2aXNpb24nKTtcbiAgICAgICAgICAgICAgICB0ZWFtSWQgPSAkZWxlbS5kYXRhKCd0ZWFtJyk7XG5cbiAgICAgICAgICAgICAgICBzZXJ2aWNlLmdldFNjaGVkdWxlKGRpdmlzaW9uSWQpLnRoZW4oXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBidWlsZFdpZGdldCgkZWxlbSwgcmVzcG9uc2UuZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnZXJyb3InLCByZXNwb25zZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcblxuICAgICQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCkge1xuICAgICAgICBfLnRlbXBsYXRlU2V0dGluZ3MgPSB7XG4gICAgICAgICAgICBpbnRlcnBvbGF0ZTogL1xce1xceyguKz8pXFx9XFx9L2dcbiAgICAgICAgfTtcblxuICAgICAgICAkKCcuanMtd2lkZ2V0LXNjaGVkdWxlJykuZWFjaChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciBzY2hlZHVsZXMgPSBuZXcgSG9ja2V5RGF0YVdpZGdldHNTY2hlZHVsZTtcbiAgICAgICAgICAgIHNjaGVkdWxlcy5pbml0KCQodGhpcykpO1xuICAgICAgICB9KTtcbiAgICB9KTtcbn0pKGpRdWVyeSk7XG4iLCIoZnVuY3Rpb24oJCkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIHZhciBIb2NrZXlEYXRhV2lkZ2V0c1NjaGVkdWxlU2luZ2xlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBsb2dvQmFzZVVybCA9ICcvd3AtY29udGVudC90aGVtZXMvaHNjLXRoZW1lL2ltYWdlcy90ZWFtcyc7XG4gICAgICAgIHZhciBkaXZpc2lvbklkID0gJzEzNic7XG4gICAgICAgIHZhciB0ZWFtSWQgPSAnNzMxJztcbiAgICAgICAgdmFyIHR5cGUgPSAnbGFzdCc7XG5cbiAgICAgICAgdmFyIHJldHJpZXZlUm93VGVtcGxhdGUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciBjbGFzc05hbWUgPSAnbGFzdC1nYW1lLXdpZGdldCc7XG5cbiAgICAgICAgICAgIGlmICh0eXBlID09PSAnbmV4dCcpIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWUgPSAnbmV4dC1nYW1lLXdpZGdldCc7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiAnPGRpdiBjbGFzcz1cImhzYy1nYW1lLXNjaGVkdWxlLXdpZGdldCAnICsgY2xhc3NOYW1lICsgJ1wiPidcbiAgICAgICAgICAgICAgICArICc8ZGl2IGNsYXNzPVwic2NoZWR1bGUtd2lkZ2V0LWhvbGRlclwiPidcbiAgICAgICAgICAgICAgICArICcgIDxkaXYgY2xhc3M9XCJpbWFnZSBpbWFnZS1ob21lLXRlYW1cIj4nXG4gICAgICAgICAgICAgICAgKyAnICAgIDxpbWcgc3JjPVwiJyArIGxvZ29CYXNlVXJsICsgJy97eyBob21lVGVhbUlkIH19LnBuZ1wiIC8+J1xuICAgICAgICAgICAgICAgICsgJyAgPC9kaXY+J1xuICAgICAgICAgICAgICAgICsgJyAgPGRpdiBjbGFzcz1cIm1ldGFcIj4nXG4gICAgICAgICAgICAgICAgKyAnICAgIDxkaXYgY2xhc3M9XCJkYXRlXCI+e3sgc2NoZWR1bGVkRGF0ZS52YWx1ZSB9fTwvZGl2PidcbiAgICAgICAgICAgICAgICArICcgICAgPGRpdiBjbGFzcz1cInRpbWVcIj57eyBzY2hlZHVsZWRUaW1lIH19PC9kaXY+J1xuICAgICAgICAgICAgICAgICsgJyAgICA8ZGl2IGNsYXNzPVwic2NvcmVzXCI+J1xuICAgICAgICAgICAgICAgICsgJyAgICAgIDxkaXYgY2xhc3M9XCJzY29yZSBzY29yZS1ob21lLXRlYW1cIj57eyBob21lVGVhbVNjb3JlIH19PC9kaXY+J1xuICAgICAgICAgICAgICAgICsgJyAgICAgIDxkaXYgY2xhc3M9XCJkaXZpZGVyXCI+OjwvZGl2PidcbiAgICAgICAgICAgICAgICArICcgICAgICA8ZGl2IGNsYXNzPVwic2NvcmUgc2NvcmUtYXdheS10ZWFtXCI+e3sgYXdheVRlYW1TY29yZSB9fTwvZGl2PidcbiAgICAgICAgICAgICAgICArICcgICAgPC9kaXY+J1xuICAgICAgICAgICAgICAgICsgJyAgPC9kaXY+J1xuICAgICAgICAgICAgICAgICsgJyAgPGRpdiBjbGFzcz1cImltYWdlIGltYWdlLWF3YXktdGVhbVwiPidcbiAgICAgICAgICAgICAgICArICcgICAgPGltZyBzcmM9XCInICsgbG9nb0Jhc2VVcmwgKyAnL3t7IGF3YXlUZWFtSWQgfX0ucG5nXCIgLz4nXG4gICAgICAgICAgICAgICAgKyAnICA8L2Rpdj4nXG4gICAgICAgICAgICAgICAgKyAnPC9kaXY+J1xuICAgICAgICAgICAgICAgICsgJyAgPGRpdiBjbGFzcz1cInRlYW1zXCI+J1xuICAgICAgICAgICAgICAgICsgJyAgICA8c3BhbiBjbGFzcz1cInRlYW0gaG9tZS10ZWFtXCI+e3sgaG9tZVRlYW1Mb25nTmFtZSB9fTwvc3Bhbj4nXG4gICAgICAgICAgICAgICAgKyAnICAgIDxzcGFuIGNsYXNzPVwiZGl2aWRlclwiPi08L3NwYW4+J1xuICAgICAgICAgICAgICAgICsgJyAgICA8c3BhbiBjbGFzcz1cInRlYW0gYXdheS10ZWFtXCI+e3sgYXdheVRlYW1Mb25nTmFtZSB9fTwvc3Bhbj4nXG4gICAgICAgICAgICAgICAgKyAnICA8L2Rpdj4nXG4gICAgICAgICAgICAgICAgKyAnPC9kaXY+JztcbiAgICAgICAgfTtcblxuICAgICAgICB2YXIgYnVpbGRXaWRnZXQgPSBmdW5jdGlvbigkZWxlbSwgZGF0YSkge1xuICAgICAgICAgICAgdmFyIG91dHB1dCA9ICc8ZGl2Pic7XG4gICAgICAgICAgICB2YXIgcm93cyA9IGJ1aWxkUm93cyhkYXRhLnJvd3MpO1xuICAgICAgICAgICAgb3V0cHV0ICs9IHJvd3M7XG4gICAgICAgICAgICBvdXRwdXQgKz0gJzwvZGl2Pic7XG5cbiAgICAgICAgICAgICRlbGVtLmh0bWwob3V0cHV0KTtcbiAgICAgICAgfTtcblxuICAgICAgICB2YXIgYnVpbGRSb3dzID0gZnVuY3Rpb24ocm93cykge1xuICAgICAgICAgICAgdmFyIG91dHB1dCA9ICcnO1xuICAgICAgICAgICAgdmFyIHRlbXBsYXRlID0gXy50ZW1wbGF0ZShyZXRyaWV2ZVJvd1RlbXBsYXRlKCkpO1xuICAgICAgICAgICAgdmFyIHRvZGF5ID0gbW9tZW50KCk7XG4gICAgICAgICAgICB2YXIgbGltaXQgPSAxO1xuICAgICAgICAgICAgdmFyIGZvdW5kID0gMDtcblxuICAgICAgICAgICAgaWYgKHR5cGUgPT09ICdsYXN0Jykge1xuICAgICAgICAgICAgICAgIHJvd3MgPSBfLmNoYWluKHJvd3MpLnJldmVyc2UoKS5fd3JhcHBlZDtcbiAgICAgICAgICAgICAgICB2YXIgbGFzdEdhbWUgPSBfLmZpbmQocm93cywgZnVuY3Rpb24ocm93KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICgocm93LmhvbWVUZWFtSWQgPT09IHRlYW1JZCB8fCByb3cuYXdheVRlYW1JZCA9PT0gdGVhbUlkKVxuICAgICAgICAgICAgICAgICAgICAgICAgJiYgKHJvdy5zY2hlZHVsZWREYXRlICYmIHJvdy5zY2hlZHVsZWREYXRlLnZhbHVlKVxuICAgICAgICAgICAgICAgICAgICAgICAgJiYgcm93LmhvbWVUZWFtU2NvcmUgIT09IG51bGxcbiAgICAgICAgICAgICAgICAgICAgICAgICYmIHJvdy5hd2F5VGVhbVNjb3JlICE9PSBudWxsXG4gICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGdhbWVEYXRlID0gbW9tZW50KHJvdy5zY2hlZHVsZWREYXRlLnZhbHVlLCAnREQuTU0uWVlZWScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGdhbWVEYXRlLmlzQmVmb3JlKHRvZGF5KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByb3c7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIGlmIChsYXN0R2FtZSkge1xuICAgICAgICAgICAgICAgICAgICBvdXRwdXQgKz0gdGVtcGxhdGUobGFzdEdhbWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHR5cGUgPT09ICduZXh0Jykge1xuICAgICAgICAgICAgICAgIHZhciBuZXh0R2FtZSA9IF8uZmluZChyb3dzLCBmdW5jdGlvbihyb3cpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKChyb3cuaG9tZVRlYW1JZCA9PT0gdGVhbUlkIHx8IHJvdy5hd2F5VGVhbUlkID09PSB0ZWFtSWQpXG4gICAgICAgICAgICAgICAgICAgICAgICAmJiAocm93LnNjaGVkdWxlZERhdGUgJiYgcm93LnNjaGVkdWxlZERhdGUudmFsdWUpXG4gICAgICAgICAgICAgICAgICAgICAgICAmJiByb3cuaG9tZVRlYW1TY29yZSA9PT0gbnVsbFxuICAgICAgICAgICAgICAgICAgICAgICAgJiYgcm93LmF3YXlUZWFtU2NvcmUgPT09IG51bGxcbiAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZ2FtZURhdGUgPSBtb21lbnQocm93LnNjaGVkdWxlZERhdGUudmFsdWUsICdERC5NTS5ZWVlZJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZ2FtZURhdGUuaXNTYW1lT3JBZnRlcih0b2RheSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcm93O1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBpZiAobmV4dEdhbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgb3V0cHV0ICs9IHRlbXBsYXRlKG5leHRHYW1lKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBvdXRwdXQ7XG4gICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGluaXQ6IGZ1bmN0aW9uKCRlbGVtKSB7XG4gICAgICAgICAgICAgICAgdmFyIHNlcnZpY2UgPSBuZXcgSG9ja2V5RGF0YVNlcnZpY2U7XG4gICAgICAgICAgICAgICAgZGl2aXNpb25JZCA9ICRlbGVtLmRhdGEoJ2RpdmlzaW9uJyk7XG4gICAgICAgICAgICAgICAgdGVhbUlkID0gJGVsZW0uZGF0YSgndGVhbScpO1xuICAgICAgICAgICAgICAgIHR5cGUgPSAkZWxlbS5kYXRhKCd0eXBlJyk7XG5cbiAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IHNlcnZpY2UuZ2V0U2NoZWR1bGUoZGl2aXNpb25JZCkudGhlbihcbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24ocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1aWxkV2lkZ2V0KCRlbGVtLCByZXNwb25zZS5kYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24ocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdlcnJvcicsIHJlc3BvbnNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGJ1aWxkV2lkZ2V0KCRlbGVtLCBKU09OLnBhcnNlKHJlc3BvbnNlLmRhdGEpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKSB7XG4gICAgICAgIF8udGVtcGxhdGVTZXR0aW5ncyA9IHtcbiAgICAgICAgICAgIGludGVycG9sYXRlOiAvXFx7XFx7KC4rPylcXH1cXH0vZ1xuICAgICAgICB9O1xuXG4gICAgICAgICQoJy5qcy13aWRnZXQtc2NoZWR1bGUtc2luZ2xlJykuZWFjaChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciBzY2hlZHVsZXNTaW5nbGUgPSBuZXcgSG9ja2V5RGF0YVdpZGdldHNTY2hlZHVsZVNpbmdsZTtcbiAgICAgICAgICAgIHNjaGVkdWxlc1NpbmdsZS5pbml0KCQodGhpcykpO1xuICAgICAgICB9KTtcbiAgICB9KTtcbn0pKGpRdWVyeSk7XG4iLCIoZnVuY3Rpb24oJCkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuXG4gICAgZnVuY3Rpb24gSG9ja2V5RGF0YVdpZGdldHNTdGFuZGluZ3MoKSB7XG4gICAgICAgIHZhciBsb2dvQmFzZVVybCA9ICcvd3AtY29udGVudC90aGVtZXMvaHNjLXRoZW1lL2ltYWdlcy90ZWFtcyc7XG4gICAgICAgIHZhciBkaXZpc2lvbklkID0gJzEzNic7XG4gICAgICAgIHZhciB0ZWFtSWQgPSAnNzMxJztcblxuICAgICAgICB2YXIgcmV0cmlldmVIZWFkZXJUZW1wbGF0ZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuICc8dHIgY2xhc3M9XCJoc2Mtc3RhbmRpbmdzLWhlYWRlclwiPidcbiAgICAgICAgICAgICAgICArICc8dGQgY2xhc3M9XCJyYW5rXCI+IzwvdGQ+J1xuICAgICAgICAgICAgICAgICsgJzx0ZCBjbGFzcz1cImltYWdlXCI+PC90ZD4nXG4gICAgICAgICAgICAgICAgKyAnPHRkIGNsYXNzPVwidGVhbVwiPlRlYW08L3RkPidcbiAgICAgICAgICAgICAgICArICc8dGQgY2xhc3M9XCJpbmZvXCI+R1A8L3RkPidcbiAgICAgICAgICAgICAgICArICc8dGQgY2xhc3M9XCJpbmZvXCI+VzwvdGQ+J1xuICAgICAgICAgICAgICAgICsgJzx0ZCBjbGFzcz1cImluZm9cIj5MPC90ZD4nXG4gICAgICAgICAgICAgICAgKyAnPHRkIGNsYXNzPVwiaW5mb1wiPlA8L3RkPidcbiAgICAgICAgICAgICAgICArICc8L3RyPic7XG4gICAgICAgIH07XG5cbiAgICAgICAgdmFyIHJldHJpZXZlUm93VGVtcGxhdGUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiAnPHRyIGNsYXNzPVwiaHNjLXN0YW5kaW5ncy1yb3dcIj4nXG4gICAgICAgICAgICAgICAgKyAnPHRkIGNsYXNzPVwicmFua1wiPnt7IHRhYmxlUmFuayB9fTwvdGQ+J1xuICAgICAgICAgICAgICAgICsgJzx0ZCBjbGFzcz1cImltYWdlXCI+PGltZyBzcmM9XCInICsgbG9nb0Jhc2VVcmwgKyAnL3t7IGlkIH19LnBuZ1wiIC8+PC90ZD4nXG4gICAgICAgICAgICAgICAgKyAnPHRkIGNsYXNzPVwidGVhbVwiPnt7IHRlYW1Mb25nbmFtZSB9fTwvdGQ+J1xuICAgICAgICAgICAgICAgICsgJzx0ZCBjbGFzcz1cImluZm9cIj57eyBnYW1lc1BsYXllZCB9fTwvdGQ+J1xuICAgICAgICAgICAgICAgICsgJzx0ZCBjbGFzcz1cImluZm9cIj57eyBnYW1lc1dvbiB9fTwvdGQ+J1xuICAgICAgICAgICAgICAgICsgJzx0ZCBjbGFzcz1cImluZm9cIj57eyBnYW1lc0xvc3QgfX08L3RkPidcbiAgICAgICAgICAgICAgICArICc8dGQgY2xhc3M9XCJpbmZvXCI+e3sgcG9pbnRzIH19PC90ZD4nXG4gICAgICAgICAgICAgICAgKyAnPC90cj4nO1xuICAgICAgICB9O1xuXG4gICAgICAgIHZhciBidWlsZFdpZGdldCA9IGZ1bmN0aW9uKCRlbGVtLCBkYXRhKSB7XG4gICAgICAgICAgICB2YXIgb3V0cHV0ID0gJzx0YWJsZSBjbGFzcz1cImhzYy10YWJsZSBoc2Mtc3RhbmRpbmdzXCI+JztcbiAgICAgICAgICAgIHZhciByb3dzID0gYnVpbGRSb3dzKGRhdGEucm93cyk7XG4gICAgICAgICAgICBvdXRwdXQgKz0gcmV0cmlldmVIZWFkZXJUZW1wbGF0ZSgpO1xuICAgICAgICAgICAgb3V0cHV0ICs9IHJvd3M7XG4gICAgICAgICAgICBvdXRwdXQgKz0gJzwvdGFibGU+JztcblxuICAgICAgICAgICAgJGVsZW0uaHRtbChvdXRwdXQpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHZhciBidWlsZFJvd3MgPSBmdW5jdGlvbihyb3dzKSB7XG4gICAgICAgICAgICB2YXIgb3V0cHV0ID0gJyc7XG4gICAgICAgICAgICB2YXIgdGVtcGxhdGUgPSBfLnRlbXBsYXRlKHJldHJpZXZlUm93VGVtcGxhdGUoKSk7XG5cbiAgICAgICAgICAgIF8uZWFjaChyb3dzLCBmdW5jdGlvbih2YWx1ZSwga2V5KSB7XG4gICAgICAgICAgICAgICAgb3V0cHV0ICs9IHRlbXBsYXRlKHZhbHVlKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICByZXR1cm4gb3V0cHV0O1xuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBpbml0OiBmdW5jdGlvbigkZWxlbSkge1xuICAgICAgICAgICAgICAgIHZhciBzZXJ2aWNlID0gbmV3IEhvY2tleURhdGFTZXJ2aWNlO1xuICAgICAgICAgICAgICAgIGRpdmlzaW9uSWQgPSAkZWxlbS5kYXRhKCdkaXZpc2lvbicpO1xuXG4gICAgICAgICAgICAgICAgc2VydmljZS5nZXRTdGFuZGluZ3MoZGl2aXNpb25JZCkudGhlbihcbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24ocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1aWxkV2lkZ2V0KCRlbGVtLCByZXNwb25zZS5kYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24ocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdlcnJvcicsIHJlc3BvbnNlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKSB7XG4gICAgICAgIF8udGVtcGxhdGVTZXR0aW5ncyA9IHtcbiAgICAgICAgICAgIGludGVycG9sYXRlOiAvXFx7XFx7KC4rPylcXH1cXH0vZ1xuICAgICAgICB9O1xuXG4gICAgICAgICQoJy5qcy13aWRnZXQtc3RhbmRpbmdzJykuZWFjaChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciBzdGFuZGluZ3MgPSBuZXcgSG9ja2V5RGF0YVdpZGdldHNTdGFuZGluZ3M7XG4gICAgICAgICAgICBzdGFuZGluZ3MuaW5pdCgkKHRoaXMpKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG59KShqUXVlcnkpO1xuIiwiKGZ1bmN0aW9uKCQpIHtcbndpbmRvdy5Ib2NrZXlEYXRhU2VydmljZSA9IGZ1bmN0aW9uKCkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuXG4gICAgdmFyIGJhc2VVcmwgPSAnaHR0cDovL2FwaS5ob2NrZXlkYXRhLm5ldC9kYXRhL2ViZWwnO1xuICAgIHZhciBzY2hlZHVsZVVybCA9ICcvU2NoZWR1bGUnO1xuICAgIHZhciBzdGFuZGluZ3NVcmwgPSAnL1N0YW5kaW5ncyc7XG4gICAgdmFyIGtub2Nrb3V0VXJsID0gJy9Lbm9ja291dFN0YWdlJztcblxuICAgIHZhciB1cmxQYXJhbXMgPSB7XG4gICAgICAgIGFwaUtleTogJ2U1MmI1NzIyY2JjODljM2U1MWVlMGNkNmUyNDg1YTgxJyxcbiAgICAgICAgZGl2aXNpb25JZDogJzEzNicsXG4gICAgICAgIGxlYWd1ZTogJ2ViZWwnLFxuICAgICAgICBzcG9ydDogJ2ljZWhvY2tleScsXG4gICAgICAgIHJlZmVyZXI6ICd3d3cuaC1zYy5hdCdcbiAgICB9O1xuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgZ2V0U2NoZWR1bGU6IGZ1bmN0aW9uKGRpdmlzaW9uSWQpIHtcbiAgICAgICAgICAgIHZhciBkZWZlciA9ICQuRGVmZXJyZWQoKTtcblxuICAgICAgICAgICAgdXJsUGFyYW1zLmRpdmlzaW9uSWQgPSBkaXZpc2lvbklkO1xuICAgICAgICAgICAgdmFyIHBhcmFtcyA9ICQucGFyYW0odXJsUGFyYW1zKTtcbiAgICAgICAgICAgIHZhciB1cmwgPSBiYXNlVXJsICsgc2NoZWR1bGVVcmwgKyAnPycgKyBwYXJhbXM7XG5cbiAgICAgICAgICAgIHZhciByZXF1ZXN0ID0gJC5hamF4KHtcbiAgICAgICAgICAgICAgICB1cmw6IHVybCxcbiAgICAgICAgICAgICAgICBkYXRhVHlwZTogXCJqc29ucFwiLFxuICAgICAgICAgICAgICAgIGFzeW5jOiBmYWxzZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXF1ZXN0LnN1Y2Nlc3MoZnVuY3Rpb24ocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZS5kYXRhLnJvd3MucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIFwiaWRcIjogXCJkOWU2ZDk3Ny1lM2JkLTRkODEtOTc4OC03MjJjZGI5ZjY2OWJcIixcbiAgICAgICAgICAgICAgICAgICAgXCJkaXZpc2lvbklkXCI6IDEzNixcbiAgICAgICAgICAgICAgICAgICAgXCJkaXZpc2lvbk5hbWVcIjogXCJWRUhMIDFcIixcbiAgICAgICAgICAgICAgICAgICAgXCJzY2hlZHVsZWREYXRlXCI6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIFwic29ydFZhbHVlXCI6IDE0NDUxODA0MDAwMDAsXG4gICAgICAgICAgICAgICAgICAgICAgICBcInZhbHVlXCI6IFwiMTguMTAuMjAxOVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJzaG9ydFZhbHVlXCI6IFwiMTguMTAuXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBcImxvbmdWYWx1ZVwiOiBcIjE4LiBPa3RvYmVyIDIwMTVcIlxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBcInNjaGVkdWxlZFRpbWVcIjogXCIxNzowMFwiLFxuICAgICAgICAgICAgICAgICAgICBcImF3YXlUZWFtSWRcIjogNzI4LFxuICAgICAgICAgICAgICAgICAgICBcImF3YXlUZWFtTG9uZ05hbWVcIjogXCJFSEMgTWVnYWZpdCBJY2UgVGlnZXJzIERvcm5iaXJuXCIsXG4gICAgICAgICAgICAgICAgICAgIFwiYXdheVRlYW1TaG9ydE5hbWVcIjogXCJJVERcIixcbiAgICAgICAgICAgICAgICAgICAgXCJhd2F5VGVhbUZsYXZvdXJuYW1lXCI6IFwiRUhDIE1lZ2FmaXQgSWNlIFRpZ2VycyBEb3JuYmlyblwiLFxuICAgICAgICAgICAgICAgICAgICBcImhvbWVUZWFtSWRcIjogNzMxLFxuICAgICAgICAgICAgICAgICAgICBcImhvbWVUZWFtTG9uZ05hbWVcIjogXCJTQyBIb2hlbmVtcyAyXCIsXG4gICAgICAgICAgICAgICAgICAgIFwiaG9tZVRlYW1TaG9ydE5hbWVcIjogXCJITzJcIixcbiAgICAgICAgICAgICAgICAgICAgXCJob21lVGVhbUZsYXZvdXJuYW1lXCI6IFwiU0MgSG9oZW5lbXMgMlwiLFxuICAgICAgICAgICAgICAgICAgICBcImhvbWVUZWFtU2NvcmVcIjogbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgXCJhd2F5VGVhbVNjb3JlXCI6IG51bGxcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIHJldHVybiBkZWZlci5yZXNvbHZlKHJlc3BvbnNlKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmVxdWVzdC5lcnJvcihmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBkZWZlci5yZWplY3Qoe1xuICAgICAgICAgICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICByb3dzOiBbXVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgcmV0dXJuIGRlZmVyLnByb21pc2UoKTtcblxuICAgICAgICB9LFxuICAgICAgICBnZXRTdGFuZGluZ3M6IGZ1bmN0aW9uKGRpdmlzaW9uSWQpIHtcbiAgICAgICAgICAgIHVybFBhcmFtcy5kaXZpc2lvbklkID0gZGl2aXNpb25JZDtcbiAgICAgICAgICAgIHZhciBwYXJhbXMgPSAkLnBhcmFtKHVybFBhcmFtcyk7XG4gICAgICAgICAgICB2YXIgdXJsID0gYmFzZVVybCArIHN0YW5kaW5nc1VybCArICc/JyArIHBhcmFtcztcblxuICAgICAgICAgICAgcmV0dXJuICQuYWpheCh7XG4gICAgICAgICAgICAgICAgdXJsOiB1cmwsXG4gICAgICAgICAgICAgICAgZGF0YVR5cGU6IFwianNvbnBcIlxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIGdldEtub2Nrb3V0OiBmdW5jdGlvbihkaXZpc2lvbklkKSB7XG4gICAgICAgICAgICB1cmxQYXJhbXMuZGl2aXNpb25JZCA9IGRpdmlzaW9uSWQ7XG4gICAgICAgICAgICB2YXIgcGFyYW1zID0gJC5wYXJhbSh1cmxQYXJhbXMpO1xuICAgICAgICAgICAgdmFyIHVybCA9IGJhc2VVcmwgKyBrbm9ja291dFVybCArICc/JyArIHBhcmFtcztcblxuICAgICAgICAgICAgcmV0dXJuICQuYWpheCh7XG4gICAgICAgICAgICAgICAgdXJsOiB1cmwsXG4gICAgICAgICAgICAgICAgZGF0YVR5cGU6IFwianNvbnBcIlxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG59O1xufSkoalF1ZXJ5KTtcbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
