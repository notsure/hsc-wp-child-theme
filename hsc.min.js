!function(e){"use strict";var a=jQuery.fn.addClass;jQuery.fn.addClass=function(){var e=a.apply(this,arguments);return jQuery("#main-header").removeClass("et-fixed-header"),e},e("#main-header").removeClass("et-fixed-header")}(jQuery),function(e){"use strict";function a(){var e="/wp-content/themes/hsc-theme/images/teams",a="136",t="halbfinale",n=function(a){var t='<table class="hsc-knockout-overview"><tr>  <td class="image">    <img src="'+e+'/{{ teams[0].id }}.png" />  </td>  <td class="meta">    <span class="score">{{ teams[0].gamesWon }} : {{ teams[1].gamesWon }}</span><br/>    <span class="bestof">Best of: {{ bestOf }}</span>  </td>  <td class="image">    <img src="'+e+'/{{ teams[1].id }}.png" />  </td></tr></table>';return(t=_.template(t))(a)},s=function(e){var a='<tr>  <td class="date" colspan="2">    {{ scheduledDate.value }} - {{ scheduledTime }}  </td></tr><tr>  <td class="team">{{ homeTeamLongName }} <br/> {{ awayTeamLongName }}</td>  <td class="score">{{ homeTeamScore }} : {{ awayTeamScore }}</td></tr>';return(a=_.template(a))(e)},i=function(e,a){var t='<div class="hsc-knockout">',n=d(a);t+=n,t+="</div>",e.html(t)},d=function(e){return c("halbfinale"===t.toLowerCase()?e.phases[0]:e.phases[1])},c=function(e){var a="";return _.each(e.encounters,function(e,t){a+=o(e)}),a},o=function(e){var a="",t={teams:e.teams,bestOf:e.bestOf};return a+='<div class="hsc-knockout-game">',a+=n(t),a+='<table class="hsc-knockout-list">',a+=r(e.games),a+="</table>",a+="</div>"},r=function(e){var a="";return _.each(e,function(e,t){a+=s(e)}),a};return{init:function(e){var n=new HockeyDataService;a=e.data("division"),t=e.data("type"),n.getKnockout(a).then(function(a){i(e,a.data)},function(e){console.log("error",e)})}}}e(document).ready(function(){_.templateSettings={interpolate:/\{\{(.+?)\}\}/g},e(".js-hsc-knockout").each(function(){var t=new a;t.init(e(this))})})}(jQuery),function(e){function a(){var a=e("#et-main-area"),t=e(".mobile_menu_bar_toggle");t.on("click",function(t){e(t.currentTarget).hasClass("opened")?(a.show(),e(t.currentTarget).removeClass("opened")):(a.hide(),e(t.currentTarget).addClass("opened"))})}e(window).load(function(){a()})}(jQuery),function(e){"use strict";var a=function(){var e="/wp-content/themes/hsc-theme/images/teams",a="136",t="731",n=function(){return'<div class="hsc-game-schedule-list-item">  <div class="schedule">    <div class="date">{{ scheduledDate.value }}</div>    <div class="time">- {{ scheduledTime }}</div>  </div>  <div class="game">  <div class="teams">    <div class="team team-home">      <div class="teamlogo"><img src="'+e+'/{{ homeTeamId }}.png" /></div>      <div class="teamname">{{ homeTeamLongName }}</div>    </div>    <div class="divider"></div>    <div class="team team-away">      <div class="teamlogo"><img src="'+e+'/{{ awayTeamId }}.png" /></div>      <div class="teamname">{{ awayTeamLongName }}</div>    </div>  </div>  <div class="scores">      {{ homeTeamScore === null ? "-": homeTeamScore }}      : {{ awayTeamScore === null ? "-": awayTeamScore }}  </div>  </div></div>'},s=function(e,a){var t='<div class="hsc-game-schedule-list">',n=i(a.rows);t+=n,t+="</div>",e.html(t)},i=function(e){var a="",s=_.template(n());return _.each(e,function(e,n){(e.homeTeamId===t||e.awayTeamId===t)&&(a+=s(e))}),a};return{init:function(e){var n=new HockeyDataService;a=e.data("division"),t=e.data("team"),n.getSchedule(a).then(function(a){s(e,a.data)},function(e){console.log("error",e)})}}};e(document).ready(function(){_.templateSettings={interpolate:/\{\{(.+?)\}\}/g},e(".js-widget-schedule").each(function(){var t=new a;t.init(e(this))})})}(jQuery),function(e){"use strict";var a=function(){var e="/wp-content/themes/hsc-theme/images/teams",a="136",t="731",n="last",s=function(){var a="last-game-widget";return"next"===n&&(a="next-game-widget"),'<div class="hsc-game-schedule-widget '+a+'"><div class="schedule-widget-holder">  <div class="image image-home-team">    <img src="'+e+'/{{ homeTeamId }}.png" />  </div>  <div class="meta">    <div class="date">{{ scheduledDate.value }}</div>    <div class="time">{{ scheduledTime }}</div>    <div class="scores">{{ homeTeamScore }}:{{ awayTeamScore }}</div>  </div>  <div class="image image-away-team">    <img src="'+e+'/{{ awayTeamId }}.png" />  </div></div>  <div class="teams">    <span class="team home-team">{{ homeTeamLongName }}</span>    <span class="divider">-</span>    <span class="team away-team">{{ awayTeamLongName }}</span>  </div></div>'},i=function(e,a){var t="<div>",n=d(a.rows);t+=n,t+="</div>",e.html(t)},d=function(e){var a="",i=_.template(s()),d=moment();if("last"===n){e=_.chain(e).reverse()._wrapped;var c=_.find(e,function(e){if((e.homeTeamId===t||e.awayTeamId===t)&&e.scheduledDate&&e.scheduledDate.value&&null!==e.homeTeamScore&&null!==e.awayTeamScore){var a=moment(e.scheduledDate.value,"DD.MM.YYYY");if(a.isBefore(d))return e}});c&&(a+=i(c))}if("next"===n){var o=_.find(e,function(e){if((e.homeTeamId===t||e.awayTeamId===t)&&e.scheduledDate&&e.scheduledDate.value&&null===e.homeTeamScore&&null===e.awayTeamScore){var a=moment(e.scheduledDate.value,"DD.MM.YYYY");if(a.isSameOrAfter(d))return e}});o&&(a+=i(o))}return a};return{init:function(e){var s=new HockeyDataService;a=e.data("division"),t=e.data("team"),n=e.data("type");s.getSchedule(a).then(function(a){i(e,a.data)},function(e){console.log("error",e)})}}};e(document).ready(function(){_.templateSettings={interpolate:/\{\{(.+?)\}\}/g},e(".js-widget-schedule-single").each(function(){var t=new a;t.init(e(this))})})}(jQuery),function(e){"use strict";function a(){var e="/wp-content/themes/hsc-theme/images/teams",a="136",t=function(){return'<tr class="hsc-standings-header"><td class="rank">#</td><td class="image"></td><td class="team">Team</td><td class="info td-gp">Sp</td><td class="info td-w">S</td><td class="info td-l">N</td><td class="info td-otw">OTS</td><td class="info td-otl">OTN</td><td class="info td-goals">Tore</td><td class="info td-gd">TD</td><td class="info td-pts">PKT</td></tr>'},n=function(){return'<tr class="hsc-standings-row"><td class="rank">{{ tableRank }}</td><td class="image"><img src="'+e+'/{{ id }}.png" /></td><td class="team">{{ teamLongname }}</td><td class="info td-gp">{{ gamesPlayed }}</td><td class="info td-w">{{ gamesWon }}</td><td class="info td-l">{{ gamesLost }}</td><td class="info td-otw">{{ gamesWonInOt }}</td><td class="info td-otl">{{ gamesLostInOt }}</td><td class="info td-goals">{{ goalsFor }}:{{ goalsAgainst }}</td><td class="info td-gd">{{ goalDifference }}</td><td class="info td-pts">{{ points }}</td></tr>'},s=function(e,a){var n='<table class="hsc-table hsc-standings">',s=i(a.rows);n+=t(),n+=s,n+="</table>",e.html(n)},i=function(e){var a="",t=_.template(n());return _.each(e,function(e,n){a+=t(e)}),a};return{init:function(e){var t=new HockeyDataService;a=e.data("division"),t.getStandings(a).then(function(a){s(e,a.data)},function(e){console.log("error",e)})}}}e(document).ready(function(){_.templateSettings={interpolate:/\{\{(.+?)\}\}/g},e(".js-widget-standings").each(function(){var t=new a;t.init(e(this))})})}(jQuery),function(e){window.HockeyDataService=function(){"use strict";var a="http://api.hockeydata.net/data/ebel",t="/Schedule",n="/Standings",s="/KnockoutStage",i={apiKey:"e52b5722cbc89c3e51ee0cd6e2485a81",divisionId:"136",league:"ebel",sport:"icehockey",referer:"www.h-sc.at"};return{getSchedule:function(n){var s=e.Deferred();i.divisionId=n;var d=e.param(i),c=a+t+"?"+d,o=e.ajax({url:c,dataType:"jsonp",async:!1});return o.success(function(e){return e.data.rows.push({id:"d9e6d977-e3bd-4d81-9788-722cdb9f669b",divisionId:136,divisionName:"VEHL 1",scheduledDate:{sortValue:14451804e5,value:"18.10.2019",shortValue:"18.10.",longValue:"18. Oktober 2015"},scheduledTime:"17:00",awayTeamId:728,awayTeamLongName:"EHC Megafit Ice Tigers Dornbirn",awayTeamShortName:"ITD",awayTeamFlavourname:"EHC Megafit Ice Tigers Dornbirn",homeTeamId:731,homeTeamLongName:"SC Hohenems 2",homeTeamShortName:"HO2",homeTeamFlavourname:"SC Hohenems 2",homeTeamScore:null,awayTeamScore:null}),s.resolve(e)}),o.error(function(e){return s.reject({data:{rows:[]}})}),s.promise()},getStandings:function(t){i.divisionId=t;var s=e.param(i),d=a+n+"?"+s;return e.ajax({url:d,dataType:"jsonp"})},getKnockout:function(t){i.divisionId=t;var n=e.param(i),d=a+s+"?"+n;return e.ajax({url:d,dataType:"jsonp"})}}}}(jQuery);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbXBvbmVudHMvZml4ZXMuanMiLCJjb21wb25lbnRzL2tub2Nrb3V0LmpzIiwiY29tcG9uZW50cy9tb2JpbGUtbWVudS5qcyIsImNvbXBvbmVudHMvc2NoZWR1bGUtbGlzdC5qcyIsImNvbXBvbmVudHMvc2NoZWR1bGUtd2lkZ2V0LmpzIiwiY29tcG9uZW50cy9zdGFuZGluZ3MuanMiLCJzZXJ2aWNlcy9ob2NrZXlkYXRhLXNlcnZpY2UuanMiXSwibmFtZXMiOlsiJCIsImFkZGNsYXNzIiwialF1ZXJ5IiwiZm4iLCJhZGRDbGFzcyIsInJlc3VsdCIsImFwcGx5IiwidGhpcyIsImFyZ3VtZW50cyIsInJlbW92ZUNsYXNzIiwiSHNjS25vY2tvdXQiLCJsb2dvQmFzZVVybCIsImRpdmlzaW9uSWQiLCJ0eXBlIiwicmV0cmlldmVFbmNvdW50ZXJPdmVydmlld1RlbXBsYXRlIiwiZGF0YSIsInRlbXBsYXRlIiwiXyIsInJldHJpZXZlRW5jb3VudGVyR2FtZVRlbXBsYXRlIiwiZ2FtZSIsImJ1aWxkV2lkZ2V0IiwiJGVsZW0iLCJvdXRwdXQiLCJwaGFzZXMiLCJidWlsZEtub2Nrb3V0UGhhc2VzIiwiaHRtbCIsInJldHJpZXZlS25vY2tvdXRQaGFzZSIsInRvTG93ZXJDYXNlIiwicGhhc2UiLCJlYWNoIiwiZW5jb3VudGVycyIsImVuY291bnRlciIsImtleSIsInJldHJpZXZlRW5jb3VudGVyIiwib3ZlcnZpZXdEYXRhIiwidGVhbXMiLCJiZXN0T2YiLCJyZXRyaWV2ZUVuY291bnRlckdhbWVzIiwiZ2FtZXMiLCJpbml0Iiwic2VydmljZSIsIkhvY2tleURhdGFTZXJ2aWNlIiwiZ2V0S25vY2tvdXQiLCJ0aGVuIiwicmVzcG9uc2UiLCJjb25zb2xlIiwibG9nIiwiZG9jdW1lbnQiLCJyZWFkeSIsInRlbXBsYXRlU2V0dGluZ3MiLCJpbnRlcnBvbGF0ZSIsIndpZGdldCIsImluaXRNb2JpbGVNZW51IiwiJG1haW5BcmVhIiwiJG1lbnVCdXR0b24iLCJvbiIsImV2ZW50IiwiY3VycmVudFRhcmdldCIsImhhc0NsYXNzIiwic2hvdyIsImhpZGUiLCJ3aW5kb3ciLCJsb2FkIiwiSG9ja2V5RGF0YVdpZGdldHNTY2hlZHVsZSIsInRlYW1JZCIsInJldHJpZXZlUm93VGVtcGxhdGUiLCJyb3dzIiwiYnVpbGRSb3dzIiwidmFsdWUiLCJob21lVGVhbUlkIiwiYXdheVRlYW1JZCIsImdldFNjaGVkdWxlIiwic2NoZWR1bGVzIiwiSG9ja2V5RGF0YVdpZGdldHNTY2hlZHVsZVNpbmdsZSIsImNsYXNzTmFtZSIsInRvZGF5IiwibW9tZW50IiwiY2hhaW4iLCJyZXZlcnNlIiwiX3dyYXBwZWQiLCJsYXN0R2FtZSIsImZpbmQiLCJyb3ciLCJzY2hlZHVsZWREYXRlIiwiaG9tZVRlYW1TY29yZSIsImF3YXlUZWFtU2NvcmUiLCJnYW1lRGF0ZSIsImlzQmVmb3JlIiwibmV4dEdhbWUiLCJpc1NhbWVPckFmdGVyIiwic2NoZWR1bGVzU2luZ2xlIiwiSG9ja2V5RGF0YVdpZGdldHNTdGFuZGluZ3MiLCJyZXRyaWV2ZUhlYWRlclRlbXBsYXRlIiwiZ2V0U3RhbmRpbmdzIiwic3RhbmRpbmdzIiwiYmFzZVVybCIsInNjaGVkdWxlVXJsIiwic3RhbmRpbmdzVXJsIiwia25vY2tvdXRVcmwiLCJ1cmxQYXJhbXMiLCJhcGlLZXkiLCJsZWFndWUiLCJzcG9ydCIsInJlZmVyZXIiLCJkZWZlciIsIkRlZmVycmVkIiwicGFyYW1zIiwicGFyYW0iLCJ1cmwiLCJyZXF1ZXN0IiwiYWpheCIsImRhdGFUeXBlIiwiYXN5bmMiLCJzdWNjZXNzIiwicHVzaCIsImlkIiwiZGl2aXNpb25OYW1lIiwic29ydFZhbHVlIiwic2hvcnRWYWx1ZSIsImxvbmdWYWx1ZSIsInNjaGVkdWxlZFRpbWUiLCJhd2F5VGVhbUxvbmdOYW1lIiwiYXdheVRlYW1TaG9ydE5hbWUiLCJhd2F5VGVhbUZsYXZvdXJuYW1lIiwiaG9tZVRlYW1Mb25nTmFtZSIsImhvbWVUZWFtU2hvcnROYW1lIiwiaG9tZVRlYW1GbGF2b3VybmFt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ZSBzdHJpY3RcIjtcblxuICAgIC8vIFN0b3AgZGl2aSBoZWFkZXIgZnJvbSBzaHJpbmtpbmcuXG4gICAgLy8gaHR0cHM6Ly9kaXZpYm9vc3Rlci5jb20vc3RvcC10aGUtZGl2aS1oZWFkZXItZnJvbS1zaHJpbmtpbmctb24tc2Nyb2xsL1xuICAgIC8vIE92ZXJyaWRlIHRoZSBhZGRDbGFzcyB0byBwcmV2ZW50IGZpeGVkIGhlYWRlciBjbGFzcyBmcm9tIGJlaW5nIGFkZGVkXG4gICAgdmFyIGFkZGNsYXNzID0galF1ZXJ5LmZuLmFkZENsYXNzO1xuICAgIGpRdWVyeS5mbi5hZGRDbGFzcyA9IGZ1bmN0aW9uKCl7XG4gICAgICAgIHZhciByZXN1bHQgPSBhZGRjbGFzcy5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgICBqUXVlcnkoJyNtYWluLWhlYWRlcicpLnJlbW92ZUNsYXNzKCdldC1maXhlZC1oZWFkZXInKTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICAkKCcjbWFpbi1oZWFkZXInKS5yZW1vdmVDbGFzcygnZXQtZml4ZWQtaGVhZGVyJyk7XG5cbn0pKGpRdWVyeSk7XG4iLCIoZnVuY3Rpb24oJCkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuXG4gICAgZnVuY3Rpb24gSHNjS25vY2tvdXQoKSB7XG4gICAgICAgIHZhciBsb2dvQmFzZVVybCA9ICcvd3AtY29udGVudC90aGVtZXMvaHNjLXRoZW1lL2ltYWdlcy90ZWFtcyc7XG4gICAgICAgIHZhciBkaXZpc2lvbklkID0gJzEzNic7XG4gICAgICAgIHZhciB0ZWFtSWQgPSAnNzMxJztcbiAgICAgICAgdmFyIHR5cGUgPSAnaGFsYmZpbmFsZSc7XG5cbiAgICAgICAgdmFyIHJldHJpZXZlRW5jb3VudGVyT3ZlcnZpZXdUZW1wbGF0ZSA9IGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgIHZhciB0ZW1wbGF0ZSA9ICc8dGFibGUgY2xhc3M9XCJoc2Mta25vY2tvdXQtb3ZlcnZpZXdcIj4nXG4gICAgICAgICAgICAgICAgKyAnPHRyPidcbiAgICAgICAgICAgICAgICArICcgIDx0ZCBjbGFzcz1cImltYWdlXCI+J1xuICAgICAgICAgICAgICAgICsgJyAgICA8aW1nIHNyYz1cIicgKyBsb2dvQmFzZVVybCArICcve3sgdGVhbXNbMF0uaWQgfX0ucG5nXCIgLz4nXG4gICAgICAgICAgICAgICAgKyAnICA8L3RkPidcbiAgICAgICAgICAgICAgICArICcgIDx0ZCBjbGFzcz1cIm1ldGFcIj4nXG4gICAgICAgICAgICAgICAgKyAnICAgIDxzcGFuIGNsYXNzPVwic2NvcmVcIj57eyB0ZWFtc1swXS5nYW1lc1dvbiB9fSA6IHt7IHRlYW1zWzFdLmdhbWVzV29uIH19PC9zcGFuPjxici8+J1xuICAgICAgICAgICAgICAgICsgJyAgICA8c3BhbiBjbGFzcz1cImJlc3RvZlwiPkJlc3Qgb2Y6IHt7IGJlc3RPZiB9fTwvc3Bhbj4nXG4gICAgICAgICAgICAgICAgKyAnICA8L3RkPidcbiAgICAgICAgICAgICAgICArICcgIDx0ZCBjbGFzcz1cImltYWdlXCI+J1xuICAgICAgICAgICAgICAgICsgJyAgICA8aW1nIHNyYz1cIicgKyBsb2dvQmFzZVVybCArICcve3sgdGVhbXNbMV0uaWQgfX0ucG5nXCIgLz4nXG4gICAgICAgICAgICAgICAgKyAnICA8L3RkPidcbiAgICAgICAgICAgICAgICArICc8L3RyPidcbiAgICAgICAgICAgICAgICArICc8L3RhYmxlPic7XG4gICAgICAgICAgICB0ZW1wbGF0ZSA9IF8udGVtcGxhdGUodGVtcGxhdGUpO1xuXG4gICAgICAgICAgICByZXR1cm4gdGVtcGxhdGUoZGF0YSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgdmFyIHJldHJpZXZlRW5jb3VudGVyR2FtZVRlbXBsYXRlID0gZnVuY3Rpb24oZ2FtZSkge1xuICAgICAgICAgICAgdmFyIHRlbXBsYXRlID0gJzx0cj4nXG4gICAgICAgICAgICAgICAgKyAnICA8dGQgY2xhc3M9XCJkYXRlXCIgY29sc3Bhbj1cIjJcIj4nXG4gICAgICAgICAgICAgICAgKyAnICAgIHt7IHNjaGVkdWxlZERhdGUudmFsdWUgfX0gLSB7eyBzY2hlZHVsZWRUaW1lIH19J1xuICAgICAgICAgICAgICAgICsgJyAgPC90ZD4nXG4gICAgICAgICAgICAgICAgKyAnPC90cj48dHI+J1xuICAgICAgICAgICAgICAgICsgJyAgPHRkIGNsYXNzPVwidGVhbVwiPnt7IGhvbWVUZWFtTG9uZ05hbWUgfX0gPGJyLz4ge3sgYXdheVRlYW1Mb25nTmFtZSB9fTwvdGQ+J1xuICAgICAgICAgICAgICAgICsgJyAgPHRkIGNsYXNzPVwic2NvcmVcIj57eyBob21lVGVhbVNjb3JlIH19IDoge3sgYXdheVRlYW1TY29yZSB9fTwvdGQ+J1xuICAgICAgICAgICAgICAgICsgJzwvdHI+JztcbiAgICAgICAgICAgIHRlbXBsYXRlID0gXy50ZW1wbGF0ZSh0ZW1wbGF0ZSk7XG5cbiAgICAgICAgICAgIHJldHVybiB0ZW1wbGF0ZShnYW1lKTtcbiAgICAgICAgfTtcblxuICAgICAgICB2YXIgYnVpbGRXaWRnZXQgPSBmdW5jdGlvbigkZWxlbSwgZGF0YSkge1xuICAgICAgICAgICAgdmFyIG91dHB1dCA9ICc8ZGl2IGNsYXNzPVwiaHNjLWtub2Nrb3V0XCI+JztcbiAgICAgICAgICAgIHZhciBwaGFzZXMgPSBidWlsZEtub2Nrb3V0UGhhc2VzKGRhdGEpO1xuICAgICAgICAgICAgb3V0cHV0ICs9IHBoYXNlcztcbiAgICAgICAgICAgIG91dHB1dCArPSAnPC9kaXY+JztcblxuICAgICAgICAgICAgJGVsZW0uaHRtbChvdXRwdXQpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHZhciBidWlsZEtub2Nrb3V0UGhhc2VzID0gZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgaWYgKHR5cGUudG9Mb3dlckNhc2UoKSA9PT0gJ2hhbGJmaW5hbGUnKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJldHJpZXZlS25vY2tvdXRQaGFzZShkYXRhLnBoYXNlc1swXSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiByZXRyaWV2ZUtub2Nrb3V0UGhhc2UoZGF0YS5waGFzZXNbMV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIHZhciByZXRyaWV2ZUtub2Nrb3V0UGhhc2UgPSBmdW5jdGlvbihwaGFzZSkge1xuICAgICAgICAgICAgdmFyIG91dHB1dCA9ICcnO1xuICAgICAgICAgICAgXy5lYWNoKHBoYXNlLmVuY291bnRlcnMsIGZ1bmN0aW9uKGVuY291bnRlciwga2V5KSB7XG4gICAgICAgICAgICAgICAgb3V0cHV0ICs9IHJldHJpZXZlRW5jb3VudGVyKGVuY291bnRlcik7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgcmV0dXJuIG91dHB1dDtcbiAgICAgICAgfTtcblxuICAgICAgICB2YXIgcmV0cmlldmVFbmNvdW50ZXIgPSBmdW5jdGlvbihlbmNvdW50ZXIpIHtcbiAgICAgICAgICAgIHZhciBvdXRwdXQgPSAnJztcbiAgICAgICAgICAgIHZhciBvdmVydmlld0RhdGEgPSB7XG4gICAgICAgICAgICAgICAgdGVhbXM6IGVuY291bnRlci50ZWFtcyxcbiAgICAgICAgICAgICAgICBiZXN0T2Y6IGVuY291bnRlci5iZXN0T2ZcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIG91dHB1dCArPSAnPGRpdiBjbGFzcz1cImhzYy1rbm9ja291dC1nYW1lXCI+JztcbiAgICAgICAgICAgIG91dHB1dCArPSByZXRyaWV2ZUVuY291bnRlck92ZXJ2aWV3VGVtcGxhdGUob3ZlcnZpZXdEYXRhKTtcblxuICAgICAgICAgICAgb3V0cHV0ICs9ICc8dGFibGUgY2xhc3M9XCJoc2Mta25vY2tvdXQtbGlzdFwiPic7XG4gICAgICAgICAgICBvdXRwdXQgKz0gcmV0cmlldmVFbmNvdW50ZXJHYW1lcyhlbmNvdW50ZXIuZ2FtZXMpO1xuICAgICAgICAgICAgb3V0cHV0ICs9ICc8L3RhYmxlPic7XG4gICAgICAgICAgICBvdXRwdXQgKz0gJzwvZGl2Pic7XG5cbiAgICAgICAgICAgIHJldHVybiBvdXRwdXQ7XG4gICAgICAgIH07XG5cbiAgICAgICAgdmFyIHJldHJpZXZlRW5jb3VudGVyR2FtZXMgPSBmdW5jdGlvbihnYW1lcykge1xuICAgICAgICAgICAgdmFyIG91dHB1dCA9ICcnO1xuXG4gICAgICAgICAgICBfLmVhY2goZ2FtZXMsIGZ1bmN0aW9uKGdhbWUsIGtleSkge1xuICAgICAgICAgICAgICAgIG91dHB1dCArPSByZXRyaWV2ZUVuY291bnRlckdhbWVUZW1wbGF0ZShnYW1lKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICByZXR1cm4gb3V0cHV0O1xuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBpbml0OiBmdW5jdGlvbigkZWxlbSkge1xuICAgICAgICAgICAgICAgIHZhciBzZXJ2aWNlID0gbmV3IEhvY2tleURhdGFTZXJ2aWNlO1xuICAgICAgICAgICAgICAgIGRpdmlzaW9uSWQgPSAkZWxlbS5kYXRhKCdkaXZpc2lvbicpO1xuICAgICAgICAgICAgICAgIHR5cGUgPSAkZWxlbS5kYXRhKCd0eXBlJyk7XG5cbiAgICAgICAgICAgICAgICBzZXJ2aWNlLmdldEtub2Nrb3V0KGRpdmlzaW9uSWQpLnRoZW4oXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBidWlsZFdpZGdldCgkZWxlbSwgcmVzcG9uc2UuZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnZXJyb3InLCByZXNwb25zZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcblxuICAgICQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCkge1xuICAgICAgICBfLnRlbXBsYXRlU2V0dGluZ3MgPSB7XG4gICAgICAgICAgICBpbnRlcnBvbGF0ZTogL1xce1xceyguKz8pXFx9XFx9L2dcbiAgICAgICAgfTtcblxuICAgICAgICAkKCcuanMtaHNjLWtub2Nrb3V0JykuZWFjaChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciB3aWRnZXQgPSBuZXcgSHNjS25vY2tvdXQ7XG4gICAgICAgICAgICB3aWRnZXQuaW5pdCgkKHRoaXMpKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG59KShqUXVlcnkpO1xuIiwiKGZ1bmN0aW9uKCQpIHtcbiAgICAvLyBmdW5jdGlvbiBzZXR1cF9jb2xsYXBzaWJsZV9zdWJtZW51cygpIHtcbiAgICAvLyAgICAgdmFyICRtZW51ID0gJCgnI21vYmlsZV9tZW51Jyk7XG4gICAgLy8gICAgIHZhciB0b3BfbGV2ZWxfbGluayA9ICcjbW9iaWxlX21lbnUgLm1lbnUtaXRlbS1oYXMtY2hpbGRyZW4gPiBhJztcblxuICAgIC8vICAgICAkbWVudS5maW5kKCdhJykuZWFjaChmdW5jdGlvbigpIHtcbiAgICAvLyAgICAgICAgICQodGhpcykub2ZmKCdjbGljaycpO1xuXG4gICAgLy8gICAgICAgICBpZiAoJCh0aGlzKS5pcyh0b3BfbGV2ZWxfbGluaykpIHtcbiAgICAvLyAgICAgICAgICAgICAkKHRoaXMpLmF0dHIoJ2hyZWYnLCAnIycpO1xuICAgIC8vICAgICAgICAgfVxuXG4gICAgLy8gICAgICAgICBpZiAoISQodGhpcykuc2libGluZ3MoJy5zdWItbWVudScpLmxlbmd0aCkge1xuICAgIC8vICAgICAgICAgICAgICQodGhpcykub24oJ2NsaWNrJywgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAvLyAgICAgICAgICAgICAgICAgJCh0aGlzKS5wYXJlbnRzKCcubW9iaWxlX25hdicpLnRyaWdnZXIoJ2NsaWNrJyk7XG4gICAgLy8gICAgICAgICAgICAgfSk7XG4gICAgLy8gICAgICAgICB9IGVsc2Uge1xuICAgIC8vICAgICAgICAgICAgICQodGhpcykub24oJ2NsaWNrJywgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAvLyAgICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAvLyAgICAgICAgICAgICAgICAgJCh0aGlzKS5wYXJlbnQoKS50b2dnbGVDbGFzcygndmlzaWJsZScpO1xuICAgIC8vICAgICAgICAgICAgIH0pO1xuICAgIC8vICAgICAgICAgfVxuICAgIC8vICAgICB9KTtcbiAgICAvLyB9XG5cbiAgICBmdW5jdGlvbiBpbml0TW9iaWxlTWVudSgpIHtcbiAgICAgICAgdmFyICRtYWluQXJlYSA9ICQoJyNldC1tYWluLWFyZWEnKTtcbiAgICAgICAgdmFyICRtZW51QnV0dG9uID0gJCgnLm1vYmlsZV9tZW51X2Jhcl90b2dnbGUnKTtcblxuICAgICAgICAkbWVudUJ1dHRvbi5vbignY2xpY2snLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgICAgICAgaWYgKCQoZXZlbnQuY3VycmVudFRhcmdldCkuaGFzQ2xhc3MoJ29wZW5lZCcpKSB7XG4gICAgICAgICAgICAgICAgJG1haW5BcmVhLnNob3coKTtcbiAgICAgICAgICAgICAgICAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpLnJlbW92ZUNsYXNzKCdvcGVuZWQnKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgJG1haW5BcmVhLmhpZGUoKTtcbiAgICAgICAgICAgICAgICAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpLmFkZENsYXNzKCdvcGVuZWQnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgJCh3aW5kb3cpLmxvYWQoZnVuY3Rpb24oKSB7XG4gICAgICAgIC8vIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgIC8vICAgICBzZXR1cF9jb2xsYXBzaWJsZV9zdWJtZW51cygpO1xuICAgICAgICAvLyB9LCA3MDApO1xuXG4gICAgICAgIGluaXRNb2JpbGVNZW51KCk7XG4gICAgfSk7XG59KShqUXVlcnkpO1xuXG4iLCIoZnVuY3Rpb24oJCkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuXG4gICAgdmFyIEhvY2tleURhdGFXaWRnZXRzU2NoZWR1bGUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGxvZ29CYXNlVXJsID0gJy93cC1jb250ZW50L3RoZW1lcy9oc2MtdGhlbWUvaW1hZ2VzL3RlYW1zJztcbiAgICAgICAgdmFyIGRpdmlzaW9uSWQgPSAnMTM2JztcbiAgICAgICAgdmFyIHRlYW1JZCA9ICc3MzEnO1xuXG4gICAgICAgIHZhciBidWlsZFdpZGdldEhlYWRlciA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuICc8ZGl2IGNsYXNzPVwiaHNjLWdhbWUtc2NoZWR1bGUtbGlzdC1oZWFkZXJcIj4nXG4gICAgICAgICAgICAgICAgKyAnICA8ZGl2IGNsYXNzPVwiZGF0ZVwiPkRhdHVtPC9kaXY+J1xuICAgICAgICAgICAgICAgICsgJyAgPGRpdiBjbGFzcz1cInRpbWVcIj48L2Rpdj4nXG4gICAgICAgICAgICAgICAgKyAnICA8ZGl2IGNsYXNzPVwidGVhbVwiPkJlZ2VnbnVuZzwvZGl2PidcbiAgICAgICAgICAgICAgICArICcgIDxkaXYgY2xhc3M9XCJzY29yZXNcIj5FcmdlYm5pczwvZGl2PidcbiAgICAgICAgICAgICAgICArICc8L2Rpdj4nO1xuICAgICAgICB9O1xuXG4gICAgICAgIHZhciByZXRyaWV2ZVJvd1RlbXBsYXRlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gJzxkaXYgY2xhc3M9XCJoc2MtZ2FtZS1zY2hlZHVsZS1saXN0LWl0ZW1cIj4nXG4gICAgICAgICAgICAgICAgKyAnICA8ZGl2IGNsYXNzPVwic2NoZWR1bGVcIj4nXG4gICAgICAgICAgICAgICAgKyAnICAgIDxkaXYgY2xhc3M9XCJkYXRlXCI+e3sgc2NoZWR1bGVkRGF0ZS52YWx1ZSB9fTwvZGl2PidcbiAgICAgICAgICAgICAgICArICcgICAgPGRpdiBjbGFzcz1cInRpbWVcIj4tIHt7IHNjaGVkdWxlZFRpbWUgfX08L2Rpdj4nXG4gICAgICAgICAgICAgICAgKyAnICA8L2Rpdj4nXG4gICAgICAgICAgICAgICAgKyAnICA8ZGl2IGNsYXNzPVwiZ2FtZVwiPidcbiAgICAgICAgICAgICAgICArICcgIDxkaXYgY2xhc3M9XCJ0ZWFtc1wiPidcbiAgICAgICAgICAgICAgICArICcgICAgPGRpdiBjbGFzcz1cInRlYW0gdGVhbS1ob21lXCI+J1xuICAgICAgICAgICAgICAgICsgJyAgICAgIDxkaXYgY2xhc3M9XCJ0ZWFtbG9nb1wiPjxpbWcgc3JjPVwiJyArIGxvZ29CYXNlVXJsICsgJy97eyBob21lVGVhbUlkIH19LnBuZ1wiIC8+PC9kaXY+J1xuICAgICAgICAgICAgICAgICsgJyAgICAgIDxkaXYgY2xhc3M9XCJ0ZWFtbmFtZVwiPnt7IGhvbWVUZWFtTG9uZ05hbWUgfX08L2Rpdj4nXG4gICAgICAgICAgICAgICAgKyAnICAgIDwvZGl2PidcbiAgICAgICAgICAgICAgICArICcgICAgPGRpdiBjbGFzcz1cImRpdmlkZXJcIj48L2Rpdj4nXG4gICAgICAgICAgICAgICAgKyAnICAgIDxkaXYgY2xhc3M9XCJ0ZWFtIHRlYW0tYXdheVwiPidcbiAgICAgICAgICAgICAgICArICcgICAgICA8ZGl2IGNsYXNzPVwidGVhbWxvZ29cIj48aW1nIHNyYz1cIicgKyBsb2dvQmFzZVVybCArICcve3sgYXdheVRlYW1JZCB9fS5wbmdcIiAvPjwvZGl2PidcbiAgICAgICAgICAgICAgICArICcgICAgICA8ZGl2IGNsYXNzPVwidGVhbW5hbWVcIj57eyBhd2F5VGVhbUxvbmdOYW1lIH19PC9kaXY+J1xuICAgICAgICAgICAgICAgICsgJyAgICA8L2Rpdj4nXG4gICAgICAgICAgICAgICAgKyAnICA8L2Rpdj4nXG4gICAgICAgICAgICAgICAgKyAnICA8ZGl2IGNsYXNzPVwic2NvcmVzXCI+J1xuICAgICAgICAgICAgICAgICsgJyAgICAgIHt7IGhvbWVUZWFtU2NvcmUgPT09IG51bGwgPyBcIi1cIjogaG9tZVRlYW1TY29yZSB9fSdcbiAgICAgICAgICAgICAgICArICcgICAgICA6IHt7IGF3YXlUZWFtU2NvcmUgPT09IG51bGwgPyBcIi1cIjogYXdheVRlYW1TY29yZSB9fSdcbiAgICAgICAgICAgICAgICArICcgIDwvZGl2PidcbiAgICAgICAgICAgICAgICArICcgIDwvZGl2PidcbiAgICAgICAgICAgICAgICArICc8L2Rpdj4nO1xuICAgICAgICB9O1xuXG4gICAgICAgIHZhciBidWlsZFdpZGdldCA9IGZ1bmN0aW9uKCRlbGVtLCBkYXRhKSB7XG4gICAgICAgICAgICB2YXIgb3V0cHV0ID0gJzxkaXYgY2xhc3M9XCJoc2MtZ2FtZS1zY2hlZHVsZS1saXN0XCI+JztcbiAgICAgICAgICAgIHZhciByb3dzID0gYnVpbGRSb3dzKGRhdGEucm93cyk7XG4gICAgICAgICAgICAvLyBvdXRwdXQgKz0gYnVpbGRXaWRnZXRIZWFkZXIoKTtcbiAgICAgICAgICAgIG91dHB1dCArPSByb3dzO1xuICAgICAgICAgICAgb3V0cHV0ICs9ICc8L2Rpdj4nO1xuXG4gICAgICAgICAgICAkZWxlbS5odG1sKG91dHB1dCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgdmFyIGJ1aWxkUm93cyA9IGZ1bmN0aW9uKHJvd3MpIHtcbiAgICAgICAgICAgIHZhciBvdXRwdXQgPSAnJztcbiAgICAgICAgICAgIHZhciB0ZW1wbGF0ZSA9IF8udGVtcGxhdGUocmV0cmlldmVSb3dUZW1wbGF0ZSgpKTtcblxuICAgICAgICAgICAgXy5lYWNoKHJvd3MsIGZ1bmN0aW9uKHZhbHVlLCBrZXkpIHtcbiAgICAgICAgICAgICAgICBpZiAodmFsdWUuaG9tZVRlYW1JZCA9PT0gdGVhbUlkIHx8IHZhbHVlLmF3YXlUZWFtSWQgPT09IHRlYW1JZCkge1xuICAgICAgICAgICAgICAgICAgICBvdXRwdXQgKz0gdGVtcGxhdGUodmFsdWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICByZXR1cm4gb3V0cHV0O1xuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBpbml0OiBmdW5jdGlvbigkZWxlbSkge1xuICAgICAgICAgICAgICAgIHZhciBzZXJ2aWNlID0gbmV3IEhvY2tleURhdGFTZXJ2aWNlO1xuICAgICAgICAgICAgICAgIGRpdmlzaW9uSWQgPSAkZWxlbS5kYXRhKCdkaXZpc2lvbicpO1xuICAgICAgICAgICAgICAgIHRlYW1JZCA9ICRlbGVtLmRhdGEoJ3RlYW0nKTtcblxuICAgICAgICAgICAgICAgIHNlcnZpY2UuZ2V0U2NoZWR1bGUoZGl2aXNpb25JZCkudGhlbihcbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24ocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1aWxkV2lkZ2V0KCRlbGVtLCByZXNwb25zZS5kYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24ocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdlcnJvcicsIHJlc3BvbnNlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKSB7XG4gICAgICAgIF8udGVtcGxhdGVTZXR0aW5ncyA9IHtcbiAgICAgICAgICAgIGludGVycG9sYXRlOiAvXFx7XFx7KC4rPylcXH1cXH0vZ1xuICAgICAgICB9O1xuXG4gICAgICAgICQoJy5qcy13aWRnZXQtc2NoZWR1bGUnKS5lYWNoKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIHNjaGVkdWxlcyA9IG5ldyBIb2NrZXlEYXRhV2lkZ2V0c1NjaGVkdWxlO1xuICAgICAgICAgICAgc2NoZWR1bGVzLmluaXQoJCh0aGlzKSk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xufSkoalF1ZXJ5KTtcbiIsIihmdW5jdGlvbigkKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgdmFyIEhvY2tleURhdGFXaWRnZXRzU2NoZWR1bGVTaW5nbGUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGxvZ29CYXNlVXJsID0gJy93cC1jb250ZW50L3RoZW1lcy9oc2MtdGhlbWUvaW1hZ2VzL3RlYW1zJztcbiAgICAgICAgdmFyIGRpdmlzaW9uSWQgPSAnMTM2JztcbiAgICAgICAgdmFyIHRlYW1JZCA9ICc3MzEnO1xuICAgICAgICB2YXIgdHlwZSA9ICdsYXN0JztcblxuICAgICAgICB2YXIgcmV0cmlldmVSb3dUZW1wbGF0ZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIGNsYXNzTmFtZSA9ICdsYXN0LWdhbWUtd2lkZ2V0JztcblxuICAgICAgICAgICAgaWYgKHR5cGUgPT09ICduZXh0Jykge1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZSA9ICduZXh0LWdhbWUtd2lkZ2V0JztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuICc8ZGl2IGNsYXNzPVwiaHNjLWdhbWUtc2NoZWR1bGUtd2lkZ2V0ICcgKyBjbGFzc05hbWUgKyAnXCI+J1xuICAgICAgICAgICAgICAgICsgJzxkaXYgY2xhc3M9XCJzY2hlZHVsZS13aWRnZXQtaG9sZGVyXCI+J1xuICAgICAgICAgICAgICAgICsgJyAgPGRpdiBjbGFzcz1cImltYWdlIGltYWdlLWhvbWUtdGVhbVwiPidcbiAgICAgICAgICAgICAgICArICcgICAgPGltZyBzcmM9XCInICsgbG9nb0Jhc2VVcmwgKyAnL3t7IGhvbWVUZWFtSWQgfX0ucG5nXCIgLz4nXG4gICAgICAgICAgICAgICAgKyAnICA8L2Rpdj4nXG4gICAgICAgICAgICAgICAgKyAnICA8ZGl2IGNsYXNzPVwibWV0YVwiPidcbiAgICAgICAgICAgICAgICArICcgICAgPGRpdiBjbGFzcz1cImRhdGVcIj57eyBzY2hlZHVsZWREYXRlLnZhbHVlIH19PC9kaXY+J1xuICAgICAgICAgICAgICAgICsgJyAgICA8ZGl2IGNsYXNzPVwidGltZVwiPnt7IHNjaGVkdWxlZFRpbWUgfX08L2Rpdj4nXG4gICAgICAgICAgICAgICAgKyAnICAgIDxkaXYgY2xhc3M9XCJzY29yZXNcIj57eyBob21lVGVhbVNjb3JlIH19Ont7IGF3YXlUZWFtU2NvcmUgfX08L2Rpdj4nXG4gICAgICAgICAgICAgICAgKyAnICA8L2Rpdj4nXG4gICAgICAgICAgICAgICAgKyAnICA8ZGl2IGNsYXNzPVwiaW1hZ2UgaW1hZ2UtYXdheS10ZWFtXCI+J1xuICAgICAgICAgICAgICAgICsgJyAgICA8aW1nIHNyYz1cIicgKyBsb2dvQmFzZVVybCArICcve3sgYXdheVRlYW1JZCB9fS5wbmdcIiAvPidcbiAgICAgICAgICAgICAgICArICcgIDwvZGl2PidcbiAgICAgICAgICAgICAgICArICc8L2Rpdj4nXG4gICAgICAgICAgICAgICAgKyAnICA8ZGl2IGNsYXNzPVwidGVhbXNcIj4nXG4gICAgICAgICAgICAgICAgKyAnICAgIDxzcGFuIGNsYXNzPVwidGVhbSBob21lLXRlYW1cIj57eyBob21lVGVhbUxvbmdOYW1lIH19PC9zcGFuPidcbiAgICAgICAgICAgICAgICArICcgICAgPHNwYW4gY2xhc3M9XCJkaXZpZGVyXCI+LTwvc3Bhbj4nXG4gICAgICAgICAgICAgICAgKyAnICAgIDxzcGFuIGNsYXNzPVwidGVhbSBhd2F5LXRlYW1cIj57eyBhd2F5VGVhbUxvbmdOYW1lIH19PC9zcGFuPidcbiAgICAgICAgICAgICAgICArICcgIDwvZGl2PidcbiAgICAgICAgICAgICAgICArICc8L2Rpdj4nO1xuICAgICAgICB9O1xuXG4gICAgICAgIHZhciBidWlsZFdpZGdldCA9IGZ1bmN0aW9uKCRlbGVtLCBkYXRhKSB7XG4gICAgICAgICAgICB2YXIgb3V0cHV0ID0gJzxkaXY+JztcbiAgICAgICAgICAgIHZhciByb3dzID0gYnVpbGRSb3dzKGRhdGEucm93cyk7XG4gICAgICAgICAgICBvdXRwdXQgKz0gcm93cztcbiAgICAgICAgICAgIG91dHB1dCArPSAnPC9kaXY+JztcblxuICAgICAgICAgICAgJGVsZW0uaHRtbChvdXRwdXQpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHZhciBidWlsZFJvd3MgPSBmdW5jdGlvbihyb3dzKSB7XG4gICAgICAgICAgICB2YXIgb3V0cHV0ID0gJyc7XG4gICAgICAgICAgICB2YXIgdGVtcGxhdGUgPSBfLnRlbXBsYXRlKHJldHJpZXZlUm93VGVtcGxhdGUoKSk7XG4gICAgICAgICAgICB2YXIgdG9kYXkgPSBtb21lbnQoKTtcbiAgICAgICAgICAgIHZhciBsaW1pdCA9IDE7XG4gICAgICAgICAgICB2YXIgZm91bmQgPSAwO1xuXG4gICAgICAgICAgICBpZiAodHlwZSA9PT0gJ2xhc3QnKSB7XG4gICAgICAgICAgICAgICAgcm93cyA9IF8uY2hhaW4ocm93cykucmV2ZXJzZSgpLl93cmFwcGVkO1xuICAgICAgICAgICAgICAgIHZhciBsYXN0R2FtZSA9IF8uZmluZChyb3dzLCBmdW5jdGlvbihyb3cpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKChyb3cuaG9tZVRlYW1JZCA9PT0gdGVhbUlkIHx8IHJvdy5hd2F5VGVhbUlkID09PSB0ZWFtSWQpXG4gICAgICAgICAgICAgICAgICAgICAgICAmJiAocm93LnNjaGVkdWxlZERhdGUgJiYgcm93LnNjaGVkdWxlZERhdGUudmFsdWUpXG4gICAgICAgICAgICAgICAgICAgICAgICAmJiByb3cuaG9tZVRlYW1TY29yZSAhPT0gbnVsbFxuICAgICAgICAgICAgICAgICAgICAgICAgJiYgcm93LmF3YXlUZWFtU2NvcmUgIT09IG51bGxcbiAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZ2FtZURhdGUgPSBtb21lbnQocm93LnNjaGVkdWxlZERhdGUudmFsdWUsICdERC5NTS5ZWVlZJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZ2FtZURhdGUuaXNCZWZvcmUodG9kYXkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJvdztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgaWYgKGxhc3RHYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgIG91dHB1dCArPSB0ZW1wbGF0ZShsYXN0R2FtZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAodHlwZSA9PT0gJ25leHQnKSB7XG4gICAgICAgICAgICAgICAgdmFyIG5leHRHYW1lID0gXy5maW5kKHJvd3MsIGZ1bmN0aW9uKHJvdykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoKHJvdy5ob21lVGVhbUlkID09PSB0ZWFtSWQgfHwgcm93LmF3YXlUZWFtSWQgPT09IHRlYW1JZClcbiAgICAgICAgICAgICAgICAgICAgICAgICYmIChyb3cuc2NoZWR1bGVkRGF0ZSAmJiByb3cuc2NoZWR1bGVkRGF0ZS52YWx1ZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICYmIHJvdy5ob21lVGVhbVNjb3JlID09PSBudWxsXG4gICAgICAgICAgICAgICAgICAgICAgICAmJiByb3cuYXdheVRlYW1TY29yZSA9PT0gbnVsbFxuICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBnYW1lRGF0ZSA9IG1vbWVudChyb3cuc2NoZWR1bGVkRGF0ZS52YWx1ZSwgJ0RELk1NLllZWVknKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChnYW1lRGF0ZS5pc1NhbWVPckFmdGVyKHRvZGF5KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByb3c7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIGlmIChuZXh0R2FtZSkge1xuICAgICAgICAgICAgICAgICAgICBvdXRwdXQgKz0gdGVtcGxhdGUobmV4dEdhbWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIG91dHB1dDtcbiAgICAgICAgfTtcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgaW5pdDogZnVuY3Rpb24oJGVsZW0pIHtcbiAgICAgICAgICAgICAgICB2YXIgc2VydmljZSA9IG5ldyBIb2NrZXlEYXRhU2VydmljZTtcbiAgICAgICAgICAgICAgICBkaXZpc2lvbklkID0gJGVsZW0uZGF0YSgnZGl2aXNpb24nKTtcbiAgICAgICAgICAgICAgICB0ZWFtSWQgPSAkZWxlbS5kYXRhKCd0ZWFtJyk7XG4gICAgICAgICAgICAgICAgdHlwZSA9ICRlbGVtLmRhdGEoJ3R5cGUnKTtcblxuICAgICAgICAgICAgICAgIHZhciBkYXRhID0gc2VydmljZS5nZXRTY2hlZHVsZShkaXZpc2lvbklkKS50aGVuKFxuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYnVpbGRXaWRnZXQoJGVsZW0sIHJlc3BvbnNlLmRhdGEpO1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2Vycm9yJywgcmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gYnVpbGRXaWRnZXQoJGVsZW0sIEpTT04ucGFyc2UocmVzcG9uc2UuZGF0YSkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG5cbiAgICAkKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpIHtcbiAgICAgICAgXy50ZW1wbGF0ZVNldHRpbmdzID0ge1xuICAgICAgICAgICAgaW50ZXJwb2xhdGU6IC9cXHtcXHsoLis/KVxcfVxcfS9nXG4gICAgICAgIH07XG5cbiAgICAgICAgJCgnLmpzLXdpZGdldC1zY2hlZHVsZS1zaW5nbGUnKS5lYWNoKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIHNjaGVkdWxlc1NpbmdsZSA9IG5ldyBIb2NrZXlEYXRhV2lkZ2V0c1NjaGVkdWxlU2luZ2xlO1xuICAgICAgICAgICAgc2NoZWR1bGVzU2luZ2xlLmluaXQoJCh0aGlzKSk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xufSkoalF1ZXJ5KTtcbiIsIihmdW5jdGlvbigkKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgICBmdW5jdGlvbiBIb2NrZXlEYXRhV2lkZ2V0c1N0YW5kaW5ncygpIHtcbiAgICAgICAgdmFyIGxvZ29CYXNlVXJsID0gJy93cC1jb250ZW50L3RoZW1lcy9oc2MtdGhlbWUvaW1hZ2VzL3RlYW1zJztcbiAgICAgICAgdmFyIGRpdmlzaW9uSWQgPSAnMTM2JztcbiAgICAgICAgdmFyIHRlYW1JZCA9ICc3MzEnO1xuXG4gICAgICAgIHZhciByZXRyaWV2ZUhlYWRlclRlbXBsYXRlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gJzx0ciBjbGFzcz1cImhzYy1zdGFuZGluZ3MtaGVhZGVyXCI+J1xuICAgICAgICAgICAgICAgICsgJzx0ZCBjbGFzcz1cInJhbmtcIj4jPC90ZD4nXG4gICAgICAgICAgICAgICAgKyAnPHRkIGNsYXNzPVwiaW1hZ2VcIj48L3RkPidcbiAgICAgICAgICAgICAgICArICc8dGQgY2xhc3M9XCJ0ZWFtXCI+VGVhbTwvdGQ+J1xuICAgICAgICAgICAgICAgICsgJzx0ZCBjbGFzcz1cImluZm8gdGQtZ3BcIj5TcDwvdGQ+J1xuICAgICAgICAgICAgICAgICsgJzx0ZCBjbGFzcz1cImluZm8gdGQtd1wiPlM8L3RkPidcbiAgICAgICAgICAgICAgICArICc8dGQgY2xhc3M9XCJpbmZvIHRkLWxcIj5OPC90ZD4nXG4gICAgICAgICAgICAgICAgKyAnPHRkIGNsYXNzPVwiaW5mbyB0ZC1vdHdcIj5PVFM8L3RkPidcbiAgICAgICAgICAgICAgICArICc8dGQgY2xhc3M9XCJpbmZvIHRkLW90bFwiPk9UTjwvdGQ+J1xuICAgICAgICAgICAgICAgICsgJzx0ZCBjbGFzcz1cImluZm8gdGQtZ29hbHNcIj5Ub3JlPC90ZD4nXG4gICAgICAgICAgICAgICAgKyAnPHRkIGNsYXNzPVwiaW5mbyB0ZC1nZFwiPlREPC90ZD4nXG4gICAgICAgICAgICAgICAgKyAnPHRkIGNsYXNzPVwiaW5mbyB0ZC1wdHNcIj5QS1Q8L3RkPidcbiAgICAgICAgICAgICAgICArICc8L3RyPic7XG4gICAgICAgIH07XG5cbiAgICAgICAgdmFyIHJldHJpZXZlUm93VGVtcGxhdGUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiAnPHRyIGNsYXNzPVwiaHNjLXN0YW5kaW5ncy1yb3dcIj4nXG4gICAgICAgICAgICAgICAgKyAnPHRkIGNsYXNzPVwicmFua1wiPnt7IHRhYmxlUmFuayB9fTwvdGQ+J1xuICAgICAgICAgICAgICAgICsgJzx0ZCBjbGFzcz1cImltYWdlXCI+PGltZyBzcmM9XCInICsgbG9nb0Jhc2VVcmwgKyAnL3t7IGlkIH19LnBuZ1wiIC8+PC90ZD4nXG4gICAgICAgICAgICAgICAgKyAnPHRkIGNsYXNzPVwidGVhbVwiPnt7IHRlYW1Mb25nbmFtZSB9fTwvdGQ+J1xuICAgICAgICAgICAgICAgICsgJzx0ZCBjbGFzcz1cImluZm8gdGQtZ3BcIj57eyBnYW1lc1BsYXllZCB9fTwvdGQ+J1xuICAgICAgICAgICAgICAgICsgJzx0ZCBjbGFzcz1cImluZm8gdGQtd1wiPnt7IGdhbWVzV29uIH19PC90ZD4nXG4gICAgICAgICAgICAgICAgKyAnPHRkIGNsYXNzPVwiaW5mbyB0ZC1sXCI+e3sgZ2FtZXNMb3N0IH19PC90ZD4nXG4gICAgICAgICAgICAgICAgKyAnPHRkIGNsYXNzPVwiaW5mbyB0ZC1vdHdcIj57eyBnYW1lc1dvbkluT3QgfX08L3RkPidcbiAgICAgICAgICAgICAgICArICc8dGQgY2xhc3M9XCJpbmZvIHRkLW90bFwiPnt7IGdhbWVzTG9zdEluT3QgfX08L3RkPidcbiAgICAgICAgICAgICAgICArICc8dGQgY2xhc3M9XCJpbmZvIHRkLWdvYWxzXCI+e3sgZ29hbHNGb3IgfX06e3sgZ29hbHNBZ2FpbnN0IH19PC90ZD4nXG4gICAgICAgICAgICAgICAgKyAnPHRkIGNsYXNzPVwiaW5mbyB0ZC1nZFwiPnt7IGdvYWxEaWZmZXJlbmNlIH19PC90ZD4nXG4gICAgICAgICAgICAgICAgKyAnPHRkIGNsYXNzPVwiaW5mbyB0ZC1wdHNcIj57eyBwb2ludHMgfX08L3RkPidcbiAgICAgICAgICAgICAgICArICc8L3RyPic7XG4gICAgICAgIH07XG5cbiAgICAgICAgdmFyIGJ1aWxkV2lkZ2V0ID0gZnVuY3Rpb24oJGVsZW0sIGRhdGEpIHtcbiAgICAgICAgICAgIHZhciBvdXRwdXQgPSAnPHRhYmxlIGNsYXNzPVwiaHNjLXRhYmxlIGhzYy1zdGFuZGluZ3NcIj4nO1xuICAgICAgICAgICAgdmFyIHJvd3MgPSBidWlsZFJvd3MoZGF0YS5yb3dzKTtcbiAgICAgICAgICAgIG91dHB1dCArPSByZXRyaWV2ZUhlYWRlclRlbXBsYXRlKCk7XG4gICAgICAgICAgICBvdXRwdXQgKz0gcm93cztcbiAgICAgICAgICAgIG91dHB1dCArPSAnPC90YWJsZT4nO1xuXG4gICAgICAgICAgICAkZWxlbS5odG1sKG91dHB1dCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgdmFyIGJ1aWxkUm93cyA9IGZ1bmN0aW9uKHJvd3MpIHtcbiAgICAgICAgICAgIHZhciBvdXRwdXQgPSAnJztcbiAgICAgICAgICAgIHZhciB0ZW1wbGF0ZSA9IF8udGVtcGxhdGUocmV0cmlldmVSb3dUZW1wbGF0ZSgpKTtcblxuICAgICAgICAgICAgXy5lYWNoKHJvd3MsIGZ1bmN0aW9uKHZhbHVlLCBrZXkpIHtcbiAgICAgICAgICAgICAgICBvdXRwdXQgKz0gdGVtcGxhdGUodmFsdWUpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHJldHVybiBvdXRwdXQ7XG4gICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGluaXQ6IGZ1bmN0aW9uKCRlbGVtKSB7XG4gICAgICAgICAgICAgICAgdmFyIHNlcnZpY2UgPSBuZXcgSG9ja2V5RGF0YVNlcnZpY2U7XG4gICAgICAgICAgICAgICAgZGl2aXNpb25JZCA9ICRlbGVtLmRhdGEoJ2RpdmlzaW9uJyk7XG5cbiAgICAgICAgICAgICAgICBzZXJ2aWNlLmdldFN0YW5kaW5ncyhkaXZpc2lvbklkKS50aGVuKFxuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYnVpbGRXaWRnZXQoJGVsZW0sIHJlc3BvbnNlLmRhdGEpO1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2Vycm9yJywgcmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG5cbiAgICAkKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpIHtcbiAgICAgICAgXy50ZW1wbGF0ZVNldHRpbmdzID0ge1xuICAgICAgICAgICAgaW50ZXJwb2xhdGU6IC9cXHtcXHsoLis/KVxcfVxcfS9nXG4gICAgICAgIH07XG5cbiAgICAgICAgJCgnLmpzLXdpZGdldC1zdGFuZGluZ3MnKS5lYWNoKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIHN0YW5kaW5ncyA9IG5ldyBIb2NrZXlEYXRhV2lkZ2V0c1N0YW5kaW5ncztcbiAgICAgICAgICAgIHN0YW5kaW5ncy5pbml0KCQodGhpcykpO1xuICAgICAgICB9KTtcbiAgICB9KTtcbn0pKGpRdWVyeSk7XG4iLCIoZnVuY3Rpb24oJCkge1xud2luZG93LkhvY2tleURhdGFTZXJ2aWNlID0gZnVuY3Rpb24oKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgICB2YXIgYmFzZVVybCA9ICdodHRwOi8vYXBpLmhvY2tleWRhdGEubmV0L2RhdGEvZWJlbCc7XG4gICAgdmFyIHNjaGVkdWxlVXJsID0gJy9TY2hlZHVsZSc7XG4gICAgdmFyIHN0YW5kaW5nc1VybCA9ICcvU3RhbmRpbmdzJztcbiAgICB2YXIga25vY2tvdXRVcmwgPSAnL0tub2Nrb3V0U3RhZ2UnO1xuXG4gICAgdmFyIHVybFBhcmFtcyA9IHtcbiAgICAgICAgYXBpS2V5OiAnZTUyYjU3MjJjYmM4OWMzZTUxZWUwY2Q2ZTI0ODVhODEnLFxuICAgICAgICBkaXZpc2lvbklkOiAnMTM2JyxcbiAgICAgICAgbGVhZ3VlOiAnZWJlbCcsXG4gICAgICAgIHNwb3J0OiAnaWNlaG9ja2V5JyxcbiAgICAgICAgcmVmZXJlcjogJ3d3dy5oLXNjLmF0J1xuICAgIH07XG5cbiAgICByZXR1cm4ge1xuICAgICAgICBnZXRTY2hlZHVsZTogZnVuY3Rpb24oZGl2aXNpb25JZCkge1xuICAgICAgICAgICAgdmFyIGRlZmVyID0gJC5EZWZlcnJlZCgpO1xuXG4gICAgICAgICAgICB1cmxQYXJhbXMuZGl2aXNpb25JZCA9IGRpdmlzaW9uSWQ7XG4gICAgICAgICAgICB2YXIgcGFyYW1zID0gJC5wYXJhbSh1cmxQYXJhbXMpO1xuICAgICAgICAgICAgdmFyIHVybCA9IGJhc2VVcmwgKyBzY2hlZHVsZVVybCArICc/JyArIHBhcmFtcztcblxuICAgICAgICAgICAgdmFyIHJlcXVlc3QgPSAkLmFqYXgoe1xuICAgICAgICAgICAgICAgIHVybDogdXJsLFxuICAgICAgICAgICAgICAgIGRhdGFUeXBlOiBcImpzb25wXCIsXG4gICAgICAgICAgICAgICAgYXN5bmM6IGZhbHNlXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJlcXVlc3Quc3VjY2VzcyhmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEucm93cy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgXCJpZFwiOiBcImQ5ZTZkOTc3LWUzYmQtNGQ4MS05Nzg4LTcyMmNkYjlmNjY5YlwiLFxuICAgICAgICAgICAgICAgICAgICBcImRpdmlzaW9uSWRcIjogMTM2LFxuICAgICAgICAgICAgICAgICAgICBcImRpdmlzaW9uTmFtZVwiOiBcIlZFSEwgMVwiLFxuICAgICAgICAgICAgICAgICAgICBcInNjaGVkdWxlZERhdGVcIjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgXCJzb3J0VmFsdWVcIjogMTQ0NTE4MDQwMDAwMCxcbiAgICAgICAgICAgICAgICAgICAgICAgIFwidmFsdWVcIjogXCIxOC4xMC4yMDE5XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBcInNob3J0VmFsdWVcIjogXCIxOC4xMC5cIixcbiAgICAgICAgICAgICAgICAgICAgICAgIFwibG9uZ1ZhbHVlXCI6IFwiMTguIE9rdG9iZXIgMjAxNVwiXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIFwic2NoZWR1bGVkVGltZVwiOiBcIjE3OjAwXCIsXG4gICAgICAgICAgICAgICAgICAgIFwiYXdheVRlYW1JZFwiOiA3MjgsXG4gICAgICAgICAgICAgICAgICAgIFwiYXdheVRlYW1Mb25nTmFtZVwiOiBcIkVIQyBNZWdhZml0IEljZSBUaWdlcnMgRG9ybmJpcm5cIixcbiAgICAgICAgICAgICAgICAgICAgXCJhd2F5VGVhbVNob3J0TmFtZVwiOiBcIklURFwiLFxuICAgICAgICAgICAgICAgICAgICBcImF3YXlUZWFtRmxhdm91cm5hbWVcIjogXCJFSEMgTWVnYWZpdCBJY2UgVGlnZXJzIERvcm5iaXJuXCIsXG4gICAgICAgICAgICAgICAgICAgIFwiaG9tZVRlYW1JZFwiOiA3MzEsXG4gICAgICAgICAgICAgICAgICAgIFwiaG9tZVRlYW1Mb25nTmFtZVwiOiBcIlNDIEhvaGVuZW1zIDJcIixcbiAgICAgICAgICAgICAgICAgICAgXCJob21lVGVhbVNob3J0TmFtZVwiOiBcIkhPMlwiLFxuICAgICAgICAgICAgICAgICAgICBcImhvbWVUZWFtRmxhdm91cm5hbWVcIjogXCJTQyBIb2hlbmVtcyAyXCIsXG4gICAgICAgICAgICAgICAgICAgIFwiaG9tZVRlYW1TY29yZVwiOiBudWxsLFxuICAgICAgICAgICAgICAgICAgICBcImF3YXlUZWFtU2NvcmVcIjogbnVsbFxuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIGRlZmVyLnJlc29sdmUocmVzcG9uc2UpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXF1ZXN0LmVycm9yKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGRlZmVyLnJlamVjdCh7XG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJvd3M6IFtdXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICByZXR1cm4gZGVmZXIucHJvbWlzZSgpO1xuXG4gICAgICAgIH0sXG4gICAgICAgIGdldFN0YW5kaW5nczogZnVuY3Rpb24oZGl2aXNpb25JZCkge1xuICAgICAgICAgICAgdXJsUGFyYW1zLmRpdmlzaW9uSWQgPSBkaXZpc2lvbklkO1xuICAgICAgICAgICAgdmFyIHBhcmFtcyA9ICQucGFyYW0odXJsUGFyYW1zKTtcbiAgICAgICAgICAgIHZhciB1cmwgPSBiYXNlVXJsICsgc3RhbmRpbmdzVXJsICsgJz8nICsgcGFyYW1zO1xuXG4gICAgICAgICAgICByZXR1cm4gJC5hamF4KHtcbiAgICAgICAgICAgICAgICB1cmw6IHVybCxcbiAgICAgICAgICAgICAgICBkYXRhVHlwZTogXCJqc29ucFwiXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgZ2V0S25vY2tvdXQ6IGZ1bmN0aW9uKGRpdmlzaW9uSWQpIHtcbiAgICAgICAgICAgIHVybFBhcmFtcy5kaXZpc2lvbklkID0gZGl2aXNpb25JZDtcbiAgICAgICAgICAgIHZhciBwYXJhbXMgPSAkLnBhcmFtKHVybFBhcmFtcyk7XG4gICAgICAgICAgICB2YXIgdXJsID0gYmFzZVVybCArIGtub2Nrb3V0VXJsICsgJz8nICsgcGFyYW1zO1xuXG4gICAgICAgICAgICByZXR1cm4gJC5hamF4KHtcbiAgICAgICAgICAgICAgICB1cmw6IHVybCxcbiAgICAgICAgICAgICAgICBkYXRhVHlwZTogXCJqc29ucFwiXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbn07XG59KShqUXVlcnkpO1xuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
